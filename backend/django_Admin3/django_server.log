Watching for file changes with StatReloader
DJANGO_ENV django_Admin3.settings.development
DJANGO_ENV development
DJANGO_SETTINGS_MODULE django_Admin3.settings.development
DJANGO_ENV FILE C:\Code\Admin3\backend\django_Admin3\.env.development
Loading environment from: C:\Code\Admin3\backend\django_Admin3\.env.development
INFO Watching for file changes with StatReloader
Performing system checks...

System check identified no issues (0 silenced).
[04/Nov/2025 17:39:05] "GET /api/utils/health/ HTTP/1.1" 200 60
November 04, 2025 - 17:38:24
Django version 5.2.7, using settings 'django_Admin3.settings.development'
Starting development server at http://127.0.0.1:8888/
Quit the server with CTRL-BREAK.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
INFO Cache MISS for postcode SW1A1AA
INFO Calling Postcoder API for postcode: SW1A1AA
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/uk/SW1A1AA HTTP/1.1" 200 174
INFO Successfully retrieved 1 addresses
INFO Cached addresses for postcode SW1A1AA (expires: 2025-11-11)
INFO [POSTCODER] SUCCESS (API) SW1A1AA: 1 addresses in 411ms
[04/Nov/2025 17:39:26] "GET /api/utils/postcoder-address-lookup/?postcode=SW1A1AA HTTP/1.1" 200 283
INFO Cache HIT for postcode SW1A1AA (hits: 2)
INFO [POSTCODER] SUCCESS (cached) SW1A1AA: 1 addresses in 119ms
[04/Nov/2025 17:39:49] "GET /api/utils/postcoder-address-lookup/?postcode=SW1A1AA HTTP/1.1" 200 282
INFO Cache MISS for postcode OX449EL
INFO Calling Postcoder API for postcode: OX449EL
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/uk/OX449EL HTTP/1.1" 200 4116
INFO Successfully retrieved 17 addresses
INFO Cached addresses for postcode OX449EL (expires: 2025-11-11)
INFO [POSTCODER] SUCCESS (API) OX449EL: 17 addresses in 229ms
[04/Nov/2025 17:40:26] "GET /api/utils/postcoder-address-lookup/?postcode=OX449EL HTTP/1.1" 200 4736
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[04/Nov/2025 17:42:15] "GET /api/utils/address-lookup/?postcode=OX449EL HTTP/1.1" 200 992
[05/Nov/2025 10:00:12] "GET /api/countries/ HTTP/1.1" 200 27171
[05/Nov/2025 10:00:12] "GET /api/countries/ HTTP/1.1" 200 27171
[05/Nov/2025 10:00:25] "GET /api/countries HTTP/1.1" 301 0
[05/Nov/2025 10:00:25] "GET /api/countries/ HTTP/1.1" 200 27171
[05/Nov/2025 10:00:25] "GET /api/countries/ HTTP/1.1" 200 27171
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:00:32] "GET /api/utils/address-lookup/?postcode=OX14%201BZ HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:00:33] "GET /api/utils/address-lookup/?postcode=OX14%201BZ HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:01:47] "GET /api/utils/address-lookup/?postcode=OX14%201BZ HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:01:48] "GET /api/utils/address-lookup/?postcode=OX14%201BZ HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:01:49] "GET /api/utils/address-lookup/?postcode=OX14%201BZ HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:01:49] "GET /api/utils/address-lookup/?postcode=OX14%201BZ HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:01:49] "GET /api/utils/address-lookup/?postcode=OX14%201BZ HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:01:49] "GET /api/utils/address-lookup/?postcode=OX14%201BZ HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:01:49] "GET /api/utils/address-lookup/?postcode=OX14%201BZ HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:01:50] "GET /api/utils/address-lookup/?postcode=OX14%201BZ HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:01:50] "GET /api/utils/address-lookup/?postcode=OX14%201BZ HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:01:50] "GET /api/utils/address-lookup/?postcode=OX14%201BZ HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:01:50] "GET /api/utils/address-lookup/?postcode=OX14%201BZ HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:01:50] "GET /api/utils/address-lookup/?postcode=OX14%201BZ HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:01:50] "GET /api/utils/address-lookup/?postcode=OX14%201BZ HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:01:50] "GET /api/utils/address-lookup/?postcode=OX14%201BZ HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:01:50] "GET /api/utils/address-lookup/?postcode=OX14%201BZ HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:01:51] "GET /api/utils/address-lookup/?postcode=OX14%201BZ HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:01:51] "GET /api/utils/address-lookup/?postcode=OX14%201BZ HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:01:51] "GET /api/utils/address-lookup/?postcode=OX14%201BZ HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:01:51] "GET /api/utils/address-lookup/?postcode=OX14%201BZ HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:01:51] "GET /api/utils/address-lookup/?postcode=OX14%201BZ HTTP/1.1" 200 992
[05/Nov/2025 10:01:57] "GET /api/countries/ HTTP/1.1" 200 27171
[05/Nov/2025 10:01:57] "GET /api/countries/ HTTP/1.1" 200 27171
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:02:17] "GET /api/utils/address-lookup/?postcode=OX44%209EL HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:02:18] "GET /api/utils/address-lookup/?postcode=OX44%209EL HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:02:18] "GET /api/utils/address-lookup/?postcode=OX44%209EL HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:02:19] "GET /api/utils/address-lookup/?postcode=OX44%209EL HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:02:19] "GET /api/utils/address-lookup/?postcode=OX44%209EL HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:02:19] "GET /api/utils/address-lookup/?postcode=OX44%209EL HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:02:21] "GET /api/utils/address-lookup/?postcode=OX44%209EL HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:03:06] "GET /api/utils/address-lookup/?postcode=OX44%209EL HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:03:08] "GET /api/utils/address-lookup/?postcode=OX44%209EL HTTP/1.1" 200 992
INFO Cache HIT for postcode SW1A1AA (hits: 3)
INFO [POSTCODER] SUCCESS (cached) SW1A1AA: 1 addresses in 210ms
[05/Nov/2025 10:09:49] "GET /api/utils/postcoder-address-lookup/?postcode=SW1A1AA HTTP/1.1" 200 282
INFO Cache HIT for postcode SW1A1AA (hits: 4)
INFO [POSTCODER] SUCCESS (cached) SW1A1AA: 1 addresses in 118ms
[05/Nov/2025 10:09:50] "GET /api/utils/postcoder-address-lookup/?postcode=SW1A1AA HTTP/1.1" 200 282
INFO Cache MISS for postcode OX49EL
INFO Calling Postcoder API for postcode: OX49EL
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/uk/OX49EL HTTP/1.1" 200 2
INFO Successfully retrieved 0 addresses
INFO Cached addresses for postcode OX49EL (expires: 2025-11-12)
INFO [POSTCODER] SUCCESS (API) OX49EL: 0 addresses in 338ms
[05/Nov/2025 10:09:51] "GET /api/utils/postcoder-address-lookup/?postcode=OX49EL HTTP/1.1" 200 62
INFO Cache MISS for postcode EC1A1BB
INFO Calling Postcoder API for postcode: EC1A1BB
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/uk/EC1A1BB HTTP/1.1" 200 315
INFO Successfully retrieved 1 addresses
INFO Cached addresses for postcode EC1A1BB (expires: 2025-11-12)
INFO [POSTCODER] SUCCESS (API) EC1A1BB: 1 addresses in 602ms
[05/Nov/2025 10:09:52] "GET /api/utils/postcoder-address-lookup/?postcode=EC1A1BB HTTP/1.1" 200 371
INFO Cache MISS for postcode M13NQ
INFO Calling Postcoder API for postcode: M13NQ
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/uk/M13NQ HTTP/1.1" 200 2
INFO Successfully retrieved 0 addresses
INFO Cached addresses for postcode M13NQ (expires: 2025-11-12)
INFO [POSTCODER] SUCCESS (API) M13NQ: 0 addresses in 448ms
[05/Nov/2025 10:09:53] "GET /api/utils/postcoder-address-lookup/?postcode=M13NQ HTTP/1.1" 200 62
INFO Cache HIT for postcode SW1A1AA (hits: 5)
INFO [POSTCODER] SUCCESS (cached) SW1A1AA: 1 addresses in 449ms
[05/Nov/2025 10:09:55] "GET /api/utils/postcoder-address-lookup/?postcode=sw1a+1aa HTTP/1.1" 200 282
INFO Cache MISS for postcode INVALID
INFO Calling Postcoder API for postcode: INVALID
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/uk/INVALID HTTP/1.1" 200 749
INFO Successfully retrieved 2 addresses
INFO Cached addresses for postcode INVALID (expires: 2025-11-12)
INFO [POSTCODER] SUCCESS (API) INVALID: 2 addresses in 403ms
[05/Nov/2025 10:09:56] "GET /api/utils/postcoder-address-lookup/?postcode=INVALID HTTP/1.1" 200 633
Bad Request: /api/utils/postcoder-address-lookup/
WARNING Bad Request: /api/utils/postcoder-address-lookup/
[05/Nov/2025 10:09:56] "GET /api/utils/postcoder-address-lookup/?postcode=SW1 HTTP/1.1" 400 64
[05/Nov/2025 10:24:08] "OPTIONS /api/subjects/ HTTP/1.1" 200 0
[05/Nov/2025 10:24:08] "OPTIONS /api/products/navbar-product-groups/ HTTP/1.1" 200 0
[05/Nov/2025 10:24:08] "OPTIONS /api/products/distance-learning-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 10:24:08] "GET /api/countries/ HTTP/1.1" 200 27171
[05/Nov/2025 10:24:08] "OPTIONS /api/products/tutorial-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 10:24:08] "OPTIONS /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 0
[05/Nov/2025 10:24:09] "OPTIONS /api/subjects/ HTTP/1.1" 200 0
[05/Nov/2025 10:24:09] "OPTIONS /api/cart HTTP/1.1" 200 0
[05/Nov/2025 10:24:09] "OPTIONS /api/products/navbar-product-groups/ HTTP/1.1" 200 0
[05/Nov/2025 10:24:09] "OPTIONS /api/products/distance-learning-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 10:24:09] "OPTIONS /api/products/tutorial-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 10:24:09] "OPTIONS /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 0
[05/Nov/2025 10:24:09] "OPTIONS /api/cart HTTP/1.1" 200 0
[05/Nov/2025 10:24:09] "OPTIONS /api/cart/ HTTP/1.1" 200 0
[05/Nov/2025 10:24:09] "GET /api/subjects/ HTTP/1.1" 200 2286
[05/Nov/2025 10:24:09] "GET /api/products/navbar-product-groups/ HTTP/1.1" 200 3064
[05/Nov/2025 10:24:09] "GET /api/products/tutorial-dropdown/ HTTP/1.1" 200 1748
[05/Nov/2025 10:24:10] "GET /api/products/distance-learning-dropdown/ HTTP/1.1" 200 1819
[05/Nov/2025 10:24:10] "GET /api/countries/ HTTP/1.1" 200 27171
WARNING get_vat_calculations() is deprecated. Use get_vat_totals() instead. This method will be removed in a future version.
[05/Nov/2025 10:24:10] "GET /api/cart/ HTTP/1.1" 200 16043
[05/Nov/2025 10:24:11] "GET /api/subjects/ HTTP/1.1" 200 2286
[05/Nov/2025 10:24:11] "GET /api/products/navbar-product-groups/ HTTP/1.1" 200 3064
WARNING get_vat_calculations() is deprecated. Use get_vat_totals() instead. This method will be removed in a future version.
[05/Nov/2025 10:24:12] "GET /api/cart/ HTTP/1.1" 200 16043
[05/Nov/2025 10:24:12] "GET /api/products/tutorial-dropdown/ HTTP/1.1" 200 1748
[05/Nov/2025 10:24:12] "GET /api/products/distance-learning-dropdown/ HTTP/1.1" 200 1819
[05/Nov/2025 10:24:21] "GET /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 54018
[05/Nov/2025 10:24:22] "GET /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 54018
[05/Nov/2025 10:24:27] "GET /api/countries/ HTTP/1.1" 200 27171
[05/Nov/2025 10:24:27] "GET /api/countries/ HTTP/1.1" 200 27171
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:25:23] "GET /api/utils/address-lookup/?postcode=E1%208BT HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:25:29] "GET /api/utils/address-lookup/?postcode=E1%208BT HTTP/1.1" 200 992
[05/Nov/2025 10:25:39] "GET /api/countries/ HTTP/1.1" 200 27171
[05/Nov/2025 10:25:39] "GET /api/countries/ HTTP/1.1" 200 27171
[05/Nov/2025 10:25:39] "OPTIONS /api/subjects/ HTTP/1.1" 200 0
[05/Nov/2025 10:25:39] "OPTIONS /api/products/navbar-product-groups/ HTTP/1.1" 200 0
[05/Nov/2025 10:25:39] "OPTIONS /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 0
[05/Nov/2025 10:25:39] "OPTIONS /api/products/distance-learning-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 10:25:39] "OPTIONS /api/cart HTTP/1.1" 200 0
[05/Nov/2025 10:25:39] "OPTIONS /api/products/tutorial-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 10:25:39] "OPTIONS /api/subjects/ HTTP/1.1" 200 0
[05/Nov/2025 10:25:39] "OPTIONS /api/products/navbar-product-groups/ HTTP/1.1" 200 0
[05/Nov/2025 10:25:39] "OPTIONS /api/products/distance-learning-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 10:25:39] "OPTIONS /api/products/tutorial-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 10:25:39] "OPTIONS /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 0
[05/Nov/2025 10:25:39] "OPTIONS /api/cart HTTP/1.1" 200 0
[05/Nov/2025 10:25:40] "GET /api/subjects/ HTTP/1.1" 200 2286
[05/Nov/2025 10:25:40] "GET /api/products/tutorial-dropdown/ HTTP/1.1" 200 1748
[05/Nov/2025 10:25:40] "GET /api/products/navbar-product-groups/ HTTP/1.1" 200 3064
[05/Nov/2025 10:25:40] "GET /api/products/distance-learning-dropdown/ HTTP/1.1" 200 1819
[05/Nov/2025 10:25:40] "GET /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 54018
[05/Nov/2025 10:25:40] "GET /api/cart HTTP/1.1" 301 0
[05/Nov/2025 10:25:41] "OPTIONS /api/cart/ HTTP/1.1" 200 0
[05/Nov/2025 10:25:41] "GET /api/products/navbar-product-groups/ HTTP/1.1" 200 3064
[05/Nov/2025 10:25:41] "GET /api/products/tutorial-dropdown/ HTTP/1.1" 200 1748
[05/Nov/2025 10:25:41] "GET /api/subjects/ HTTP/1.1" 200 2286
[05/Nov/2025 10:25:41] "GET /api/cart HTTP/1.1" 301 0
[05/Nov/2025 10:25:41] "GET /api/products/distance-learning-dropdown/ HTTP/1.1" 200 1819
[05/Nov/2025 10:25:42] "GET /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 54018
[05/Nov/2025 10:25:42] "OPTIONS /api/cart/ HTTP/1.1" 200 0
WARNING get_vat_calculations() is deprecated. Use get_vat_totals() instead. This method will be removed in a future version.
[05/Nov/2025 10:25:42] "GET /api/cart/ HTTP/1.1" 200 16043
WARNING get_vat_calculations() is deprecated. Use get_vat_totals() instead. This method will be removed in a future version.
[05/Nov/2025 10:25:42] "GET /api/cart/ HTTP/1.1" 200 16043
[05/Nov/2025 10:25:53] "GET /api/countries HTTP/1.1" 301 0
[05/Nov/2025 10:25:53] "GET /api/countries HTTP/1.1" 301 0
[05/Nov/2025 10:25:54] "GET /api/countries/ HTTP/1.1" 200 27171
[05/Nov/2025 10:25:54] "GET /api/countries/ HTTP/1.1" 200 27171
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:26:16] "GET /api/utils/address-lookup/?postcode=E1%208BT HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:26:16] "GET /api/utils/address-lookup/?postcode=E1%208BT HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:26:21] "GET /api/utils/address-lookup/?postcode=E1%208BT HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:26:22] "GET /api/utils/address-lookup/?postcode=E1%208BT HTTP/1.1" 200 992
https://api.getAddress.io/v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686
DEBUG Starting new HTTPS connection (1): api.getaddress.io:443
DEBUG https://api.getaddress.io:443 "GET /v2/private-address?api-key=-A-yR_lwoE2LJiIoDzrf_Q46686 HTTP/1.1" 200 None
[05/Nov/2025 10:26:23] "GET /api/utils/address-lookup/?postcode=E1%208BT HTTP/1.1" 200 992
[05/Nov/2025 10:28:10] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 10:28:10] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
DEBUG Cache miss for rules:product_list_mount
DEBUG Cached 1 rules for product_list_mount
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762338490_60868e06
[05/Nov/2025 10:28:10] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1422
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762338490_0da105fa
[05/Nov/2025 10:28:10] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1422
[05/Nov/2025 10:28:10] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
INFO [SEARCH] Received filters: {'subjects': [], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING Unified Product Search - Duration: 0.245s, Queries: 77
[05/Nov/2025 10:28:11] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 21071
[05/Nov/2025 10:28:13] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 10:28:13] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
[05/Nov/2025 10:28:13] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 655
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762338493_591855ee
[05/Nov/2025 10:28:13] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1422
[05/Nov/2025 10:28:21] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
INFO [SEARCH] Received filters: {'subjects': [], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING Unified Product Search - Duration: 0.397s, Queries: 78
[05/Nov/2025 10:28:21] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 21719
[05/Nov/2025 10:28:23] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
[05/Nov/2025 10:28:23] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 10:28:23] "OPTIONS /api/markings/papers/deadlines/?essp_id=2763 HTTP/1.1" 200 0
[05/Nov/2025 10:28:23] "OPTIONS /api/markings/papers/deadlines/?essp_id=2741 HTTP/1.1" 200 0
[05/Nov/2025 10:28:23] "OPTIONS /api/markings/papers/deadlines/?essp_id=2741 HTTP/1.1" 200 0
[05/Nov/2025 10:28:24] "OPTIONS /api/markings/papers/deadlines/?essp_id=2763 HTTP/1.1" 200 0
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762338504_ccd7d45c
[05/Nov/2025 10:28:24] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1437
[05/Nov/2025 10:28:24] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 761
[05/Nov/2025 10:28:24] "GET /api/markings/papers/deadlines/?essp_id=2763 HTTP/1.1" 200 425
[05/Nov/2025 10:28:24] "GET /api/markings/papers/deadlines/?essp_id=2741 HTTP/1.1" 200 319
[05/Nov/2025 10:28:24] "GET /api/markings/papers/deadlines/?essp_id=2763 HTTP/1.1" 200 425
[05/Nov/2025 10:28:24] "GET /api/markings/papers/deadlines/?essp_id=2741 HTTP/1.1" 200 319
[05/Nov/2025 10:28:34] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
INFO [SEARCH] Received filters: {'subjects': ['CB1'], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 96, in search_products
    filtered_queryset = self._apply_optimized_filters(filtered_queryset, filters)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 268, in _apply_optimized_filters
    logger.info(f'\U0001f50d [SEARCH-DEBUG] Filtered queryset count: {queryset.count()}')
Message: '\U0001f50d [SEARCH-DEBUG] Filtered queryset count: 18'
Arguments: ()
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING Unified Product Search - Duration: 0.430s, Queries: 75
[05/Nov/2025 10:28:35] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 19428
[05/Nov/2025 10:28:36] "OPTIONS /api/markings/papers/deadlines/?essp_id=2762 HTTP/1.1" 200 0
[05/Nov/2025 10:28:36] "OPTIONS /api/markings/papers/deadlines/?essp_id=2740 HTTP/1.1" 200 0
[05/Nov/2025 10:28:36] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
[05/Nov/2025 10:28:36] "OPTIONS /api/markings/papers/deadlines/?essp_id=2740 HTTP/1.1" 200 0
[05/Nov/2025 10:28:36] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 10:28:36] "OPTIONS /api/markings/papers/deadlines/?essp_id=2762 HTTP/1.1" 200 0
[05/Nov/2025 10:28:37] "GET /api/markings/papers/deadlines/?essp_id=2762 HTTP/1.1" 200 319
[05/Nov/2025 10:28:37] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 655
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762338517_71f03a59
[05/Nov/2025 10:28:37] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1423
[05/Nov/2025 10:28:37] "GET /api/markings/papers/deadlines/?essp_id=2740 HTTP/1.1" 200 319
[05/Nov/2025 10:28:37] "GET /api/markings/papers/deadlines/?essp_id=2762 HTTP/1.1" 200 319
[05/Nov/2025 10:28:37] "GET /api/markings/papers/deadlines/?essp_id=2740 HTTP/1.1" 200 319
[05/Nov/2025 10:38:26] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
INFO [SEARCH] Received filters: {'subjects': [], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING SLOW SEARCH: 0.516s - Filters: {'subjects': [], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
WARNING Unified Product Search - Duration: 0.520s, Queries: 77
[05/Nov/2025 10:38:27] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 21069
[05/Nov/2025 10:38:29] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
DEBUG Cache miss for rules:product_list_mount
DEBUG Cached 1 rules for product_list_mount
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762339110_8e68bc97
[05/Nov/2025 10:38:30] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1423
[05/Nov/2025 10:38:38] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
INFO [SEARCH] Received filters: {'subjects': [], 'categories': ['Marking'], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 96, in search_products
    filtered_queryset = self._apply_optimized_filters(filtered_queryset, filters)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 268, in _apply_optimized_filters
    logger.info(f'\U0001f50d [SEARCH-DEBUG] Filtered queryset count: {queryset.count()}')
Message: '\U0001f50d [SEARCH-DEBUG] Filtered queryset count: 48'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 115, in search_products
    marking_vouchers_data = self._fetch_marking_vouchers(search_query, filters)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 370, in _fetch_marking_vouchers
    logger.info('\U0001f50d [MARKING-VOUCHERS] Including vouchers due to category filter')
Message: '\U0001f50d [MARKING-VOUCHERS] Including vouchers due to category filter'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 115, in search_products
    marking_vouchers_data = self._fetch_marking_vouchers(search_query, filters)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 447, in _fetch_marking_vouchers
    logger.info(f'\U0001f50d [MARKING-VOUCHERS] Fetched {len(vouchers_data)} marking vouchers')
Message: '\U0001f50d [MARKING-VOUCHERS] Fetched 1 marking vouchers'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 121, in search_products
    logger.info(f'\U0001f50d [MARKING-VOUCHERS] Added {len(marking_vouchers_data)} vouchers to results')
Message: '\U0001f50d [MARKING-VOUCHERS] Added 1 vouchers to results'
Arguments: ()
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING SLOW SEARCH: 1.028s - Filters: {'subjects': [], 'categories': ['Marking'], 'product_types': [], 'products': [], 'modes_of_delivery': []}
WARNING Unified Product Search - Duration: 1.028s, Queries: 92
[05/Nov/2025 10:38:39] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 18671
[05/Nov/2025 10:38:46] "OPTIONS /api/markings/papers/deadlines/?essp_id=2741 HTTP/1.1" 200 0
[05/Nov/2025 10:38:46] "OPTIONS /api/markings/papers/deadlines/?essp_id=2763 HTTP/1.1" 200 0
[05/Nov/2025 10:38:46] "OPTIONS /api/markings/papers/deadlines/?essp_id=2742 HTTP/1.1" 200 0
[05/Nov/2025 10:38:46] "OPTIONS /api/markings/papers/deadlines/?essp_id=2784 HTTP/1.1" 200 0
[05/Nov/2025 10:38:46] "OPTIONS /api/markings/papers/deadlines/?essp_id=2785 HTTP/1.1" 200 0
[05/Nov/2025 10:38:46] "OPTIONS /api/markings/papers/deadlines/?essp_id=2765 HTTP/1.1" 200 0
[05/Nov/2025 10:38:46] "OPTIONS /api/markings/papers/deadlines/?essp_id=2744 HTTP/1.1" 200 0
[05/Nov/2025 10:38:46] "OPTIONS /api/markings/papers/deadlines/?essp_id=2764 HTTP/1.1" 200 0
[05/Nov/2025 10:38:46] "OPTIONS /api/markings/papers/deadlines/?essp_id=2766 HTTP/1.1" 200 0
[05/Nov/2025 10:38:46] "OPTIONS /api/markings/papers/deadlines/?essp_id=2743 HTTP/1.1" 200 0
[05/Nov/2025 10:38:46] "OPTIONS /api/markings/papers/deadlines/?essp_id=2745 HTTP/1.1" 200 0
[05/Nov/2025 10:38:46] "OPTIONS /api/markings/papers/deadlines/?essp_id=2746 HTTP/1.1" 200 0
[05/Nov/2025 10:38:46] "OPTIONS /api/markings/papers/deadlines/?essp_id=2767 HTTP/1.1" 200 0
[05/Nov/2025 10:38:46] "OPTIONS /api/markings/papers/deadlines/?essp_id=2768 HTTP/1.1" 200 0
[05/Nov/2025 10:38:46] "OPTIONS /api/markings/papers/deadlines/?essp_id=2747 HTTP/1.1" 200 0
[05/Nov/2025 10:38:46] "OPTIONS /api/markings/papers/deadlines/?essp_id=2786 HTTP/1.1" 200 0
[05/Nov/2025 10:38:46] "GET /api/markings/papers/deadlines/?essp_id=2763 HTTP/1.1" 200 425
[05/Nov/2025 10:38:46] "OPTIONS /api/markings/papers/deadlines/?essp_id=2769 HTTP/1.1" 200 0
[05/Nov/2025 10:38:46] "OPTIONS /api/markings/papers/deadlines/?essp_id=2748 HTTP/1.1" 200 0
[05/Nov/2025 10:38:46] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
[05/Nov/2025 10:38:46] "GET /api/markings/papers/deadlines/?essp_id=2741 HTTP/1.1" 200 319
[05/Nov/2025 10:38:46] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 10:38:46] "OPTIONS /api/markings/papers/deadlines/?essp_id=2741 HTTP/1.1" 200 0
[05/Nov/2025 10:38:46] "OPTIONS /api/markings/papers/deadlines/?essp_id=2763 HTTP/1.1" 200 0
[05/Nov/2025 10:38:46] "GET /api/markings/papers/deadlines/?essp_id=2742 HTTP/1.1" 200 319
[05/Nov/2025 10:38:46] "GET /api/markings/papers/deadlines/?essp_id=2784 HTTP/1.1" 200 213
[05/Nov/2025 10:38:47] "OPTIONS /api/markings/papers/deadlines/?essp_id=2764 HTTP/1.1" 200 0
[05/Nov/2025 10:38:47] "GET /api/markings/papers/deadlines/?essp_id=2785 HTTP/1.1" 200 213
[05/Nov/2025 10:38:47] "OPTIONS /api/markings/papers/deadlines/?essp_id=2742 HTTP/1.1" 200 0
[05/Nov/2025 10:38:47] "OPTIONS /api/markings/papers/deadlines/?essp_id=2784 HTTP/1.1" 200 0
[05/Nov/2025 10:38:47] "OPTIONS /api/markings/papers/deadlines/?essp_id=2743 HTTP/1.1" 200 0
[05/Nov/2025 10:38:47] "OPTIONS /api/markings/papers/deadlines/?essp_id=2785 HTTP/1.1" 200 0
[05/Nov/2025 10:38:47] "OPTIONS /api/markings/papers/deadlines/?essp_id=2765 HTTP/1.1" 200 0
[05/Nov/2025 10:38:47] "GET /api/markings/papers/deadlines/?essp_id=2765 HTTP/1.1" 200 425
[05/Nov/2025 10:38:47] "GET /api/markings/papers/deadlines/?essp_id=2743 HTTP/1.1" 200 319
[05/Nov/2025 10:38:47] "OPTIONS /api/markings/papers/deadlines/?essp_id=2744 HTTP/1.1" 200 0
[05/Nov/2025 10:38:47] "GET /api/markings/papers/deadlines/?essp_id=2764 HTTP/1.1" 200 531
[05/Nov/2025 10:38:47] "OPTIONS /api/markings/papers/deadlines/?essp_id=2766 HTTP/1.1" 200 0
[05/Nov/2025 10:38:47] "OPTIONS /api/markings/papers/deadlines/?essp_id=2745 HTTP/1.1" 200 0
[05/Nov/2025 10:38:47] "OPTIONS /api/markings/papers/deadlines/?essp_id=2767 HTTP/1.1" 200 0
[05/Nov/2025 10:38:47] "OPTIONS /api/markings/papers/deadlines/?essp_id=2746 HTTP/1.1" 200 0
[05/Nov/2025 10:38:47] "OPTIONS /api/markings/papers/deadlines/?essp_id=2768 HTTP/1.1" 200 0
[05/Nov/2025 10:38:47] "GET /api/markings/papers/deadlines/?essp_id=2744 HTTP/1.1" 200 319
[05/Nov/2025 10:38:47] "OPTIONS /api/markings/papers/deadlines/?essp_id=2747 HTTP/1.1" 200 0
[05/Nov/2025 10:38:47] "OPTIONS /api/markings/papers/deadlines/?essp_id=2786 HTTP/1.1" 200 0
[05/Nov/2025 10:38:47] "GET /api/markings/papers/deadlines/?essp_id=2766 HTTP/1.1" 200 637
[05/Nov/2025 10:38:47] "GET /api/markings/papers/deadlines/?essp_id=2745 HTTP/1.1" 200 319
[05/Nov/2025 10:38:47] "OPTIONS /api/markings/papers/deadlines/?essp_id=2769 HTTP/1.1" 200 0
[05/Nov/2025 10:38:47] "OPTIONS /api/markings/papers/deadlines/?essp_id=2748 HTTP/1.1" 200 0
[05/Nov/2025 10:38:47] "GET /api/markings/papers/deadlines/?essp_id=2767 HTTP/1.1" 200 319
[05/Nov/2025 10:38:47] "GET /api/markings/papers/deadlines/?essp_id=2746 HTTP/1.1" 200 319
[05/Nov/2025 10:38:47] "GET /api/markings/papers/deadlines/?essp_id=2768 HTTP/1.1" 200 319
[05/Nov/2025 10:38:48] "GET /api/markings/papers/deadlines/?essp_id=2747 HTTP/1.1" 200 319
[05/Nov/2025 10:38:48] "GET /api/markings/papers/deadlines/?essp_id=2786 HTTP/1.1" 200 213
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762339128_9706e150
[05/Nov/2025 10:38:48] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1436
[05/Nov/2025 10:38:48] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 7071
[05/Nov/2025 10:38:48] "GET /api/markings/papers/deadlines/?essp_id=2769 HTTP/1.1" 200 425
[05/Nov/2025 10:38:48] "GET /api/markings/papers/deadlines/?essp_id=2741 HTTP/1.1" 200 319
[05/Nov/2025 10:38:48] "GET /api/markings/papers/deadlines/?essp_id=2748 HTTP/1.1" 200 319
[05/Nov/2025 10:38:48] "GET /api/markings/papers/deadlines/?essp_id=2763 HTTP/1.1" 200 425
[05/Nov/2025 10:38:48] "GET /api/markings/papers/deadlines/?essp_id=2764 HTTP/1.1" 200 531
[05/Nov/2025 10:38:48] "GET /api/markings/papers/deadlines/?essp_id=2743 HTTP/1.1" 200 319
[05/Nov/2025 10:38:48] "GET /api/markings/papers/deadlines/?essp_id=2742 HTTP/1.1" 200 319
[05/Nov/2025 10:38:49] "GET /api/markings/papers/deadlines/?essp_id=2784 HTTP/1.1" 200 213
[05/Nov/2025 10:38:49] "GET /api/markings/papers/deadlines/?essp_id=2785 HTTP/1.1" 200 213
[05/Nov/2025 10:38:49] "GET /api/markings/papers/deadlines/?essp_id=2765 HTTP/1.1" 200 425
[05/Nov/2025 10:38:49] "GET /api/markings/papers/deadlines/?essp_id=2766 HTTP/1.1" 200 637
[05/Nov/2025 10:38:49] "GET /api/markings/papers/deadlines/?essp_id=2744 HTTP/1.1" 200 319
[05/Nov/2025 10:38:49] "GET /api/markings/papers/deadlines/?essp_id=2767 HTTP/1.1" 200 319
[05/Nov/2025 10:38:49] "GET /api/markings/papers/deadlines/?essp_id=2745 HTTP/1.1" 200 319
[05/Nov/2025 10:38:49] "GET /api/markings/papers/deadlines/?essp_id=2746 HTTP/1.1" 200 319
[05/Nov/2025 10:38:49] "GET /api/markings/papers/deadlines/?essp_id=2768 HTTP/1.1" 200 319
[05/Nov/2025 10:38:49] "GET /api/markings/papers/deadlines/?essp_id=2786 HTTP/1.1" 200 213
[05/Nov/2025 10:38:49] "GET /api/markings/papers/deadlines/?essp_id=2747 HTTP/1.1" 200 319
[05/Nov/2025 10:38:50] "GET /api/markings/papers/deadlines/?essp_id=2769 HTTP/1.1" 200 425
[05/Nov/2025 10:38:50] "GET /api/markings/papers/deadlines/?essp_id=2748 HTTP/1.1" 200 319
C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py changed, reloading.
INFO C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py changed, reloading.
Watching for file changes with StatReloader
DJANGO_ENV django_Admin3.settings.development
DJANGO_ENV development
DJANGO_SETTINGS_MODULE django_Admin3.settings.development
DJANGO_ENV FILE C:\Code\Admin3\backend\django_Admin3\.env.development
Loading environment from: C:\Code\Admin3\backend\django_Admin3\.env.development
INFO Watching for file changes with StatReloader
Performing system checks...

System check identified no issues (0 silenced).
C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py changed, reloading.
November 05, 2025 - 10:49:55
Django version 5.2.7, using settings 'django_Admin3.settings.development'
Starting development server at http://127.0.0.1:8888/
Quit the server with CTRL-BREAK.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
INFO C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py changed, reloading.
Watching for file changes with StatReloader
DJANGO_ENV django_Admin3.settings.development
DJANGO_ENV development
DJANGO_SETTINGS_MODULE django_Admin3.settings.development
DJANGO_ENV FILE C:\Code\Admin3\backend\django_Admin3\.env.development
Loading environment from: C:\Code\Admin3\backend\django_Admin3\.env.development
INFO Watching for file changes with StatReloader
Performing system checks...

System check identified no issues (0 silenced).
C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py changed, reloading.
November 05, 2025 - 10:50:42
Django version 5.2.7, using settings 'django_Admin3.settings.development'
Starting development server at http://127.0.0.1:8888/
Quit the server with CTRL-BREAK.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
INFO C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py changed, reloading.
Watching for file changes with StatReloader
DJANGO_ENV django_Admin3.settings.development
DJANGO_ENV development
DJANGO_SETTINGS_MODULE django_Admin3.settings.development
DJANGO_ENV FILE C:\Code\Admin3\backend\django_Admin3\.env.development
Loading environment from: C:\Code\Admin3\backend\django_Admin3\.env.development
INFO Watching for file changes with StatReloader
Performing system checks...

System check identified no issues (0 silenced).
C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py changed, reloading.
November 05, 2025 - 10:51:03
Django version 5.2.7, using settings 'django_Admin3.settings.development'
Starting development server at http://127.0.0.1:8888/
Quit the server with CTRL-BREAK.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
INFO C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py changed, reloading.
Watching for file changes with StatReloader
DJANGO_ENV django_Admin3.settings.development
DJANGO_ENV development
DJANGO_SETTINGS_MODULE django_Admin3.settings.development
DJANGO_ENV FILE C:\Code\Admin3\backend\django_Admin3\.env.development
Loading environment from: C:\Code\Admin3\backend\django_Admin3\.env.development
INFO Watching for file changes with StatReloader
Performing system checks...

System check identified no issues (0 silenced).
C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py changed, reloading.
November 05, 2025 - 10:51:48
Django version 5.2.7, using settings 'django_Admin3.settings.development'
Starting development server at http://127.0.0.1:8888/
Quit the server with CTRL-BREAK.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
INFO C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py changed, reloading.
Watching for file changes with StatReloader
DJANGO_ENV django_Admin3.settings.development
DJANGO_ENV development
DJANGO_SETTINGS_MODULE django_Admin3.settings.development
DJANGO_ENV FILE C:\Code\Admin3\backend\django_Admin3\.env.development
Loading environment from: C:\Code\Admin3\backend\django_Admin3\.env.development
INFO Watching for file changes with StatReloader
Performing system checks...

System check identified no issues (0 silenced).
C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py changed, reloading.
November 05, 2025 - 10:52:19
Django version 5.2.7, using settings 'django_Admin3.settings.development'
Starting development server at http://127.0.0.1:8888/
Quit the server with CTRL-BREAK.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
INFO C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py changed, reloading.
Watching for file changes with StatReloader
DJANGO_ENV django_Admin3.settings.development
DJANGO_ENV development
DJANGO_SETTINGS_MODULE django_Admin3.settings.development
DJANGO_ENV FILE C:\Code\Admin3\backend\django_Admin3\.env.development
Loading environment from: C:\Code\Admin3\backend\django_Admin3\.env.development
INFO Watching for file changes with StatReloader
Performing system checks...

System check identified no issues (0 silenced).
C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py changed, reloading.
November 05, 2025 - 10:52:44
Django version 5.2.7, using settings 'django_Admin3.settings.development'
Starting development server at http://127.0.0.1:8888/
Quit the server with CTRL-BREAK.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
INFO C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py changed, reloading.
Watching for file changes with StatReloader
DJANGO_ENV django_Admin3.settings.development
DJANGO_ENV development
DJANGO_SETTINGS_MODULE django_Admin3.settings.development
DJANGO_ENV FILE C:\Code\Admin3\backend\django_Admin3\.env.development
Loading environment from: C:\Code\Admin3\backend\django_Admin3\.env.development
INFO Watching for file changes with StatReloader
Performing system checks...

System check identified no issues (0 silenced).
C:\Code\Admin3\backend\django_Admin3\utils\urls.py changed, reloading.
November 05, 2025 - 10:53:10
Django version 5.2.7, using settings 'django_Admin3.settings.development'
Starting development server at http://127.0.0.1:8888/
Quit the server with CTRL-BREAK.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
INFO C:\Code\Admin3\backend\django_Admin3\utils\urls.py changed, reloading.
Watching for file changes with StatReloader
DJANGO_ENV django_Admin3.settings.development
DJANGO_ENV development
DJANGO_SETTINGS_MODULE django_Admin3.settings.development
DJANGO_ENV FILE C:\Code\Admin3\backend\django_Admin3\.env.development
Loading environment from: C:\Code\Admin3\backend\django_Admin3\.env.development
INFO Watching for file changes with StatReloader
Performing system checks...

System check identified no issues (0 silenced).
C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py changed, reloading.
November 05, 2025 - 10:53:55
Django version 5.2.7, using settings 'django_Admin3.settings.development'
Starting development server at http://127.0.0.1:8888/
Quit the server with CTRL-BREAK.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
INFO C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py changed, reloading.
Watching for file changes with StatReloader
DJANGO_ENV django_Admin3.settings.development
DJANGO_ENV development
DJANGO_SETTINGS_MODULE django_Admin3.settings.development
DJANGO_ENV FILE C:\Code\Admin3\backend\django_Admin3\.env.development
Loading environment from: C:\Code\Admin3\backend\django_Admin3\.env.development
INFO Watching for file changes with StatReloader
Performing system checks...

System check identified no issues (0 silenced).
[05/Nov/2025 11:12:17] "OPTIONS /api/subjects/ HTTP/1.1" 200 0
[05/Nov/2025 11:12:17] "OPTIONS /api/cart HTTP/1.1" 200 0
[05/Nov/2025 11:12:17] "OPTIONS /api/products/navbar-product-groups/ HTTP/1.1" 200 0
[05/Nov/2025 11:12:17] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 11:12:17] "OPTIONS /api/subjects/ HTTP/1.1" 200 0
[05/Nov/2025 11:12:17] "OPTIONS /api/products/navbar-product-groups/ HTTP/1.1" 200 0
[05/Nov/2025 11:12:17] "OPTIONS /api/products/distance-learning-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 11:12:17] "OPTIONS /api/products/distance-learning-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 11:12:17] "OPTIONS /api/products/tutorial-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 11:12:17] "OPTIONS /api/products/tutorial-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 11:12:17] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 11:12:17] "OPTIONS /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 0
[05/Nov/2025 11:12:17] "OPTIONS /api/cart HTTP/1.1" 200 0
[05/Nov/2025 11:12:17] "OPTIONS /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 0
[05/Nov/2025 11:12:17] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
November 05, 2025 - 11:11:09
Django version 5.2.7, using settings 'django_Admin3.settings.development'
Starting development server at http://127.0.0.1:8888/
Quit the server with CTRL-BREAK.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
INFO [SEARCH] Received filters: {'subjects': [], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
DEBUG Cache miss for rules:product_list_mount
DEBUG Cached 1 rules for product_list_mount
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762341138_b7f97dd3
[05/Nov/2025 11:12:18] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1422
[05/Nov/2025 11:12:18] "GET /api/subjects/ HTTP/1.1" 200 2286
[05/Nov/2025 11:12:18] "GET /api/cart HTTP/1.1" 301 0
[05/Nov/2025 11:12:18] "GET /api/products/navbar-product-groups/ HTTP/1.1" 200 3064
[05/Nov/2025 11:12:18] "OPTIONS /api/cart/ HTTP/1.1" 200 0
[05/Nov/2025 11:12:18] "GET /api/products/distance-learning-dropdown/ HTTP/1.1" 200 1819
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762341138_dab15ac2
[05/Nov/2025 11:12:18] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1419
[05/Nov/2025 11:12:19] "GET /api/products/tutorial-dropdown/ HTTP/1.1" 200 1748
[05/Nov/2025 11:12:19] "GET /api/subjects/ HTTP/1.1" 200 2286
[05/Nov/2025 11:12:19] "GET /api/products/distance-learning-dropdown/ HTTP/1.1" 200 1819
[05/Nov/2025 11:12:19] "GET /api/products/navbar-product-groups/ HTTP/1.1" 200 3064
[05/Nov/2025 11:12:19] "GET /api/products/tutorial-dropdown/ HTTP/1.1" 200 1748
[05/Nov/2025 11:12:20] "GET /api/cart HTTP/1.1" 301 0
WARNING get_vat_calculations() is deprecated. Use get_vat_totals() instead. This method will be removed in a future version.
[05/Nov/2025 11:12:20] "OPTIONS /api/cart/ HTTP/1.1" 200 0
[05/Nov/2025 11:12:20] "GET /api/cart/ HTTP/1.1" 200 16043
WARNING get_vat_calculations() is deprecated. Use get_vat_totals() instead. This method will be removed in a future version.
[05/Nov/2025 11:12:20] "GET /api/cart/ HTTP/1.1" 200 16043
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 158, in search_products
    logger.info(f'\U0001f50d [BUNDLES] Included {len(bundles_data)} bundles, {len(products_data) - len(bundles_data)} products')
Message: '\U0001f50d [BUNDLES] Included 1 bundles, 19 products'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 172, in search_products
    filter_counts = self._generate_optimized_filter_counts(filters, base_queryset, base_bundles_queryset)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 620, in _generate_optimized_filter_counts
    logger.info(f'\U0001f50d [FILTER-COUNTS] Added {bundle_count} bundles to Bundle category count')
Message: '\U0001f50d [FILTER-COUNTS] Added 1 bundles to Bundle category count'
Arguments: ()
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING SLOW SEARCH: 10.894s - Filters: {'subjects': [], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
WARNING Unified Product Search - Duration: 10.899s, Queries: 984
[05/Nov/2025 11:12:29] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 23215
[05/Nov/2025 11:12:31] "GET /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 54018
[05/Nov/2025 11:12:31] "GET /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 54018
[05/Nov/2025 11:12:33] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
[05/Nov/2025 11:12:33] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
[05/Nov/2025 11:12:34] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 655
DEBUG Stored execution record: exec_1762341154_9c7a52f5
[05/Nov/2025 11:12:34] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1422
[05/Nov/2025 11:12:40] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
INFO [SEARCH] Received filters: {'subjects': ['CB1'], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 107, in search_products
    filtered_queryset = self._apply_optimized_filters(filtered_queryset, filters)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 331, in _apply_optimized_filters
    logger.info(f'\U0001f50d [SEARCH-DEBUG] Filtered queryset count: {queryset.count()}')
Message: '\U0001f50d [SEARCH-DEBUG] Filtered queryset count: 18'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 158, in search_products
    logger.info(f'\U0001f50d [BUNDLES] Included {len(bundles_data)} bundles, {len(products_data) - len(bundles_data)} products')
Message: '\U0001f50d [BUNDLES] Included 1 bundles, 18 products'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 172, in search_products
    filter_counts = self._generate_optimized_filter_counts(filters, base_queryset, base_bundles_queryset)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 620, in _generate_optimized_filter_counts
    logger.info(f'\U0001f50d [FILTER-COUNTS] Added {bundle_count} bundles to Bundle category count')
Message: '\U0001f50d [FILTER-COUNTS] Added 1 bundles to Bundle category count'
Arguments: ()
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING SLOW SEARCH: 0.880s - Filters: {'subjects': ['CB1'], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
WARNING Unified Product Search - Duration: 0.880s, Queries: 100
[05/Nov/2025 11:12:41] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 22554
[05/Nov/2025 11:12:43] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762341163_92b17f07
[05/Nov/2025 11:12:43] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1422
[05/Nov/2025 11:12:53] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
INFO [SEARCH] Received filters: {'subjects': ['CP1'], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 107, in search_products
    filtered_queryset = self._apply_optimized_filters(filtered_queryset, filters)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 331, in _apply_optimized_filters
    logger.info(f'\U0001f50d [SEARCH-DEBUG] Filtered queryset count: {queryset.count()}')
Message: '\U0001f50d [SEARCH-DEBUG] Filtered queryset count: 18'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 158, in search_products
    logger.info(f'\U0001f50d [BUNDLES] Included {len(bundles_data)} bundles, {len(products_data) - len(bundles_data)} products')
Message: '\U0001f50d [BUNDLES] Included 0 bundles, 18 products'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 172, in search_products
    filter_counts = self._generate_optimized_filter_counts(filters, base_queryset, base_bundles_queryset)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 620, in _generate_optimized_filter_counts
    logger.info(f'\U0001f50d [FILTER-COUNTS] Added {bundle_count} bundles to Bundle category count')
Message: '\U0001f50d [FILTER-COUNTS] Added 1 bundles to Bundle category count'
Arguments: ()
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING Unified Product Search - Duration: 0.318s, Queries: 73
[05/Nov/2025 11:12:53] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 18257
[05/Nov/2025 11:12:54] "OPTIONS /api/markings/papers/deadlines/?essp_id=2766 HTTP/1.1" 200 0
[05/Nov/2025 11:12:54] "OPTIONS /api/markings/papers/deadlines/?essp_id=2766 HTTP/1.1" 200 0
[05/Nov/2025 11:12:54] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 11:12:54] "OPTIONS /api/markings/papers/deadlines/?essp_id=2744 HTTP/1.1" 200 0
[05/Nov/2025 11:12:54] "OPTIONS /api/markings/papers/deadlines/?essp_id=2744 HTTP/1.1" 200 0
[05/Nov/2025 11:12:54] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762341174_5ebfaa5d
[05/Nov/2025 11:12:54] "GET /api/markings/papers/deadlines/?essp_id=2766 HTTP/1.1" 200 637
[05/Nov/2025 11:12:54] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1422
[05/Nov/2025 11:12:54] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 973
[05/Nov/2025 11:12:54] "GET /api/markings/papers/deadlines/?essp_id=2766 HTTP/1.1" 200 637
[05/Nov/2025 11:12:54] "GET /api/markings/papers/deadlines/?essp_id=2744 HTTP/1.1" 200 319
[05/Nov/2025 11:12:54] "GET /api/markings/papers/deadlines/?essp_id=2744 HTTP/1.1" 200 319
[05/Nov/2025 11:13:08] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
INFO [SEARCH] Received filters: {'subjects': ['CP1', 'CM2'], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 107, in search_products
    filtered_queryset = self._apply_optimized_filters(filtered_queryset, filters)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 331, in _apply_optimized_filters
    logger.info(f'\U0001f50d [SEARCH-DEBUG] Filtered queryset count: {queryset.count()}')
Message: '\U0001f50d [SEARCH-DEBUG] Filtered queryset count: 40'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 158, in search_products
    logger.info(f'\U0001f50d [BUNDLES] Included {len(bundles_data)} bundles, {len(products_data) - len(bundles_data)} products')
Message: '\U0001f50d [BUNDLES] Included 0 bundles, 20 products'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 172, in search_products
    filter_counts = self._generate_optimized_filter_counts(filters, base_queryset, base_bundles_queryset)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 620, in _generate_optimized_filter_counts
    logger.info(f'\U0001f50d [FILTER-COUNTS] Added {bundle_count} bundles to Bundle category count')
Message: '\U0001f50d [FILTER-COUNTS] Added 1 bundles to Bundle category count'
Arguments: ()
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING SLOW SEARCH: 0.506s - Filters: {'subjects': ['CP1', 'CM2'], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
WARNING Unified Product Search - Duration: 0.507s, Queries: 131
[05/Nov/2025 11:13:09] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 24137
[05/Nov/2025 11:13:10] "OPTIONS /api/markings/papers/deadlines/?essp_id=2785 HTTP/1.1" 200 0
[05/Nov/2025 11:13:10] "OPTIONS /api/markings/papers/deadlines/?essp_id=2743 HTTP/1.1" 200 0
[05/Nov/2025 11:13:10] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
[05/Nov/2025 11:13:10] "OPTIONS /api/markings/papers/deadlines/?essp_id=2785 HTTP/1.1" 200 0
[05/Nov/2025 11:13:10] "OPTIONS /api/markings/papers/deadlines/?essp_id=2743 HTTP/1.1" 200 0
[05/Nov/2025 11:13:10] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 11:13:10] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 549
[05/Nov/2025 11:13:11] "GET /api/markings/papers/deadlines/?essp_id=2743 HTTP/1.1" 200 319
[05/Nov/2025 11:13:11] "GET /api/markings/papers/deadlines/?essp_id=2743 HTTP/1.1" 200 319
[05/Nov/2025 11:13:11] "GET /api/markings/papers/deadlines/?essp_id=2785 HTTP/1.1" 200 213
[05/Nov/2025 11:13:11] "GET /api/markings/papers/deadlines/?essp_id=2785 HTTP/1.1" 200 213
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762341191_df470e6e
[05/Nov/2025 11:13:11] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1423
[05/Nov/2025 11:13:18] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
INFO [SEARCH] Received filters: {'subjects': ['CP1', 'CM2'], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 107, in search_products
    filtered_queryset = self._apply_optimized_filters(filtered_queryset, filters)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 331, in _apply_optimized_filters
    logger.info(f'\U0001f50d [SEARCH-DEBUG] Filtered queryset count: {queryset.count()}')
Message: '\U0001f50d [SEARCH-DEBUG] Filtered queryset count: 40'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 158, in search_products
    logger.info(f'\U0001f50d [BUNDLES] Included {len(bundles_data)} bundles, {len(products_data) - len(bundles_data)} products')
Message: '\U0001f50d [BUNDLES] Included 0 bundles, 20 products'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 172, in search_products
    filter_counts = self._generate_optimized_filter_counts(filters, base_queryset, base_bundles_queryset)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 620, in _generate_optimized_filter_counts
    logger.info(f'\U0001f50d [FILTER-COUNTS] Added {bundle_count} bundles to Bundle category count')
Message: '\U0001f50d [FILTER-COUNTS] Added 1 bundles to Bundle category count'
Arguments: ()
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING SLOW SEARCH: 0.535s - Filters: {'subjects': ['CP1', 'CM2'], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
WARNING Unified Product Search - Duration: 0.536s, Queries: 131
[05/Nov/2025 11:13:18] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 19700
[05/Nov/2025 11:13:20] "OPTIONS /api/markings/papers/deadlines/?essp_id=2765 HTTP/1.1" 200 0
[05/Nov/2025 11:13:20] "OPTIONS /api/markings/papers/deadlines/?essp_id=2744 HTTP/1.1" 200 0
[05/Nov/2025 11:13:20] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
[05/Nov/2025 11:13:20] "OPTIONS /api/markings/papers/deadlines/?essp_id=2765 HTTP/1.1" 200 0
[05/Nov/2025 11:13:20] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 11:13:20] "OPTIONS /api/markings/papers/deadlines/?essp_id=2766 HTTP/1.1" 200 0
[05/Nov/2025 11:13:20] "OPTIONS /api/markings/papers/deadlines/?essp_id=2744 HTTP/1.1" 200 0
[05/Nov/2025 11:13:20] "OPTIONS /api/markings/papers/deadlines/?essp_id=2766 HTTP/1.1" 200 0
[05/Nov/2025 11:13:20] "GET /api/markings/papers/deadlines/?essp_id=2744 HTTP/1.1" 200 319
[05/Nov/2025 11:13:20] "GET /api/markings/papers/deadlines/?essp_id=2765 HTTP/1.1" 200 425
[05/Nov/2025 11:13:20] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 1406
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762341200_f2d6a42a
[05/Nov/2025 11:13:20] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1438
[05/Nov/2025 11:13:20] "GET /api/markings/papers/deadlines/?essp_id=2766 HTTP/1.1" 200 637
[05/Nov/2025 11:13:20] "GET /api/markings/papers/deadlines/?essp_id=2765 HTTP/1.1" 200 425
[05/Nov/2025 11:13:20] "GET /api/markings/papers/deadlines/?essp_id=2744 HTTP/1.1" 200 319
[05/Nov/2025 11:13:20] "GET /api/markings/papers/deadlines/?essp_id=2766 HTTP/1.1" 200 637
[05/Nov/2025 11:13:36] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
INFO [SEARCH] Received filters: {'subjects': ['CB1'], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 107, in search_products
    filtered_queryset = self._apply_optimized_filters(filtered_queryset, filters)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 331, in _apply_optimized_filters
    logger.info(f'\U0001f50d [SEARCH-DEBUG] Filtered queryset count: {queryset.count()}')
Message: '\U0001f50d [SEARCH-DEBUG] Filtered queryset count: 18'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 158, in search_products
    logger.info(f'\U0001f50d [BUNDLES] Included {len(bundles_data)} bundles, {len(products_data) - len(bundles_data)} products')
Message: '\U0001f50d [BUNDLES] Included 1 bundles, 18 products'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 172, in search_products
    filter_counts = self._generate_optimized_filter_counts(filters, base_queryset, base_bundles_queryset)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 620, in _generate_optimized_filter_counts
    logger.info(f'\U0001f50d [FILTER-COUNTS] Added {bundle_count} bundles to Bundle category count')
Message: '\U0001f50d [FILTER-COUNTS] Added 1 bundles to Bundle category count'
Arguments: ()
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING Unified Product Search - Duration: 0.341s, Queries: 100
[05/Nov/2025 11:13:36] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 22555
[05/Nov/2025 11:13:39] "OPTIONS /api/markings/papers/deadlines/?essp_id=2762 HTTP/1.1" 200 0
[05/Nov/2025 11:13:39] "OPTIONS /api/markings/papers/deadlines/?essp_id=2740 HTTP/1.1" 200 0
[05/Nov/2025 11:13:39] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
[05/Nov/2025 11:13:39] "OPTIONS /api/markings/papers/deadlines/?essp_id=2740 HTTP/1.1" 200 0
[05/Nov/2025 11:13:39] "OPTIONS /api/markings/papers/deadlines/?essp_id=2762 HTTP/1.1" 200 0
[05/Nov/2025 11:13:39] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762341219_b1ae5734
[05/Nov/2025 11:13:39] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1435
[05/Nov/2025 11:13:39] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 655
[05/Nov/2025 11:13:39] "GET /api/markings/papers/deadlines/?essp_id=2740 HTTP/1.1" 200 319
[05/Nov/2025 11:13:39] "GET /api/markings/papers/deadlines/?essp_id=2740 HTTP/1.1" 200 319
[05/Nov/2025 11:13:39] "GET /api/markings/papers/deadlines/?essp_id=2762 HTTP/1.1" 200 319
[05/Nov/2025 11:13:39] "GET /api/markings/papers/deadlines/?essp_id=2762 HTTP/1.1" 200 319
[05/Nov/2025 11:13:41] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
INFO [SEARCH] Received filters: {'subjects': ['CB2'], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 107, in search_products
    filtered_queryset = self._apply_optimized_filters(filtered_queryset, filters)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 331, in _apply_optimized_filters
    logger.info(f'\U0001f50d [SEARCH-DEBUG] Filtered queryset count: {queryset.count()}')
Message: '\U0001f50d [SEARCH-DEBUG] Filtered queryset count: 19'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 158, in search_products
    logger.info(f'\U0001f50d [BUNDLES] Included {len(bundles_data)} bundles, {len(products_data) - len(bundles_data)} products')
Message: '\U0001f50d [BUNDLES] Included 0 bundles, 19 products'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 172, in search_products
    filter_counts = self._generate_optimized_filter_counts(filters, base_queryset, base_bundles_queryset)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 620, in _generate_optimized_filter_counts
    logger.info(f'\U0001f50d [FILTER-COUNTS] Added {bundle_count} bundles to Bundle category count')
Message: '\U0001f50d [FILTER-COUNTS] Added 1 bundles to Bundle category count'
Arguments: ()
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING Unified Product Search - Duration: 0.366s, Queries: 81
[05/Nov/2025 11:13:41] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 20758
[05/Nov/2025 11:13:43] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
[05/Nov/2025 11:13:43] "OPTIONS /api/markings/papers/deadlines/?essp_id=2741 HTTP/1.1" 200 0
[05/Nov/2025 11:13:43] "OPTIONS /api/markings/papers/deadlines/?essp_id=2763 HTTP/1.1" 200 0
[05/Nov/2025 11:13:43] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 11:13:43] "OPTIONS /api/markings/papers/deadlines/?essp_id=2741 HTTP/1.1" 200 0
[05/Nov/2025 11:13:43] "OPTIONS /api/markings/papers/deadlines/?essp_id=2763 HTTP/1.1" 200 0
[05/Nov/2025 11:13:43] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 761
[05/Nov/2025 11:13:43] "GET /api/markings/papers/deadlines/?essp_id=2741 HTTP/1.1" 200 319
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762341223_d54b2b1b
[05/Nov/2025 11:13:43] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1423
[05/Nov/2025 11:13:43] "GET /api/markings/papers/deadlines/?essp_id=2763 HTTP/1.1" 200 425
[05/Nov/2025 11:13:43] "GET /api/markings/papers/deadlines/?essp_id=2741 HTTP/1.1" 200 319
[05/Nov/2025 11:13:43] "GET /api/markings/papers/deadlines/?essp_id=2763 HTTP/1.1" 200 425
[05/Nov/2025 11:13:49] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
INFO [SEARCH] Received filters: {'subjects': ['CM1'], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 107, in search_products
    filtered_queryset = self._apply_optimized_filters(filtered_queryset, filters)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 331, in _apply_optimized_filters
    logger.info(f'\U0001f50d [SEARCH-DEBUG] Filtered queryset count: {queryset.count()}')
Message: '\U0001f50d [SEARCH-DEBUG] Filtered queryset count: 21'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 158, in search_products
    logger.info(f'\U0001f50d [BUNDLES] Included {len(bundles_data)} bundles, {len(products_data) - len(bundles_data)} products')
Message: '\U0001f50d [BUNDLES] Included 0 bundles, 20 products'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 172, in search_products
    filter_counts = self._generate_optimized_filter_counts(filters, base_queryset, base_bundles_queryset)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 620, in _generate_optimized_filter_counts
    logger.info(f'\U0001f50d [FILTER-COUNTS] Added {bundle_count} bundles to Bundle category count')
Message: '\U0001f50d [FILTER-COUNTS] Added 1 bundles to Bundle category count'
Arguments: ()
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING Unified Product Search - Duration: 0.325s, Queries: 85
[05/Nov/2025 11:13:49] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 22203
[05/Nov/2025 11:13:50] "OPTIONS /api/markings/papers/deadlines/?essp_id=2784 HTTP/1.1" 200 0
[05/Nov/2025 11:13:50] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 11:13:50] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
[05/Nov/2025 11:13:50] "OPTIONS /api/markings/papers/deadlines/?essp_id=2742 HTTP/1.1" 200 0
[05/Nov/2025 11:13:50] "OPTIONS /api/markings/papers/deadlines/?essp_id=2742 HTTP/1.1" 200 0
[05/Nov/2025 11:13:50] "OPTIONS /api/markings/papers/deadlines/?essp_id=2784 HTTP/1.1" 200 0
[05/Nov/2025 11:13:50] "GET /api/markings/papers/deadlines/?essp_id=2784 HTTP/1.1" 200 213
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762341230_1768ac4f
[05/Nov/2025 11:13:50] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1423
[05/Nov/2025 11:13:50] "GET /api/markings/papers/deadlines/?essp_id=2784 HTTP/1.1" 200 213
[05/Nov/2025 11:13:50] "GET /api/markings/papers/deadlines/?essp_id=2742 HTTP/1.1" 200 319
[05/Nov/2025 11:13:50] "GET /api/markings/papers/deadlines/?essp_id=2742 HTTP/1.1" 200 319
[05/Nov/2025 11:13:50] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 549
[05/Nov/2025 11:13:55] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
INFO [SEARCH] Received filters: {'subjects': ['CM1'], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 107, in search_products
    filtered_queryset = self._apply_optimized_filters(filtered_queryset, filters)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 331, in _apply_optimized_filters
    logger.info(f'\U0001f50d [SEARCH-DEBUG] Filtered queryset count: {queryset.count()}')
Message: '\U0001f50d [SEARCH-DEBUG] Filtered queryset count: 21'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 158, in search_products
    logger.info(f'\U0001f50d [BUNDLES] Included {len(bundles_data)} bundles, {len(products_data) - len(bundles_data)} products')
Message: '\U0001f50d [BUNDLES] Included 0 bundles, 1 products'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 172, in search_products
    filter_counts = self._generate_optimized_filter_counts(filters, base_queryset, base_bundles_queryset)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 620, in _generate_optimized_filter_counts
    logger.info(f'\U0001f50d [FILTER-COUNTS] Added {bundle_count} bundles to Bundle category count')
Message: '\U0001f50d [FILTER-COUNTS] Added 1 bundles to Bundle category count'
Arguments: ()
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING Unified Product Search - Duration: 0.440s, Queries: 85
[05/Nov/2025 11:13:55] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 3020
[05/Nov/2025 11:13:56] "OPTIONS /api/markings/papers/deadlines/?essp_id=2764 HTTP/1.1" 200 0
[05/Nov/2025 11:13:56] "OPTIONS /api/markings/papers/deadlines/?essp_id=2764 HTTP/1.1" 200 0
[05/Nov/2025 11:13:56] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
[05/Nov/2025 11:13:56] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 11:13:56] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 540
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762341236_7d15185f
[05/Nov/2025 11:13:56] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1407
[05/Nov/2025 11:13:56] "GET /api/markings/papers/deadlines/?essp_id=2764 HTTP/1.1" 200 531
[05/Nov/2025 11:13:56] "GET /api/markings/papers/deadlines/?essp_id=2764 HTTP/1.1" 200 531
[05/Nov/2025 11:14:00] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
INFO [SEARCH] Received filters: {'subjects': ['CM1', 'CM2'], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 107, in search_products
    filtered_queryset = self._apply_optimized_filters(filtered_queryset, filters)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 331, in _apply_optimized_filters
    logger.info(f'\U0001f50d [SEARCH-DEBUG] Filtered queryset count: {queryset.count()}')
Message: '\U0001f50d [SEARCH-DEBUG] Filtered queryset count: 43'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 158, in search_products
    logger.info(f'\U0001f50d [BUNDLES] Included {len(bundles_data)} bundles, {len(products_data) - len(bundles_data)} products')
Message: '\U0001f50d [BUNDLES] Included 0 bundles, 20 products'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 172, in search_products
    filter_counts = self._generate_optimized_filter_counts(filters, base_queryset, base_bundles_queryset)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 620, in _generate_optimized_filter_counts
    logger.info(f'\U0001f50d [FILTER-COUNTS] Added {bundle_count} bundles to Bundle category count')
Message: '\U0001f50d [FILTER-COUNTS] Added 1 bundles to Bundle category count'
Arguments: ()
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING Unified Product Search - Duration: 0.454s, Queries: 143
[05/Nov/2025 11:14:01] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 22204
[05/Nov/2025 11:14:03] "OPTIONS /api/markings/papers/deadlines/?essp_id=2742 HTTP/1.1" 200 0
[05/Nov/2025 11:14:03] "OPTIONS /api/markings/papers/deadlines/?essp_id=2784 HTTP/1.1" 200 0
[05/Nov/2025 11:14:03] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 11:14:03] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
[05/Nov/2025 11:14:03] "OPTIONS /api/markings/papers/deadlines/?essp_id=2742 HTTP/1.1" 200 0
[05/Nov/2025 11:14:03] "OPTIONS /api/markings/papers/deadlines/?essp_id=2784 HTTP/1.1" 200 0
[05/Nov/2025 11:14:03] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 549
[05/Nov/2025 11:14:03] "GET /api/markings/papers/deadlines/?essp_id=2742 HTTP/1.1" 200 319
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762341243_9f582f8d
[05/Nov/2025 11:14:03] "GET /api/markings/papers/deadlines/?essp_id=2784 HTTP/1.1" 200 213
[05/Nov/2025 11:14:03] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1421
[05/Nov/2025 11:14:03] "GET /api/markings/papers/deadlines/?essp_id=2784 HTTP/1.1" 200 213
[05/Nov/2025 11:14:03] "GET /api/markings/papers/deadlines/?essp_id=2742 HTTP/1.1" 200 319
[05/Nov/2025 11:14:04] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
INFO [SEARCH] Received filters: {'subjects': ['CM2'], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 107, in search_products
    filtered_queryset = self._apply_optimized_filters(filtered_queryset, filters)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 331, in _apply_optimized_filters
    logger.info(f'\U0001f50d [SEARCH-DEBUG] Filtered queryset count: {queryset.count()}')
Message: '\U0001f50d [SEARCH-DEBUG] Filtered queryset count: 22'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 158, in search_products
    logger.info(f'\U0001f50d [BUNDLES] Included {len(bundles_data)} bundles, {len(products_data) - len(bundles_data)} products')
Message: '\U0001f50d [BUNDLES] Included 0 bundles, 20 products'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 172, in search_products
    filter_counts = self._generate_optimized_filter_counts(filters, base_queryset, base_bundles_queryset)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 620, in _generate_optimized_filter_counts
    logger.info(f'\U0001f50d [FILTER-COUNTS] Added {bundle_count} bundles to Bundle category count')
Message: '\U0001f50d [FILTER-COUNTS] Added 1 bundles to Bundle category count'
Arguments: ()
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING Unified Product Search - Duration: 0.461s, Queries: 93
[05/Nov/2025 11:14:05] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 24138
[05/Nov/2025 11:14:07] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 11:14:07] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
[05/Nov/2025 11:14:07] "OPTIONS /api/markings/papers/deadlines/?essp_id=2743 HTTP/1.1" 200 0
[05/Nov/2025 11:14:07] "OPTIONS /api/markings/papers/deadlines/?essp_id=2743 HTTP/1.1" 200 0
[05/Nov/2025 11:14:07] "OPTIONS /api/markings/papers/deadlines/?essp_id=2785 HTTP/1.1" 200 0
[05/Nov/2025 11:14:07] "OPTIONS /api/markings/papers/deadlines/?essp_id=2785 HTTP/1.1" 200 0
[05/Nov/2025 11:14:07] "GET /api/markings/papers/deadlines/?essp_id=2743 HTTP/1.1" 200 319
[05/Nov/2025 11:14:07] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 549
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762341247_5aee7606
[05/Nov/2025 11:14:07] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1423
[05/Nov/2025 11:14:07] "GET /api/markings/papers/deadlines/?essp_id=2743 HTTP/1.1" 200 319
[05/Nov/2025 11:14:07] "GET /api/markings/papers/deadlines/?essp_id=2785 HTTP/1.1" 200 213
[05/Nov/2025 11:14:07] "GET /api/markings/papers/deadlines/?essp_id=2785 HTTP/1.1" 200 213
[05/Nov/2025 11:27:05] "OPTIONS /api/subjects/ HTTP/1.1" 200 0
[05/Nov/2025 11:27:05] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 11:27:05] "OPTIONS /api/products/navbar-product-groups/ HTTP/1.1" 200 0
[05/Nov/2025 11:27:05] "OPTIONS /api/cart HTTP/1.1" 200 0
[05/Nov/2025 11:27:05] "OPTIONS /api/subjects/ HTTP/1.1" 200 0
[05/Nov/2025 11:27:05] "OPTIONS /api/products/distance-learning-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 11:27:05] "OPTIONS /api/products/tutorial-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 11:27:05] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 11:27:05] "OPTIONS /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 0
[05/Nov/2025 11:27:05] "OPTIONS /api/products/navbar-product-groups/ HTTP/1.1" 200 0
[05/Nov/2025 11:27:05] "OPTIONS /api/products/tutorial-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 11:27:05] "OPTIONS /api/products/distance-learning-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 11:27:05] "OPTIONS /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 0
[05/Nov/2025 11:27:05] "OPTIONS /api/cart HTTP/1.1" 200 0
[05/Nov/2025 11:27:05] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
INFO [SEARCH] Received filters: {'subjects': [], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
DEBUG Cache miss for rules:product_list_mount
DEBUG Cached 1 rules for product_list_mount
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762342025_aaa5bdd5
[05/Nov/2025 11:27:05] "GET /api/subjects/ HTTP/1.1" 200 2286
[05/Nov/2025 11:27:05] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1422
[05/Nov/2025 11:27:05] "GET /api/cart HTTP/1.1" 301 0
[05/Nov/2025 11:27:05] "GET /api/products/navbar-product-groups/ HTTP/1.1" 200 3064
[05/Nov/2025 11:27:06] "OPTIONS /api/cart/ HTTP/1.1" 200 0
[05/Nov/2025 11:27:06] "GET /api/products/distance-learning-dropdown/ HTTP/1.1" 200 1819
[05/Nov/2025 11:27:06] "GET /api/products/tutorial-dropdown/ HTTP/1.1" 200 1748
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762342027_192e6a35
[05/Nov/2025 11:27:07] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1421
[05/Nov/2025 11:27:07] "GET /api/products/navbar-product-groups/ HTTP/1.1" 200 3064
[05/Nov/2025 11:27:07] "GET /api/subjects/ HTTP/1.1" 200 2286
[05/Nov/2025 11:27:08] "GET /api/products/distance-learning-dropdown/ HTTP/1.1" 200 1819
[05/Nov/2025 11:27:08] "GET /api/cart HTTP/1.1" 301 0
[05/Nov/2025 11:27:08] "OPTIONS /api/cart/ HTTP/1.1" 200 0
[05/Nov/2025 11:27:08] "GET /api/products/tutorial-dropdown/ HTTP/1.1" 200 1748
WARNING get_vat_calculations() is deprecated. Use get_vat_totals() instead. This method will be removed in a future version.
[05/Nov/2025 11:27:09] "GET /api/cart/ HTTP/1.1" 200 16043
WARNING get_vat_calculations() is deprecated. Use get_vat_totals() instead. This method will be removed in a future version.
[05/Nov/2025 11:27:09] "GET /api/cart/ HTTP/1.1" 200 16043
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 158, in search_products
    logger.info(f'\U0001f50d [BUNDLES] Included {len(bundles_data)} bundles, {len(products_data) - len(bundles_data)} products')
Message: '\U0001f50d [BUNDLES] Included 22 bundles, -2 products'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 172, in search_products
    filter_counts = self._generate_optimized_filter_counts(filters, base_queryset, base_bundles_queryset)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 620, in _generate_optimized_filter_counts
    logger.info(f'\U0001f50d [FILTER-COUNTS] Added {bundle_count} bundles to Bundle category count')
Message: '\U0001f50d [FILTER-COUNTS] Added 22 bundles to Bundle category count'
Arguments: ()
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING SLOW SEARCH: 13.188s - Filters: {'subjects': [], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
WARNING Unified Product Search - Duration: 13.192s, Queries: 1005
[05/Nov/2025 11:27:18] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 16220
[05/Nov/2025 11:27:20] "GET /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 44651
[05/Nov/2025 11:27:20] "GET /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 44651
[05/Nov/2025 11:27:23] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762342043_46ca5741
[05/Nov/2025 11:27:23] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1408
[05/Nov/2025 11:27:31] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
INFO [SEARCH] Received filters: {'subjects': ['CS1'], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 107, in search_products
    filtered_queryset = self._apply_optimized_filters(filtered_queryset, filters)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 331, in _apply_optimized_filters
    logger.info(f'\U0001f50d [SEARCH-DEBUG] Filtered queryset count: {queryset.count()}')
Message: '\U0001f50d [SEARCH-DEBUG] Filtered queryset count: 23'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 158, in search_products
    logger.info(f'\U0001f50d [BUNDLES] Included {len(bundles_data)} bundles, {len(products_data) - len(bundles_data)} products')
Message: '\U0001f50d [BUNDLES] Included 0 bundles, 20 products'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 172, in search_products
    filter_counts = self._generate_optimized_filter_counts(filters, base_queryset, base_bundles_queryset)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 620, in _generate_optimized_filter_counts
    logger.info(f'\U0001f50d [FILTER-COUNTS] Added {bundle_count} bundles to Bundle category count')
Message: '\U0001f50d [FILTER-COUNTS] Added 22 bundles to Bundle category count'
Arguments: ()
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING SLOW SEARCH: 0.709s - Filters: {'subjects': ['CS1'], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
WARNING Unified Product Search - Duration: 0.709s, Queries: 97
[05/Nov/2025 11:27:32] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 23347
[05/Nov/2025 11:27:34] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
[05/Nov/2025 11:27:34] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 11:27:35] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 328
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762342055_17ca358a
[05/Nov/2025 11:27:35] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1437
[05/Nov/2025 11:27:40] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
INFO [SEARCH] Received filters: {'subjects': ['CS1'], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 107, in search_products
    filtered_queryset = self._apply_optimized_filters(filtered_queryset, filters)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 331, in _apply_optimized_filters
    logger.info(f'\U0001f50d [SEARCH-DEBUG] Filtered queryset count: {queryset.count()}')
Message: '\U0001f50d [SEARCH-DEBUG] Filtered queryset count: 23'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 158, in search_products
    logger.info(f'\U0001f50d [BUNDLES] Included {len(bundles_data)} bundles, {len(products_data) - len(bundles_data)} products')
Message: '\U0001f50d [BUNDLES] Included 0 bundles, 3 products'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 172, in search_products
    filter_counts = self._generate_optimized_filter_counts(filters, base_queryset, base_bundles_queryset)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 620, in _generate_optimized_filter_counts
    logger.info(f'\U0001f50d [FILTER-COUNTS] Added {bundle_count} bundles to Bundle category count')
Message: '\U0001f50d [FILTER-COUNTS] Added 22 bundles to Bundle category count'
Arguments: ()
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING Unified Product Search - Duration: 0.419s, Queries: 97
[05/Nov/2025 11:27:41] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 4466
[05/Nov/2025 11:27:42] "OPTIONS /api/markings/papers/deadlines/?essp_id=2769 HTTP/1.1" 200 0
[05/Nov/2025 11:27:42] "OPTIONS /api/markings/papers/deadlines/?essp_id=2786 HTTP/1.1" 200 0
[05/Nov/2025 11:27:42] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 11:27:42] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
[05/Nov/2025 11:27:42] "OPTIONS /api/markings/papers/deadlines/?essp_id=2786 HTTP/1.1" 200 0
[05/Nov/2025 11:27:42] "OPTIONS /api/markings/papers/deadlines/?essp_id=2769 HTTP/1.1" 200 0
[05/Nov/2025 11:27:42] "GET /api/markings/papers/deadlines/?essp_id=2786 HTTP/1.1" 200 213
[05/Nov/2025 11:27:42] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 655
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762342062_890fa94a
[05/Nov/2025 11:27:42] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1422
[05/Nov/2025 11:27:42] "GET /api/markings/papers/deadlines/?essp_id=2786 HTTP/1.1" 200 213
[05/Nov/2025 11:27:42] "GET /api/markings/papers/deadlines/?essp_id=2769 HTTP/1.1" 200 425
[05/Nov/2025 11:27:42] "GET /api/markings/papers/deadlines/?essp_id=2769 HTTP/1.1" 200 425
[05/Nov/2025 11:27:50] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
INFO [SEARCH] Received filters: {'subjects': ['CB2'], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 107, in search_products
    filtered_queryset = self._apply_optimized_filters(filtered_queryset, filters)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 331, in _apply_optimized_filters
    logger.info(f'\U0001f50d [SEARCH-DEBUG] Filtered queryset count: {queryset.count()}')
Message: '\U0001f50d [SEARCH-DEBUG] Filtered queryset count: 19'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 158, in search_products
    logger.info(f'\U0001f50d [BUNDLES] Included {len(bundles_data)} bundles, {len(products_data) - len(bundles_data)} products')
Message: '\U0001f50d [BUNDLES] Included 0 bundles, 19 products'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 172, in search_products
    filter_counts = self._generate_optimized_filter_counts(filters, base_queryset, base_bundles_queryset)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 620, in _generate_optimized_filter_counts
    logger.info(f'\U0001f50d [FILTER-COUNTS] Added {bundle_count} bundles to Bundle category count')
Message: '\U0001f50d [FILTER-COUNTS] Added 22 bundles to Bundle category count'
Arguments: ()
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING Unified Product Search - Duration: 0.328s, Queries: 81
[05/Nov/2025 11:27:50] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 20760
[05/Nov/2025 11:27:51] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
[05/Nov/2025 11:27:51] "OPTIONS /api/markings/papers/deadlines/?essp_id=2763 HTTP/1.1" 200 0
[05/Nov/2025 11:27:51] "OPTIONS /api/markings/papers/deadlines/?essp_id=2741 HTTP/1.1" 200 0
[05/Nov/2025 11:27:51] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 11:27:51] "OPTIONS /api/markings/papers/deadlines/?essp_id=2763 HTTP/1.1" 200 0
[05/Nov/2025 11:27:51] "OPTIONS /api/markings/papers/deadlines/?essp_id=2741 HTTP/1.1" 200 0
[05/Nov/2025 11:27:51] "GET /api/markings/papers/deadlines/?essp_id=2741 HTTP/1.1" 200 319
[05/Nov/2025 11:27:51] "GET /api/markings/papers/deadlines/?essp_id=2763 HTTP/1.1" 200 425
[05/Nov/2025 11:27:51] "GET /api/markings/papers/deadlines/?essp_id=2763 HTTP/1.1" 200 425
[05/Nov/2025 11:27:51] "GET /api/markings/papers/deadlines/?essp_id=2741 HTTP/1.1" 200 319
[05/Nov/2025 11:27:52] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 761
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762342072_04e587c9
[05/Nov/2025 11:27:52] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1422
INFO Cache HIT for postcode E18BT (hits: 9)
INFO [POSTCODER] SUCCESS (cached) E18BT: 2 addresses in 64ms
[05/Nov/2025 11:33:24] "GET /api/utils/address-lookup/?postcode=E1%208BT HTTP/1.1" 200 636
INFO Cache HIT for postcode E18BT (hits: 10)
INFO [POSTCODER] SUCCESS (cached) E18BT: 2 addresses in 75ms
[05/Nov/2025 11:33:30] "GET /api/utils/address-lookup/?postcode=E1%208BT HTTP/1.1" 200 636
INFO Cache HIT for postcode E18BT (hits: 11)
INFO [POSTCODER] SUCCESS (cached) E18BT: 2 addresses in 72ms
[05/Nov/2025 11:33:30] "GET /api/utils/address-lookup/?postcode=E1%208BT HTTP/1.1" 200 636
INFO Cache HIT for postcode E18BT (hits: 12)
INFO [POSTCODER] SUCCESS (cached) E18BT: 2 addresses in 75ms
[05/Nov/2025 11:33:31] "GET /api/utils/address-lookup/?postcode=E1%208BT HTTP/1.1" 200 636
INFO Cache HIT for postcode E18BT (hits: 13)
INFO [POSTCODER] SUCCESS (cached) E18BT: 2 addresses in 70ms
[05/Nov/2025 11:33:32] "GET /api/utils/address-lookup/?postcode=E1%208BT HTTP/1.1" 200 636
INFO Cache HIT for postcode E18BT (hits: 14)
INFO [POSTCODER] SUCCESS (cached) E18BT: 2 addresses in 74ms
[05/Nov/2025 11:33:32] "GET /api/utils/address-lookup/?postcode=E1%208BT HTTP/1.1" 200 636
INFO Cache HIT for postcode E18BT (hits: 15)
INFO [POSTCODER] SUCCESS (cached) E18BT: 2 addresses in 75ms
[05/Nov/2025 11:33:32] "GET /api/utils/address-lookup/?postcode=E1%208BT HTTP/1.1" 200 636
INFO Cache MISS for postcode M16FQ
INFO Calling Postcoder API for postcode: M16FQ
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/uk/M16FQ HTTP/1.1" 200 6735
INFO Successfully retrieved 20 addresses
INFO Cached addresses for postcode M16FQ (expires: 2025-11-12)
INFO [POSTCODER] SUCCESS (API) M16FQ: 20 addresses in 338ms
[05/Nov/2025 11:33:56] "GET /api/utils/address-lookup/?postcode=M1%206FQ HTTP/1.1" 200 6120
[05/Nov/2025 11:35:05] "GET /api/countries HTTP/1.1" 301 0
[05/Nov/2025 11:35:05] "GET /api/countries HTTP/1.1" 301 0
[05/Nov/2025 11:35:06] "GET /api/countries/ HTTP/1.1" 200 27171
[05/Nov/2025 11:35:06] "GET /api/countries/ HTTP/1.1" 200 27171
INFO Cache HIT for postcode M16FQ (hits: 2)
INFO [POSTCODER] SUCCESS (cached) M16FQ: 20 addresses in 90ms
[05/Nov/2025 11:35:06] "GET /api/utils/address-lookup/?postcode=M1%20%206FQ HTTP/1.1" 200 6118
INFO Cache MISS for postcode OX449EL
INFO Calling Postcoder API for postcode: OX449EL
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/uk/OX449EL HTTP/1.1" 200 4116
INFO Successfully retrieved 17 addresses
INFO Cached addresses for postcode OX449EL (expires: 2025-11-12)
INFO [POSTCODER] SUCCESS (API) OX449EL: 17 addresses in 359ms
[05/Nov/2025 11:36:28] "GET /api/utils/address-lookup/?postcode=OX44%209EL HTTP/1.1" 200 4736
INFO Cache HIT for postcode M16FQ (hits: 3)
INFO [POSTCODER] SUCCESS (cached) M16FQ: 20 addresses in 244ms
[05/Nov/2025 11:37:05] "GET /api/utils/address-lookup/?postcode=M16FQ HTTP/1.1" 200 6119
C:\Code\Admin3\backend\django_Admin3\utils\services\postcoder_service.py changed, reloading.
INFO C:\Code\Admin3\backend\django_Admin3\utils\services\postcoder_service.py changed, reloading.
Watching for file changes with StatReloader
DJANGO_ENV django_Admin3.settings.development
DJANGO_ENV development
DJANGO_SETTINGS_MODULE django_Admin3.settings.development
DJANGO_ENV FILE C:\Code\Admin3\backend\django_Admin3\.env.development
Loading environment from: C:\Code\Admin3\backend\django_Admin3\.env.development
INFO Watching for file changes with StatReloader
Performing system checks...

System check identified no issues (0 silenced).
C:\Code\Admin3\backend\django_Admin3\utils\views.py changed, reloading.
November 05, 2025 - 11:38:19
Django version 5.2.7, using settings 'django_Admin3.settings.development'
Starting development server at http://127.0.0.1:8888/
Quit the server with CTRL-BREAK.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
INFO C:\Code\Admin3\backend\django_Admin3\utils\views.py changed, reloading.
Watching for file changes with StatReloader
DJANGO_ENV django_Admin3.settings.development
DJANGO_ENV development
DJANGO_SETTINGS_MODULE django_Admin3.settings.development
DJANGO_ENV FILE C:\Code\Admin3\backend\django_Admin3\.env.development
Loading environment from: C:\Code\Admin3\backend\django_Admin3\.env.development
INFO Watching for file changes with StatReloader
Performing system checks...

System check identified no issues (0 silenced).
C:\Code\Admin3\backend\django_Admin3\utils\views.py changed, reloading.
November 05, 2025 - 11:55:19
Django version 5.2.7, using settings 'django_Admin3.settings.development'
Starting development server at http://127.0.0.1:8888/
Quit the server with CTRL-BREAK.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
INFO C:\Code\Admin3\backend\django_Admin3\utils\views.py changed, reloading.
Watching for file changes with StatReloader
DJANGO_ENV django_Admin3.settings.development
DJANGO_ENV development
DJANGO_SETTINGS_MODULE django_Admin3.settings.development
DJANGO_ENV FILE C:\Code\Admin3\backend\django_Admin3\.env.development
Loading environment from: C:\Code\Admin3\backend\django_Admin3\.env.development
INFO Watching for file changes with StatReloader
Performing system checks...

System check identified no issues (0 silenced).
C:\Code\Admin3\backend\django_Admin3\utils\views.py changed, reloading.
November 05, 2025 - 11:55:57
Django version 5.2.7, using settings 'django_Admin3.settings.development'
Starting development server at http://127.0.0.1:8888/
Quit the server with CTRL-BREAK.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
INFO C:\Code\Admin3\backend\django_Admin3\utils\views.py changed, reloading.
Watching for file changes with StatReloader
DJANGO_ENV django_Admin3.settings.development
DJANGO_ENV development
DJANGO_SETTINGS_MODULE django_Admin3.settings.development
DJANGO_ENV FILE C:\Code\Admin3\backend\django_Admin3\.env.development
Loading environment from: C:\Code\Admin3\backend\django_Admin3\.env.development
INFO Watching for file changes with StatReloader
Performing system checks...

System check identified no issues (0 silenced).
[05/Nov/2025 11:56:43] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
November 05, 2025 - 11:56:21
Django version 5.2.7, using settings 'django_Admin3.settings.development'
Starting development server at http://127.0.0.1:8888/
Quit the server with CTRL-BREAK.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
INFO [SEARCH] Received filters: {'subjects': [], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 158, in search_products
    logger.info(f'\U0001f50d [BUNDLES] Included {len(bundles_data)} bundles, {len(products_data) - len(bundles_data)} products')
Message: '\U0001f50d [BUNDLES] Included 22 bundles, -2 products'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 172, in search_products
    filter_counts = self._generate_optimized_filter_counts(filters, base_queryset, base_bundles_queryset)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 620, in _generate_optimized_filter_counts
    logger.info(f'\U0001f50d [FILTER-COUNTS] Added {bundle_count} bundles to Bundle category count')
Message: '\U0001f50d [FILTER-COUNTS] Added 22 bundles to Bundle category count'
Arguments: ()
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING SLOW SEARCH: 6.456s - Filters: {'subjects': [], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
WARNING Unified Product Search - Duration: 6.458s, Queries: 1452
[05/Nov/2025 11:56:49] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 27554
[05/Nov/2025 11:56:53] "OPTIONS /api/markings/papers/deadlines/?essp_id=2740 HTTP/1.1" 200 0
[05/Nov/2025 11:56:53] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
[05/Nov/2025 11:56:53] "OPTIONS /api/markings/papers/deadlines/?essp_id=2762 HTTP/1.1" 200 0
[05/Nov/2025 11:56:53] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 11:56:53] "OPTIONS /api/markings/papers/deadlines/?essp_id=2762 HTTP/1.1" 200 0
[05/Nov/2025 11:56:53] "OPTIONS /api/markings/papers/deadlines/?essp_id=2740 HTTP/1.1" 200 0
[05/Nov/2025 11:56:54] "GET /api/markings/papers/deadlines/?essp_id=2740 HTTP/1.1" 200 319
[05/Nov/2025 11:56:54] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 655
[05/Nov/2025 11:56:54] "GET /api/markings/papers/deadlines/?essp_id=2762 HTTP/1.1" 200 319
DEBUG Cache miss for rules:product_list_mount
DEBUG Cached 1 rules for product_list_mount
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762343814_f4333917
[05/Nov/2025 11:56:54] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1423
[05/Nov/2025 11:56:56] "OPTIONS /api/subjects/ HTTP/1.1" 200 0
[05/Nov/2025 11:56:56] "OPTIONS /api/products/navbar-product-groups/ HTTP/1.1" 200 0
[05/Nov/2025 11:56:56] "OPTIONS /api/products/distance-learning-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 11:56:56] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 11:56:56] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 11:56:56] "OPTIONS /api/products/tutorial-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 11:56:56] "OPTIONS /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 0
[05/Nov/2025 11:56:56] "OPTIONS /api/cart HTTP/1.1" 200 0
[05/Nov/2025 11:56:56] "OPTIONS /api/subjects/ HTTP/1.1" 200 0
[05/Nov/2025 11:56:56] "OPTIONS /api/products/distance-learning-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 11:56:56] "OPTIONS /api/products/navbar-product-groups/ HTTP/1.1" 200 0
[05/Nov/2025 11:56:56] "OPTIONS /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 0
[05/Nov/2025 11:56:56] "OPTIONS /api/products/tutorial-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 11:56:56] "OPTIONS /api/cart HTTP/1.1" 200 0
[05/Nov/2025 11:56:56] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
C:\Code\Admin3\backend\django_Admin3\utils\views.py changed, reloading.
INFO C:\Code\Admin3\backend\django_Admin3\utils\views.py changed, reloading.
Watching for file changes with StatReloader
DJANGO_ENV django_Admin3.settings.development
DJANGO_ENV development
DJANGO_SETTINGS_MODULE django_Admin3.settings.development
DJANGO_ENV FILE C:\Code\Admin3\backend\django_Admin3\.env.development
Loading environment from: C:\Code\Admin3\backend\django_Admin3\.env.development
INFO Watching for file changes with StatReloader
Performing system checks...

System check identified no issues (0 silenced).
[05/Nov/2025 11:57:12] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 11:57:12] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
November 05, 2025 - 11:57:03
Django version 5.2.7, using settings 'django_Admin3.settings.development'
Starting development server at http://127.0.0.1:8888/
Quit the server with CTRL-BREAK.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
DEBUG Cache miss for rules:product_list_mount
[05/Nov/2025 11:57:12] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 655
DEBUG Cached 1 rules for product_list_mount
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762343832_2e7e235f
[05/Nov/2025 11:57:12] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1423
C:\Code\Admin3\backend\django_Admin3\utils\views.py changed, reloading.
INFO C:\Code\Admin3\backend\django_Admin3\utils\views.py changed, reloading.
Watching for file changes with StatReloader
DJANGO_ENV django_Admin3.settings.development
DJANGO_ENV development
DJANGO_SETTINGS_MODULE django_Admin3.settings.development
DJANGO_ENV FILE C:\Code\Admin3\backend\django_Admin3\.env.development
Loading environment from: C:\Code\Admin3\backend\django_Admin3\.env.development
INFO Watching for file changes with StatReloader
Performing system checks...

System check identified no issues (0 silenced).
[05/Nov/2025 11:57:41] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
November 05, 2025 - 11:57:38
Django version 5.2.7, using settings 'django_Admin3.settings.development'
Starting development server at http://127.0.0.1:8888/
Quit the server with CTRL-BREAK.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
INFO [SEARCH] Received filters: {'subjects': ['CS2'], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 107, in search_products
    filtered_queryset = self._apply_optimized_filters(filtered_queryset, filters)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 331, in _apply_optimized_filters
    logger.info(f'\U0001f50d [SEARCH-DEBUG] Filtered queryset count: {queryset.count()}')
Message: '\U0001f50d [SEARCH-DEBUG] Filtered queryset count: 22'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 158, in search_products
    logger.info(f'\U0001f50d [BUNDLES] Included {len(bundles_data)} bundles, {len(products_data) - len(bundles_data)} products')
Message: '\U0001f50d [BUNDLES] Included 1 bundles, 19 products'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 172, in search_products
    filter_counts = self._generate_optimized_filter_counts(filters, base_queryset, base_bundles_queryset)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 620, in _generate_optimized_filter_counts
    logger.info(f'\U0001f50d [FILTER-COUNTS] Added {bundle_count} bundles to Bundle category count')
Message: '\U0001f50d [FILTER-COUNTS] Added 22 bundles to Bundle category count'
Arguments: ()
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING SLOW SEARCH: 0.714s - Filters: {'subjects': ['CS2'], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
WARNING Unified Product Search - Duration: 0.715s, Queries: 133
[05/Nov/2025 11:57:42] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 27683
[05/Nov/2025 11:57:45] "OPTIONS /api/markings/papers/deadlines/?essp_id=2748 HTTP/1.1" 200 0
[05/Nov/2025 11:57:45] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 11:57:45] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
[05/Nov/2025 11:57:45] "OPTIONS /api/markings/papers/deadlines/?essp_id=2748 HTTP/1.1" 200 0
DEBUG Cache miss for rules:product_list_mount
DEBUG Cached 1 rules for product_list_mount
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
[05/Nov/2025 11:57:46] "GET /api/markings/papers/deadlines/?essp_id=2748 HTTP/1.1" 200 319
DEBUG Stored execution record: exec_1762343866_48872bba
[05/Nov/2025 11:57:46] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 328
[05/Nov/2025 11:57:46] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1423
[05/Nov/2025 11:57:46] "GET /api/markings/papers/deadlines/?essp_id=2748 HTTP/1.1" 200 319
INFO Cache MISS for postcode 000_HK
INFO Calling Postcoder API for HK postcode: 000
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/000 HTTP/1.1" 200 2
INFO Successfully retrieved 0 addresses for HK
INFO Cached addresses for postcode 000_HK (expires: 2025-11-12)
INFO [POSTCODER] SUCCESS (API) 000: 0 addresses in 859ms
[05/Nov/2025 11:59:50] "GET /api/utils/address-lookup/?postcode=000&country=HK HTTP/1.1" 200 62
INFO Cache MISS for postcode 999077_HK
INFO Calling Postcoder API for HK postcode: 999077
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
INFO Cache HIT for postcode 000_HK (hits: 2)
INFO [POSTCODER] SUCCESS (cached) 000: 0 addresses in 216ms
[05/Nov/2025 12:00:17] "GET /api/utils/address-lookup/?postcode=000&country=HK HTTP/1.1" 200 61
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/999077 HTTP/1.1" 200 2
INFO Successfully retrieved 0 addresses for HK
INFO Cached addresses for postcode 999077_HK (expires: 2025-11-12)
INFO [POSTCODER] SUCCESS (API) 999077: 0 addresses in 742ms
[05/Nov/2025 12:00:18] "GET /api/utils/address-lookup/?postcode=999077&country=HK HTTP/1.1" 200 62
INFO Cache MISS for postcode M16FQ_GB
INFO Calling Postcoder API for GB postcode: M16FQ
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/gb/M16FQ HTTP/1.1" 200 6735
INFO Successfully retrieved 20 addresses for GB
INFO Cached addresses for postcode M16FQ_GB (expires: 2025-11-12)
INFO [POSTCODER] SUCCESS (API) M16FQ: 20 addresses in 204ms
[05/Nov/2025 12:00:34] "GET /api/utils/address-lookup/?postcode=M16FQ&country=GB HTTP/1.1" 200 7841
INFO Cache MISS for postcode SHATIN_HK
INFO Calling Postcoder API for HK postcode: SHATIN
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/SHATIN HTTP/1.1" 200 2983
INFO Successfully retrieved 10 addresses for HK
INFO Cached addresses for postcode SHATIN_HK (expires: 2025-11-12)
INFO [POSTCODER] SUCCESS (API) SHATIN: 10 addresses in 331ms
[05/Nov/2025 12:01:36] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4002
INFO Cache HIT for postcode SHATIN_HK (hits: 2)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 66ms
[05/Nov/2025 12:01:39] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4000
INFO Cache HIT for postcode SHATIN_HK (hits: 3)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 64ms
[05/Nov/2025 12:01:40] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4000
INFO Cache HIT for postcode SHATIN_HK (hits: 4)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 71ms
[05/Nov/2025 12:01:41] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4000
INFO Cache HIT for postcode SHATIN_HK (hits: 5)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 73ms
[05/Nov/2025 12:01:41] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4000
INFO Cache HIT for postcode SHATIN_HK (hits: 6)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 75ms
[05/Nov/2025 12:01:41] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4000
INFO Cache HIT for postcode SHATIN_HK (hits: 7)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 78ms
[05/Nov/2025 12:01:41] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4000
INFO Cache HIT for postcode SHATIN_HK (hits: 8)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 79ms
[05/Nov/2025 12:01:41] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4000
INFO Cache HIT for postcode SHATIN_HK (hits: 9)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 76ms
[05/Nov/2025 12:01:41] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4000
INFO Cache HIT for postcode SHATIN_HK (hits: 10)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 87ms
[05/Nov/2025 12:01:42] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4000
INFO Cache HIT for postcode SHATIN_HK (hits: 11)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 67ms
[05/Nov/2025 12:01:42] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4000
INFO Cache HIT for postcode SHATIN_HK (hits: 12)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 78ms
[05/Nov/2025 12:01:42] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4000
INFO Cache HIT for postcode SHATIN_HK (hits: 13)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 197ms
[05/Nov/2025 12:01:42] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4001
INFO Cache HIT for postcode SHATIN_HK (hits: 14)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 177ms
[05/Nov/2025 12:01:42] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4001
INFO Cache HIT for postcode SHATIN_HK (hits: 15)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 145ms
[05/Nov/2025 12:01:42] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4001
INFO Cache HIT for postcode SHATIN_HK (hits: 16)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 172ms
[05/Nov/2025 12:01:42] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4001
INFO Cache HIT for postcode SHATIN_HK (hits: 17)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 138ms
[05/Nov/2025 12:01:42] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4001
INFO Cache HIT for postcode SHATIN_HK (hits: 18)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 154ms
[05/Nov/2025 12:01:42] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4001
INFO Cache HIT for postcode SHATIN_HK (hits: 19)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 161ms
[05/Nov/2025 12:01:42] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4001
INFO Cache HIT for postcode SHATIN_HK (hits: 20)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 116ms
[05/Nov/2025 12:01:43] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4001
INFO Cache HIT for postcode SHATIN_HK (hits: 21)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 97ms
[05/Nov/2025 12:01:43] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4000
INFO Cache HIT for postcode SHATIN_HK (hits: 22)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 101ms
[05/Nov/2025 12:01:43] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4001
INFO Cache HIT for postcode SHATIN_HK (hits: 23)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 78ms
[05/Nov/2025 12:01:43] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4000
INFO Cache HIT for postcode SHATIN_HK (hits: 24)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 104ms
[05/Nov/2025 12:01:43] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4001
INFO Cache HIT for postcode SHATIN_HK (hits: 25)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 73ms
[05/Nov/2025 12:01:45] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4000
INFO Cache HIT for postcode SHATIN_HK (hits: 26)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 90ms
[05/Nov/2025 12:01:45] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4000
INFO Cache HIT for postcode SHATIN_HK (hits: 27)
INFO [POSTCODER] SUCCESS (cached) SHATIN: 10 addresses in 88ms
[05/Nov/2025 12:01:46] "GET /api/utils/address-lookup/?postcode=Shatin&country=HK HTTP/1.1" 200 4000
[05/Nov/2025 12:08:24] "OPTIONS /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 0
[05/Nov/2025 12:08:24] "OPTIONS /api/products/tutorial-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 12:08:24] "OPTIONS /api/products/distance-learning-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 12:08:25] "OPTIONS /api/products/navbar-product-groups/ HTTP/1.1" 200 0
[05/Nov/2025 12:08:25] "OPTIONS /api/cart HTTP/1.1" 200 0
[05/Nov/2025 12:08:25] "OPTIONS /api/subjects/ HTTP/1.1" 200 0
[05/Nov/2025 12:08:25] "OPTIONS /api/products/navbar-product-groups/ HTTP/1.1" 200 0
[05/Nov/2025 12:08:25] "OPTIONS /api/products/distance-learning-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 12:08:25] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 12:08:25] "OPTIONS /api/subjects/ HTTP/1.1" 200 0
[05/Nov/2025 12:08:25] "OPTIONS /api/products/tutorial-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 12:08:25] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 12:08:25] "OPTIONS /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 0
[05/Nov/2025 12:08:25] "OPTIONS /api/cart HTTP/1.1" 200 0
[05/Nov/2025 12:08:25] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
INFO [SEARCH] Received filters: {'subjects': [], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
[05/Nov/2025 12:08:25] "GET /api/products/tutorial-dropdown/ HTTP/1.1" 200 1748
[05/Nov/2025 12:08:25] "GET /api/products/navbar-product-groups/ HTTP/1.1" 200 3064
[05/Nov/2025 12:08:25] "GET /api/products/distance-learning-dropdown/ HTTP/1.1" 200 1819
DEBUG Cache miss for rules:product_list_mount
DEBUG Cached 1 rules for product_list_mount
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762344505_dfb1e782
[05/Nov/2025 12:08:26] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1421
[05/Nov/2025 12:08:26] "GET /api/cart HTTP/1.1" 301 0
[05/Nov/2025 12:08:26] "OPTIONS /api/cart/ HTTP/1.1" 200 0
[05/Nov/2025 12:08:26] "GET /api/subjects/ HTTP/1.1" 200 2286
[05/Nov/2025 12:08:26] "GET /api/subjects/ HTTP/1.1" 200 2286
[05/Nov/2025 12:08:26] "GET /api/products/navbar-product-groups/ HTTP/1.1" 200 3064
[05/Nov/2025 12:08:27] "GET /api/products/distance-learning-dropdown/ HTTP/1.1" 200 1819
[05/Nov/2025 12:08:27] "GET /api/products/tutorial-dropdown/ HTTP/1.1" 200 1748
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762344507_b96c0cc1
[05/Nov/2025 12:08:27] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1437
[05/Nov/2025 12:08:27] "GET /api/cart HTTP/1.1" 301 0
[05/Nov/2025 12:08:27] "OPTIONS /api/cart/ HTTP/1.1" 200 0
WARNING get_vat_calculations() is deprecated. Use get_vat_totals() instead. This method will be removed in a future version.
[05/Nov/2025 12:08:28] "GET /api/cart/ HTTP/1.1" 200 16043
WARNING get_vat_calculations() is deprecated. Use get_vat_totals() instead. This method will be removed in a future version.
[05/Nov/2025 12:08:28] "GET /api/cart/ HTTP/1.1" 200 16043
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 158, in search_products
    logger.info(f'\U0001f50d [BUNDLES] Included {len(bundles_data)} bundles, {len(products_data) - len(bundles_data)} products')
Message: '\U0001f50d [BUNDLES] Included 22 bundles, -2 products'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 172, in search_products
    filter_counts = self._generate_optimized_filter_counts(filters, base_queryset, base_bundles_queryset)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 620, in _generate_optimized_filter_counts
    logger.info(f'\U0001f50d [FILTER-COUNTS] Added {bundle_count} bundles to Bundle category count')
Message: '\U0001f50d [FILTER-COUNTS] Added 22 bundles to Bundle category count'
Arguments: ()
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING SLOW SEARCH: 11.733s - Filters: {'subjects': [], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
WARNING Unified Product Search - Duration: 11.734s, Queries: 1350
[05/Nov/2025 12:08:37] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 25621
[05/Nov/2025 12:08:38] "GET /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 58907
[05/Nov/2025 12:08:39] "GET /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 58907
[05/Nov/2025 12:08:41] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
[05/Nov/2025 12:08:41] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 12:08:41] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 655
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762344521_53df6cd3
[05/Nov/2025 12:08:41] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1422
C:\Code\Admin3\backend\django_Admin3\utils\services\postcoder_service.py changed, reloading.
INFO C:\Code\Admin3\backend\django_Admin3\utils\services\postcoder_service.py changed, reloading.
Watching for file changes with StatReloader
DJANGO_ENV django_Admin3.settings.development
DJANGO_ENV development
DJANGO_SETTINGS_MODULE django_Admin3.settings.development
DJANGO_ENV FILE C:\Code\Admin3\backend\django_Admin3\.env.development
Loading environment from: C:\Code\Admin3\backend\django_Admin3\.env.development
INFO Watching for file changes with StatReloader
Performing system checks...

System check identified no issues (0 silenced).
C:\Code\Admin3\backend\django_Admin3\utils\views.py changed, reloading.
November 05, 2025 - 12:09:39
Django version 5.2.7, using settings 'django_Admin3.settings.development'
Starting development server at http://127.0.0.1:8888/
Quit the server with CTRL-BREAK.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
INFO C:\Code\Admin3\backend\django_Admin3\utils\views.py changed, reloading.
Watching for file changes with StatReloader
DJANGO_ENV django_Admin3.settings.development
DJANGO_ENV development
DJANGO_SETTINGS_MODULE django_Admin3.settings.development
DJANGO_ENV FILE C:\Code\Admin3\backend\django_Admin3\.env.development
Loading environment from: C:\Code\Admin3\backend\django_Admin3\.env.development
INFO Watching for file changes with StatReloader
Performing system checks...

System check identified no issues (0 silenced).
C:\Code\Admin3\backend\django_Admin3\products\serializers.py changed, reloading.
November 05, 2025 - 13:15:39
Django version 5.2.7, using settings 'django_Admin3.settings.development'
Starting development server at http://127.0.0.1:8888/
Quit the server with CTRL-BREAK.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
INFO C:\Code\Admin3\backend\django_Admin3\products\serializers.py changed, reloading.
Watching for file changes with StatReloader
DJANGO_ENV django_Admin3.settings.development
DJANGO_ENV development
DJANGO_SETTINGS_MODULE django_Admin3.settings.development
DJANGO_ENV FILE C:\Code\Admin3\backend\django_Admin3\.env.development
Loading environment from: C:\Code\Admin3\backend\django_Admin3\.env.development
INFO Watching for file changes with StatReloader
Performing system checks...

System check identified no issues (0 silenced).
[05/Nov/2025 14:17:29] "OPTIONS /api/products/bundles/10/ HTTP/1.1" 200 0
[05/Nov/2025 14:17:30] "GET /api/products/bundles/10/ HTTP/1.1" 200 2338
November 05, 2025 - 14:14:37
Django version 5.2.7, using settings 'django_Admin3.settings.development'
Starting development server at http://127.0.0.1:8888/
Quit the server with CTRL-BREAK.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
INFO Cache MISS for postcode 2_HK
INFO Calling Postcoder API for HK postcode: 2
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
INFO Cache MISS for postcode 2_HK
INFO Calling Postcoder API for HK postcode: 2
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/2 HTTP/1.1" 200 29375
INFO Successfully retrieved 150 addresses for HK
INFO Cached addresses for postcode 2_HK (expires: 2025-11-12)
INFO [POSTCODER] SUCCESS (API) 2: 150 addresses in 488ms
[05/Nov/2025 14:18:32] "GET /api/utils/address-lookup/?postcode=2&country=HK HTTP/1.1" 200 46234
INFO Cache MISS for postcode Y_HK
INFO Calling Postcoder API for HK postcode: Y
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/Y HTTP/1.1" 200 2546
INFO Successfully retrieved 11 addresses for HK
INFO Cached addresses for postcode Y_HK (expires: 2025-11-12)
INFO [POSTCODER] SUCCESS (API) Y: 11 addresses in 298ms
[05/Nov/2025 14:18:33] "GET /api/utils/address-lookup/?postcode=Y&country=HK HTTP/1.1" 200 3770
INFO Cache MISS for postcode I_HK
INFO Calling Postcoder API for HK postcode: I
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
INFO Cache MISS for postcode N_HK
INFO Calling Postcoder API for HK postcode: N
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/I HTTP/1.1" 200 2458
INFO Successfully retrieved 10 addresses for HK
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/2 HTTP/1.1" 200 29375
INFO Successfully retrieved 150 addresses for HK
INFO Cached addresses for postcode I_HK (expires: 2025-11-12)
INFO [POSTCODER] SUCCESS (API) I: 10 addresses in 327ms
[05/Nov/2025 14:18:33] "GET /api/utils/address-lookup/?postcode=i&country=HK HTTP/1.1" 200 3524
INFO Cached addresses for postcode 2_HK (expires: 2025-11-12)
INFO [POSTCODER] SUCCESS (API) 2: 150 addresses in 1214ms
[05/Nov/2025 14:18:33] "GET /api/utils/address-lookup/?postcode=2&country=HK HTTP/1.1" 200 46235
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/N HTTP/1.1" 200 3554
INFO Successfully retrieved 14 addresses for HK
INFO Cached addresses for postcode N_HK (expires: 2025-11-12)
INFO [POSTCODER] SUCCESS (API) N: 14 addresses in 328ms
[05/Nov/2025 14:18:33] "GET /api/utils/address-lookup/?postcode=n&country=HK HTTP/1.1" 200 5052
INFO Cache MISS for postcode O_HK
INFO Calling Postcoder API for HK postcode: O
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/O HTTP/1.1" 429 60
ERROR Postcoder API HTTP error for HK postcode O: 429 Client Error: Too Many Requests for url: https://ws.postcoder.com/pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/O
INFO [POSTCODER] FAILED (API) O: 0 addresses in 204ms
Internal Server Error: /api/utils/address-lookup/
ERROR Internal Server Error: /api/utils/address-lookup/
[05/Nov/2025 14:18:36] "GET /api/utils/address-lookup/?postcode=O&country=HK HTTP/1.1" 500 172
INFO Cache HIT for postcode N_HK (hits: 2)
INFO [POSTCODER] SUCCESS (cached) N: 14 addresses in 70ms
[05/Nov/2025 14:18:36] "GET /api/utils/address-lookup/?postcode=n&country=HK HTTP/1.1" 200 5050
INFO Cache HIT for postcode 2_HK (hits: 2)
INFO [POSTCODER] SUCCESS (cached) 2: 150 addresses in 187ms
[05/Nov/2025 14:22:01] "GET /api/utils/address-lookup/?postcode=2&country=HK HTTP/1.1" 200 46233
INFO Cache HIT for postcode 2_HK (hits: 3)
INFO [POSTCODER] SUCCESS (cached) 2: 150 addresses in 66ms
[05/Nov/2025 14:22:01] "GET /api/utils/address-lookup/?postcode=2&country=HK HTTP/1.1" 200 46232
INFO Cache HIT for postcode 2_HK (hits: 4)
INFO [POSTCODER] SUCCESS (cached) 2: 150 addresses in 95ms
[05/Nov/2025 14:22:08] "GET /api/utils/address-lookup/?postcode=2&country=HK HTTP/1.1" 200 46232
INFO Cache HIT for postcode 2_HK (hits: 5)
INFO [POSTCODER] SUCCESS (cached) 2: 150 addresses in 66ms
[05/Nov/2025 14:22:09] "GET /api/utils/address-lookup/?postcode=2&country=HK HTTP/1.1" 200 46232
INFO Cache HIT for postcode Y_HK (hits: 2)
INFO [POSTCODER] SUCCESS (cached) Y: 11 addresses in 192ms
[05/Nov/2025 14:22:11] "GET /api/utils/address-lookup/?postcode=Y&country=HK HTTP/1.1" 200 3769
INFO Cache HIT for postcode I_HK (hits: 2)
INFO [POSTCODER] SUCCESS (cached) I: 10 addresses in 68ms
[05/Nov/2025 14:22:11] "GET /api/utils/address-lookup/?postcode=i&country=HK HTTP/1.1" 200 3522
INFO Cache HIT for postcode N_HK (hits: 3)
INFO [POSTCODER] SUCCESS (cached) N: 14 addresses in 62ms
[05/Nov/2025 14:22:12] "GET /api/utils/address-lookup/?postcode=n&country=HK HTTP/1.1" 200 5050
INFO Cache MISS for postcode O_HK
INFO Calling Postcoder API for HK postcode: O
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/O HTTP/1.1" 429 60
ERROR Postcoder API HTTP error for HK postcode O: 429 Client Error: Too Many Requests for url: https://ws.postcoder.com/pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/O
INFO [POSTCODER] FAILED (API) O: 0 addresses in 209ms
Internal Server Error: /api/utils/address-lookup/
ERROR Internal Server Error: /api/utils/address-lookup/
[05/Nov/2025 14:22:13] "GET /api/utils/address-lookup/?postcode=O&country=HK HTTP/1.1" 500 172
INFO Cache HIT for postcode N_HK (hits: 4)
INFO [POSTCODER] SUCCESS (cached) N: 14 addresses in 69ms
[05/Nov/2025 14:22:13] "GET /api/utils/address-lookup/?postcode=n&country=HK HTTP/1.1" 200 5050
INFO Cache MISS for postcode S_HK
INFO Calling Postcoder API for HK postcode: S
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/S HTTP/1.1" 429 60
ERROR Postcoder API HTTP error for HK postcode S: 429 Client Error: Too Many Requests for url: https://ws.postcoder.com/pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/S
INFO [POSTCODER] FAILED (API) S: 0 addresses in 201ms
Internal Server Error: /api/utils/address-lookup/
ERROR Internal Server Error: /api/utils/address-lookup/
[05/Nov/2025 14:22:14] "GET /api/utils/address-lookup/?postcode=S&country=HK HTTP/1.1" 500 172
INFO Cache MISS for postcode T_HK
INFO Calling Postcoder API for HK postcode: T
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/T HTTP/1.1" 429 60
ERROR Postcoder API HTTP error for HK postcode T: 429 Client Error: Too Many Requests for url: https://ws.postcoder.com/pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/T
INFO [POSTCODER] FAILED (API) T: 0 addresses in 208ms
Internal Server Error: /api/utils/address-lookup/
ERROR Internal Server Error: /api/utils/address-lookup/
[05/Nov/2025 14:22:14] "GET /api/utils/address-lookup/?postcode=t&country=HK HTTP/1.1" 500 172
INFO Cache MISS for postcode R_HK
INFO Calling Postcoder API for HK postcode: R
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/R HTTP/1.1" 429 60
ERROR Postcoder API HTTP error for HK postcode R: 429 Client Error: Too Many Requests for url: https://ws.postcoder.com/pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/R
INFO [POSTCODER] FAILED (API) R: 0 addresses in 166ms
Internal Server Error: /api/utils/address-lookup/
ERROR Internal Server Error: /api/utils/address-lookup/
[05/Nov/2025 14:22:14] "GET /api/utils/address-lookup/?postcode=r&country=HK HTTP/1.1" 500 172
INFO Cache MISS for postcode E_HK
INFO Calling Postcoder API for HK postcode: E
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
INFO Cache MISS for postcode E_HK
INFO Calling Postcoder API for HK postcode: E
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/E HTTP/1.1" 429 60
ERROR Postcoder API HTTP error for HK postcode E: 429 Client Error: Too Many Requests for url: https://ws.postcoder.com/pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/E
INFO [POSTCODER] FAILED (API) E: 0 addresses in 286ms
Internal Server Error: /api/utils/address-lookup/
ERROR Internal Server Error: /api/utils/address-lookup/
[05/Nov/2025 14:22:15] "GET /api/utils/address-lookup/?postcode=e&country=HK HTTP/1.1" 500 172
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/E HTTP/1.1" 429 60
ERROR Postcoder API HTTP error for HK postcode E: 429 Client Error: Too Many Requests for url: https://ws.postcoder.com/pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/E
INFO [POSTCODER] FAILED (API) E: 0 addresses in 161ms
Internal Server Error: /api/utils/address-lookup/
ERROR Internal Server Error: /api/utils/address-lookup/
[05/Nov/2025 14:22:15] "GET /api/utils/address-lookup/?postcode=e&country=HK HTTP/1.1" 500 172
INFO Cache MISS for postcode T_HK
INFO Calling Postcoder API for HK postcode: T
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/T HTTP/1.1" 429 60
ERROR Postcoder API HTTP error for HK postcode T: 429 Client Error: Too Many Requests for url: https://ws.postcoder.com/pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/T
INFO [POSTCODER] FAILED (API) T: 0 addresses in 183ms
Internal Server Error: /api/utils/address-lookup/
ERROR Internal Server Error: /api/utils/address-lookup/
[05/Nov/2025 14:22:15] "GET /api/utils/address-lookup/?postcode=t&country=HK HTTP/1.1" 500 172
INFO Cache HIT for postcode 2_HK (hits: 6)
INFO [POSTCODER] SUCCESS (cached) 2: 150 addresses in 67ms
[05/Nov/2025 14:22:34] "GET /api/utils/address-lookup/?postcode=2&country=HK HTTP/1.1" 200 46232
INFO Cache HIT for postcode 2_HK (hits: 7)
INFO [POSTCODER] SUCCESS (cached) 2: 150 addresses in 76ms
[05/Nov/2025 14:22:35] "GET /api/utils/address-lookup/?postcode=2&country=HK HTTP/1.1" 200 46232
[05/Nov/2025 14:22:43] "GET /api/countries/ HTTP/1.1" 200 27171
[05/Nov/2025 14:22:43] "GET /api/countries/ HTTP/1.1" 200 27171
[05/Nov/2025 14:22:43] "OPTIONS /api/subjects/ HTTP/1.1" 200 0
[05/Nov/2025 14:22:43] "OPTIONS /api/products/navbar-product-groups/ HTTP/1.1" 200 0
[05/Nov/2025 14:22:43] "OPTIONS /api/products/distance-learning-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 14:22:43] "OPTIONS /api/products/navbar-product-groups/ HTTP/1.1" 200 0
[05/Nov/2025 14:22:43] "OPTIONS /api/subjects/ HTTP/1.1" 200 0
[05/Nov/2025 14:22:43] "OPTIONS /api/products/distance-learning-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 14:22:43] "OPTIONS /api/products/tutorial-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 14:22:43] "OPTIONS /api/cart HTTP/1.1" 200 0
[05/Nov/2025 14:22:43] "OPTIONS /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 0
[05/Nov/2025 14:22:43] "OPTIONS /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 0
[05/Nov/2025 14:22:43] "OPTIONS /api/products/tutorial-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 14:22:43] "OPTIONS /api/cart HTTP/1.1" 200 0
[05/Nov/2025 14:22:43] "GET /api/subjects/ HTTP/1.1" 200 2286
[05/Nov/2025 14:22:44] "GET /api/products/distance-learning-dropdown/ HTTP/1.1" 200 1819
[05/Nov/2025 14:22:44] "GET /api/products/navbar-product-groups/ HTTP/1.1" 200 3064
[05/Nov/2025 14:22:44] "GET /api/products/navbar-product-groups/ HTTP/1.1" 200 3064
[05/Nov/2025 14:22:44] "GET /api/subjects/ HTTP/1.1" 200 2286
[05/Nov/2025 14:22:44] "GET /api/products/distance-learning-dropdown/ HTTP/1.1" 200 1819
[05/Nov/2025 14:22:44] "GET /api/products/tutorial-dropdown/ HTTP/1.1" 200 1748
[05/Nov/2025 14:22:44] "GET /api/cart HTTP/1.1" 301 0
[05/Nov/2025 14:22:44] "GET /api/products/tutorial-dropdown/ HTTP/1.1" 200 1748
[05/Nov/2025 14:22:44] "GET /api/cart HTTP/1.1" 301 0
[05/Nov/2025 14:22:44] "OPTIONS /api/cart/ HTTP/1.1" 200 0
[05/Nov/2025 14:22:44] "OPTIONS /api/cart/ HTTP/1.1" 200 0
WARNING get_vat_calculations() is deprecated. Use get_vat_totals() instead. This method will be removed in a future version.
[05/Nov/2025 14:22:44] "GET /api/cart/ HTTP/1.1" 200 16043
WARNING get_vat_calculations() is deprecated. Use get_vat_totals() instead. This method will be removed in a future version.
[05/Nov/2025 14:22:45] "GET /api/cart/ HTTP/1.1" 200 16043
[05/Nov/2025 14:22:48] "GET /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 58431
[05/Nov/2025 14:22:48] "GET /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 58431
[05/Nov/2025 14:22:55] "GET /api/countries HTTP/1.1" 301 0
[05/Nov/2025 14:22:55] "GET /api/countries HTTP/1.1" 301 0
[05/Nov/2025 14:22:55] "GET /api/countries/ HTTP/1.1" 200 27171
[05/Nov/2025 14:22:55] "GET /api/countries/ HTTP/1.1" 200 27171
INFO Cache MISS for postcode 1_HK
INFO Calling Postcoder API for HK postcode: 1
DEBUG Starting new HTTPS connection (1): ws.postcoder.com:443
DEBUG https://ws.postcoder.com:443 "GET /pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/1 HTTP/1.1" 429 60
ERROR Postcoder API HTTP error for HK postcode 1: 429 Client Error: Too Many Requests for url: https://ws.postcoder.com/pcw/PCWZ9-BBRBH-KK5BY-FYSEU/address/hk/1
INFO [POSTCODER] FAILED (API) 1: 0 addresses in 185ms
Internal Server Error: /api/utils/address-lookup/
ERROR Internal Server Error: /api/utils/address-lookup/
[05/Nov/2025 14:23:03] "GET /api/utils/address-lookup/?postcode=1&country=HK HTTP/1.1" 500 172
INFO Cache HIT for postcode 2_HK (hits: 8)
INFO [POSTCODER] SUCCESS (cached) 2: 150 addresses in 81ms
[05/Nov/2025 14:23:03] "GET /api/utils/address-lookup/?postcode=2&country=HK HTTP/1.1" 200 46232
[05/Nov/2025 14:32:24] "OPTIONS /api/subjects/ HTTP/1.1" 200 0
[05/Nov/2025 14:32:24] "OPTIONS /api/cart HTTP/1.1" 200 0
[05/Nov/2025 14:32:24] "OPTIONS /api/products/navbar-product-groups/ HTTP/1.1" 200 0
[05/Nov/2025 14:32:24] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 14:32:24] "OPTIONS /api/products/distance-learning-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 14:32:24] "OPTIONS /api/products/tutorial-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 14:32:24] "OPTIONS /api/products/navbar-product-groups/ HTTP/1.1" 200 0
[05/Nov/2025 14:32:24] "OPTIONS /api/subjects/ HTTP/1.1" 200 0
[05/Nov/2025 14:32:24] "OPTIONS /api/products/distance-learning-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 14:32:24] "OPTIONS /api/products/tutorial-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 14:32:24] "OPTIONS /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 0
[05/Nov/2025 14:32:24] "OPTIONS /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 0
[05/Nov/2025 14:32:24] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 14:32:24] "OPTIONS /api/cart HTTP/1.1" 200 0
[05/Nov/2025 14:32:25] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
DEBUG Cache miss for rules:product_list_mount
DEBUG Cached 1 rules for product_list_mount
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
[05/Nov/2025 14:32:25] "GET /api/subjects/ HTTP/1.1" 200 2286
DEBUG Stored execution record: exec_1762353145_78c62963
[05/Nov/2025 14:32:25] "GET /api/products/navbar-product-groups/ HTTP/1.1" 200 3064
[05/Nov/2025 14:32:25] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1421
INFO [SEARCH] Received filters: {'subjects': [], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
[05/Nov/2025 14:32:25] "GET /api/products/distance-learning-dropdown/ HTTP/1.1" 200 1819
[05/Nov/2025 14:32:25] "GET /api/cart HTTP/1.1" 301 0
[05/Nov/2025 14:32:25] "GET /api/products/tutorial-dropdown/ HTTP/1.1" 200 1748
[05/Nov/2025 14:32:25] "OPTIONS /api/cart/ HTTP/1.1" 200 0
[05/Nov/2025 14:32:25] "GET /api/products/distance-learning-dropdown/ HTTP/1.1" 200 1819
[05/Nov/2025 14:32:25] "GET /api/products/tutorial-dropdown/ HTTP/1.1" 200 1748
[05/Nov/2025 14:32:25] "GET /api/cart HTTP/1.1" 301 0
[05/Nov/2025 14:32:25] "GET /api/subjects/ HTTP/1.1" 200 2286
[05/Nov/2025 14:32:25] "GET /api/products/navbar-product-groups/ HTTP/1.1" 200 3064
[05/Nov/2025 14:32:26] "OPTIONS /api/cart/ HTTP/1.1" 200 0
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762353146_ae864c4a
WARNING get_vat_calculations() is deprecated. Use get_vat_totals() instead. This method will be removed in a future version.
[05/Nov/2025 14:32:26] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1437
[05/Nov/2025 14:32:26] "GET /api/cart/ HTTP/1.1" 200 16043
WARNING get_vat_calculations() is deprecated. Use get_vat_totals() instead. This method will be removed in a future version.
[05/Nov/2025 14:32:26] "GET /api/cart/ HTTP/1.1" 200 16043
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 158, in search_products
    logger.info(f'\U0001f50d [BUNDLES] Included {len(bundles_data)} bundles, {len(products_data) - len(bundles_data)} products')
Message: '\U0001f50d [BUNDLES] Included 22 bundles, -2 products'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 172, in search_products
    filter_counts = self._generate_optimized_filter_counts(filters, base_queryset, base_bundles_queryset)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 620, in _generate_optimized_filter_counts
    logger.info(f'\U0001f50d [FILTER-COUNTS] Added {bundle_count} bundles to Bundle category count')
Message: '\U0001f50d [FILTER-COUNTS] Added 22 bundles to Bundle category count'
Arguments: ()
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING SLOW SEARCH: 7.082s - Filters: {'subjects': [], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
WARNING Unified Product Search - Duration: 7.083s, Queries: 1346
[05/Nov/2025 14:32:32] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 25112
[05/Nov/2025 14:32:33] "GET /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 58775
[05/Nov/2025 14:32:33] "GET /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 58775
[05/Nov/2025 14:32:34] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
[05/Nov/2025 14:32:34] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762353154_d7a1a3b8
[05/Nov/2025 14:32:34] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1423
[05/Nov/2025 14:32:34] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 655
[05/Nov/2025 14:36:48] "OPTIONS /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 0
[05/Nov/2025 14:36:48] "OPTIONS /api/products/distance-learning-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 14:36:48] "OPTIONS /api/subjects/ HTTP/1.1" 200 0
[05/Nov/2025 14:36:48] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 14:36:48] "OPTIONS /api/products/navbar-product-groups/ HTTP/1.1" 200 0
[05/Nov/2025 14:36:48] "OPTIONS /api/products/tutorial-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 14:36:48] "OPTIONS /api/cart HTTP/1.1" 200 0
[05/Nov/2025 14:36:48] "OPTIONS /api/subjects/ HTTP/1.1" 200 0
[05/Nov/2025 14:36:48] "OPTIONS /api/products/distance-learning-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 14:36:48] "OPTIONS /api/products/navbar-product-groups/ HTTP/1.1" 200 0
[05/Nov/2025 14:36:48] "OPTIONS /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 0
[05/Nov/2025 14:36:48] "OPTIONS /api/products/tutorial-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 14:36:48] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 14:36:48] "OPTIONS /api/cart HTTP/1.1" 200 0
[05/Nov/2025 14:36:48] "GET /api/subjects/ HTTP/1.1" 200 2286
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
[05/Nov/2025 14:36:48] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
DEBUG Stored execution record: exec_1762353408_2752b636
[05/Nov/2025 14:36:49] "GET /api/products/navbar-product-groups/ HTTP/1.1" 200 3064
[05/Nov/2025 14:36:49] "GET /api/products/tutorial-dropdown/ HTTP/1.1" 200 1748
[05/Nov/2025 14:36:49] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1422
[05/Nov/2025 14:36:49] "GET /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 58775
[05/Nov/2025 14:36:49] "GET /api/subjects/ HTTP/1.1" 200 2286
INFO [SEARCH] Received filters: {'subjects': [], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
[05/Nov/2025 14:36:49] "GET /api/products/distance-learning-dropdown/ HTTP/1.1" 200 1819
[05/Nov/2025 14:36:49] "GET /api/cart HTTP/1.1" 301 0
[05/Nov/2025 14:36:49] "GET /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 58775
[05/Nov/2025 14:36:49] "GET /api/products/navbar-product-groups/ HTTP/1.1" 200 3064
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762353409_03ac33dd
[05/Nov/2025 14:36:49] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1436
[05/Nov/2025 14:36:49] "GET /api/products/distance-learning-dropdown/ HTTP/1.1" 200 1819
[05/Nov/2025 14:36:49] "OPTIONS /api/cart/ HTTP/1.1" 200 0
[05/Nov/2025 14:36:49] "GET /api/cart HTTP/1.1" 301 0
[05/Nov/2025 14:36:50] "OPTIONS /api/cart/ HTTP/1.1" 200 0
[05/Nov/2025 14:36:50] "GET /api/products/tutorial-dropdown/ HTTP/1.1" 200 1748
WARNING get_vat_calculations() is deprecated. Use get_vat_totals() instead. This method will be removed in a future version.
[05/Nov/2025 14:36:50] "GET /api/cart/ HTTP/1.1" 200 16043
WARNING get_vat_calculations() is deprecated. Use get_vat_totals() instead. This method will be removed in a future version.
[05/Nov/2025 14:36:50] "GET /api/cart/ HTTP/1.1" 200 16043
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 158, in search_products
    logger.info(f'\U0001f50d [BUNDLES] Included {len(bundles_data)} bundles, {len(products_data) - len(bundles_data)} products')
Message: '\U0001f50d [BUNDLES] Included 22 bundles, -2 products'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 172, in search_products
    filter_counts = self._generate_optimized_filter_counts(filters, base_queryset, base_bundles_queryset)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 620, in _generate_optimized_filter_counts
    logger.info(f'\U0001f50d [FILTER-COUNTS] Added {bundle_count} bundles to Bundle category count')
Message: '\U0001f50d [FILTER-COUNTS] Added 22 bundles to Bundle category count'
Arguments: ()
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING SLOW SEARCH: 5.306s - Filters: {'subjects': [], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
WARNING Unified Product Search - Duration: 5.306s, Queries: 1346
[05/Nov/2025 14:36:54] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 25112
[05/Nov/2025 14:36:57] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
[05/Nov/2025 14:36:57] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
[05/Nov/2025 14:36:57] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 655
DEBUG Stored execution record: exec_1762353417_c2983301
[05/Nov/2025 14:36:57] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1422
[05/Nov/2025 14:37:59] "OPTIONS /api/subjects/ HTTP/1.1" 200 0
[05/Nov/2025 14:37:59] "OPTIONS /api/products/navbar-product-groups/ HTTP/1.1" 200 0
[05/Nov/2025 14:37:59] "OPTIONS /api/products/distance-learning-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 14:37:59] "OPTIONS /api/products/tutorial-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 14:37:59] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 14:37:59] "OPTIONS /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 0
[05/Nov/2025 14:37:59] "OPTIONS /api/cart HTTP/1.1" 200 0
[05/Nov/2025 14:37:59] "OPTIONS /api/products/distance-learning-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 14:37:59] "OPTIONS /api/products/navbar-product-groups/ HTTP/1.1" 200 0
[05/Nov/2025 14:37:59] "OPTIONS /api/products/tutorial-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 14:37:59] "OPTIONS /api/subjects/ HTTP/1.1" 200 0
[05/Nov/2025 14:37:59] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 14:37:59] "OPTIONS /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 0
[05/Nov/2025 14:37:59] "OPTIONS /api/cart HTTP/1.1" 200 0
[05/Nov/2025 14:37:59] "GET /api/subjects/ HTTP/1.1" 200 2286
[05/Nov/2025 14:37:59] "GET /api/products/distance-learning-dropdown/ HTTP/1.1" 200 1819
[05/Nov/2025 14:37:59] "GET /api/products/navbar-product-groups/ HTTP/1.1" 200 3064
[05/Nov/2025 14:37:59] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
INFO [SEARCH] Received filters: {'subjects': [], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
DEBUG Cache miss for rules:product_list_mount
[05/Nov/2025 14:37:59] "GET /api/products/tutorial-dropdown/ HTTP/1.1" 200 1748
INFO [SEARCH] Products filter: []
DEBUG Cached 1 rules for product_list_mount
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762353479_2583116e
[05/Nov/2025 14:37:59] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1422
[05/Nov/2025 14:37:59] "GET /api/cart HTTP/1.1" 301 0
[05/Nov/2025 14:37:59] "GET /api/products/distance-learning-dropdown/ HTTP/1.1" 200 1819
[05/Nov/2025 14:37:59] "GET /api/products/navbar-product-groups/ HTTP/1.1" 200 3064
[05/Nov/2025 14:37:59] "GET /api/subjects/ HTTP/1.1" 200 2286
[05/Nov/2025 14:37:59] "OPTIONS /api/cart/ HTTP/1.1" 200 0
[05/Nov/2025 14:38:00] "GET /api/products/tutorial-dropdown/ HTTP/1.1" 200 1748
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762353480_04f6a739
[05/Nov/2025 14:38:00] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1436
[05/Nov/2025 14:38:00] "GET /api/cart HTTP/1.1" 301 0
[05/Nov/2025 14:38:00] "OPTIONS /api/cart/ HTTP/1.1" 200 0
WARNING get_vat_calculations() is deprecated. Use get_vat_totals() instead. This method will be removed in a future version.
[05/Nov/2025 14:38:00] "GET /api/cart/ HTTP/1.1" 200 16043
WARNING get_vat_calculations() is deprecated. Use get_vat_totals() instead. This method will be removed in a future version.
[05/Nov/2025 14:38:01] "GET /api/cart/ HTTP/1.1" 200 16043
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 158, in search_products
    logger.info(f'\U0001f50d [BUNDLES] Included {len(bundles_data)} bundles, {len(products_data) - len(bundles_data)} products')
Message: '\U0001f50d [BUNDLES] Included 22 bundles, -2 products'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 172, in search_products
    filter_counts = self._generate_optimized_filter_counts(filters, base_queryset, base_bundles_queryset)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 620, in _generate_optimized_filter_counts
    logger.info(f'\U0001f50d [FILTER-COUNTS] Added {bundle_count} bundles to Bundle category count')
Message: '\U0001f50d [FILTER-COUNTS] Added 22 bundles to Bundle category count'
Arguments: ()
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING SLOW SEARCH: 5.945s - Filters: {'subjects': [], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
WARNING Unified Product Search - Duration: 5.952s, Queries: 1346
[05/Nov/2025 14:38:05] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 25112
[05/Nov/2025 14:38:05] "GET /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 58775
[05/Nov/2025 14:38:06] "GET /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 58775
[05/Nov/2025 14:38:07] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 14:38:07] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762353487_e63aca50
[05/Nov/2025 14:38:08] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1422
[05/Nov/2025 14:38:08] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 655
[05/Nov/2025 14:38:30] "OPTIONS /api/subjects/ HTTP/1.1" 200 0
[05/Nov/2025 14:38:30] "OPTIONS /api/products/navbar-product-groups/ HTTP/1.1" 200 0
[05/Nov/2025 14:38:30] "OPTIONS /api/products/distance-learning-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 14:38:30] "OPTIONS /api/products/tutorial-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 14:38:30] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 14:38:30] "OPTIONS /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 0
[05/Nov/2025 14:38:30] "OPTIONS /api/cart HTTP/1.1" 200 0
[05/Nov/2025 14:38:30] "OPTIONS /api/subjects/ HTTP/1.1" 200 0
[05/Nov/2025 14:38:30] "OPTIONS /api/products/navbar-product-groups/ HTTP/1.1" 200 0
[05/Nov/2025 14:38:30] "GET /api/subjects/ HTTP/1.1" 200 2286
[05/Nov/2025 14:38:30] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762353510_2ff6650a
[05/Nov/2025 14:38:30] "GET /api/products/navbar-product-groups/ HTTP/1.1" 200 3064
[05/Nov/2025 14:38:30] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1435
[05/Nov/2025 14:38:30] "OPTIONS /api/products/distance-learning-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 14:38:30] "GET /api/products/tutorial-dropdown/ HTTP/1.1" 200 1748
[05/Nov/2025 14:38:30] "OPTIONS /api/products/tutorial-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 14:38:30] "OPTIONS /api/cart HTTP/1.1" 200 0
[05/Nov/2025 14:38:30] "GET /api/products/distance-learning-dropdown/ HTTP/1.1" 200 1819
[05/Nov/2025 14:38:30] "OPTIONS /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 0
[05/Nov/2025 14:38:30] "GET /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 58775
[05/Nov/2025 14:38:30] "GET /api/subjects/ HTTP/1.1" 200 2286
[05/Nov/2025 14:38:30] "GET /api/cart HTTP/1.1" 301 0
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762353510_82e4458c
[05/Nov/2025 14:38:30] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1421
[05/Nov/2025 14:38:30] "GET /api/products/navbar-product-groups/ HTTP/1.1" 200 3064
[05/Nov/2025 14:38:31] "GET /api/products/distance-learning-dropdown/ HTTP/1.1" 200 1819
[05/Nov/2025 14:38:31] "GET /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 58775
[05/Nov/2025 14:38:31] "GET /api/products/tutorial-dropdown/ HTTP/1.1" 200 1748
[05/Nov/2025 14:38:31] "GET /api/cart HTTP/1.1" 301 0
[05/Nov/2025 14:38:31] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
INFO [SEARCH] Received filters: {'subjects': [], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
[05/Nov/2025 14:38:31] "OPTIONS /api/cart/ HTTP/1.1" 200 0
[05/Nov/2025 14:38:31] "OPTIONS /api/cart/ HTTP/1.1" 200 0
WARNING get_vat_calculations() is deprecated. Use get_vat_totals() instead. This method will be removed in a future version.
WARNING get_vat_calculations() is deprecated. Use get_vat_totals() instead. This method will be removed in a future version.
[05/Nov/2025 14:38:31] "GET /api/cart/ HTTP/1.1" 200 16043
[05/Nov/2025 14:38:31] "GET /api/cart/ HTTP/1.1" 200 16043
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 158, in search_products
    logger.info(f'\U0001f50d [BUNDLES] Included {len(bundles_data)} bundles, {len(products_data) - len(bundles_data)} products')
Message: '\U0001f50d [BUNDLES] Included 22 bundles, -2 products'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 172, in search_products
    filter_counts = self._generate_optimized_filter_counts(filters, base_queryset, base_bundles_queryset)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 620, in _generate_optimized_filter_counts
    logger.info(f'\U0001f50d [FILTER-COUNTS] Added {bundle_count} bundles to Bundle category count')
Message: '\U0001f50d [FILTER-COUNTS] Added 22 bundles to Bundle category count'
Arguments: ()
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING SLOW SEARCH: 4.332s - Filters: {'subjects': [], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
WARNING Unified Product Search - Duration: 4.333s, Queries: 1346
[05/Nov/2025 14:38:35] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 25112
[05/Nov/2025 14:38:37] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
[05/Nov/2025 14:38:37] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
[05/Nov/2025 14:38:37] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 655
DEBUG Stored execution record: exec_1762353517_bcf8cb44
[05/Nov/2025 14:38:37] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1421
[05/Nov/2025 14:44:22] "OPTIONS /api/subjects/ HTTP/1.1" 200 0
[05/Nov/2025 14:44:22] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 14:44:22] "OPTIONS /api/products/navbar-product-groups/ HTTP/1.1" 200 0
[05/Nov/2025 14:44:22] "OPTIONS /api/cart HTTP/1.1" 200 0
[05/Nov/2025 14:44:22] "OPTIONS /api/products/distance-learning-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 14:44:22] "OPTIONS /api/subjects/ HTTP/1.1" 200 0
[05/Nov/2025 14:44:22] "OPTIONS /api/products/navbar-product-groups/ HTTP/1.1" 200 0
[05/Nov/2025 14:44:22] "OPTIONS /api/products/tutorial-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 14:44:22] "OPTIONS /api/products/distance-learning-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 14:44:22] "OPTIONS /api/products/tutorial-dropdown/ HTTP/1.1" 200 0
[05/Nov/2025 14:44:22] "OPTIONS /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 0
[05/Nov/2025 14:44:22] "OPTIONS /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 0
[05/Nov/2025 14:44:22] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
[05/Nov/2025 14:44:22] "OPTIONS /api/cart HTTP/1.1" 200 0
DEBUG Cache miss for rules:product_list_mount
DEBUG Cached 1 rules for product_list_mount
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762353862_48042d10
[05/Nov/2025 14:44:22] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1422
[05/Nov/2025 14:44:22] "OPTIONS /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 0
[05/Nov/2025 14:44:22] "GET /api/cart HTTP/1.1" 301 0
[05/Nov/2025 14:44:22] "GET /api/subjects/ HTTP/1.1" 200 2286
[05/Nov/2025 14:44:22] "GET /api/products/distance-learning-dropdown/ HTTP/1.1" 200 1819
INFO [SEARCH] Received filters: {'subjects': [], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
INFO [SEARCH] Products filter: []
[05/Nov/2025 14:44:22] "GET /api/subjects/ HTTP/1.1" 200 2286
[05/Nov/2025 14:44:22] "GET /api/products/navbar-product-groups/ HTTP/1.1" 200 3064
[05/Nov/2025 14:44:22] "GET /api/products/navbar-product-groups/ HTTP/1.1" 200 3064
[05/Nov/2025 14:44:22] "OPTIONS /api/cart/ HTTP/1.1" 200 0
[05/Nov/2025 14:44:23] "GET /api/products/tutorial-dropdown/ HTTP/1.1" 200 1748
[05/Nov/2025 14:44:23] "GET /api/products/distance-learning-dropdown/ HTTP/1.1" 200 1819
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762353863_35f8232b
[05/Nov/2025 14:44:23] "GET /api/cart HTTP/1.1" 301 0
[05/Nov/2025 14:44:23] "GET /api/products/tutorial-dropdown/ HTTP/1.1" 200 1748
[05/Nov/2025 14:44:23] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1422
[05/Nov/2025 14:44:23] "OPTIONS /api/cart/ HTTP/1.1" 200 0
WARNING get_vat_calculations() is deprecated. Use get_vat_totals() instead. This method will be removed in a future version.
[05/Nov/2025 14:44:24] "GET /api/cart/ HTTP/1.1" 200 16043
WARNING get_vat_calculations() is deprecated. Use get_vat_totals() instead. This method will be removed in a future version.
[05/Nov/2025 14:44:24] "GET /api/cart/ HTTP/1.1" 200 16043
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 158, in search_products
    logger.info(f'\U0001f50d [BUNDLES] Included {len(bundles_data)} bundles, {len(products_data) - len(bundles_data)} products')
Message: '\U0001f50d [BUNDLES] Included 22 bundles, -2 products'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 5: character maps to <undefined>
Call stack:
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 691, in process_request_thread
    self.finish_request(request, client_address)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 361, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\socketserver.py", line 755, in __init__
    self.handle()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 230, in handle
    self.handle_one_request()
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\servers\basehttp.py", line 253, in handle_one_request
    handler.run(self.server.get_app())
  File "C:\Users\elo\AppData\Local\Programs\Python\Python311\Lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\contrib\staticfiles\handlers.py", line 80, in __call__
    return self.application(environ, start_response)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\wsgi.py", line 124, in __call__
    response = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 140, in get_response
    response = self._middleware_chain(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\corsheaders\middleware.py", line 53, in __call__
    result = self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\utils\deprecation.py", line 120, in __call__
    response = response or self.get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Code\Admin3\.venv\Lib\site-packages\rest_framework\views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\middleware\query_performance.py", line 148, in wrapper
    return func(*args, **kwargs)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\views.py", line 784, in unified_search
    result = optimized_search_service.search_products(
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 172, in search_products
    filter_counts = self._generate_optimized_filter_counts(filters, base_queryset, base_bundles_queryset)
  File "C:\Code\Admin3\backend\django_Admin3\exam_sessions_subjects_products\services\optimized_search_service.py", line 620, in _generate_optimized_filter_counts
    logger.info(f'\U0001f50d [FILTER-COUNTS] Added {bundle_count} bundles to Bundle category count')
Message: '\U0001f50d [FILTER-COUNTS] Added 22 bundles to Bundle category count'
Arguments: ()
INFO [FILTER-COUNTS] No products filter in applied_filters: dict_keys(['subjects', 'categories', 'product_types', 'products', 'modes_of_delivery'])
WARNING SLOW SEARCH: 10.015s - Filters: {'subjects': [], 'categories': [], 'product_types': [], 'products': [], 'modes_of_delivery': []}
WARNING Unified Product Search - Duration: 10.019s, Queries: 1346
[05/Nov/2025 14:44:32] "POST /api/exam-sessions-subjects-products/search/ HTTP/1.1" 200 25113
[05/Nov/2025 14:44:33] "GET /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 58775
[05/Nov/2025 14:44:34] "GET /api/products/current/list/?page=1&page_size=50 HTTP/1.1" 200 58775
[05/Nov/2025 14:44:35] "OPTIONS /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 0
[05/Nov/2025 14:44:35] "OPTIONS /api/rules/engine/execute/ HTTP/1.1" 200 0
DEBUG Cache hit for rules:product_list_mount: 1 rules
DEBUG No schema validation - context keys: ['page', 'products', 'request']
DEBUG Always-true condition evaluated to True
DEBUG Stored execution record: exec_1762353875_98076219
[05/Nov/2025 14:44:35] "POST /api/rules/engine/execute/ HTTP/1.1" 200 1408
[05/Nov/2025 14:44:35] "POST /api/markings/papers/bulk-deadlines/ HTTP/1.1" 200 655
[05/Nov/2025 14:44:46] "GET /api/countries/ HTTP/1.1" 200 27171
[05/Nov/2025 14:44:46] "GET /api/countries/ HTTP/1.1" 200 27171
[05/Nov/2025 14:44:57] "GET /api/countries HTTP/1.1" 301 0
[05/Nov/2025 14:44:57] "GET /api/countries HTTP/1.1" 301 0
[05/Nov/2025 14:44:57] "GET /api/countries/ HTTP/1.1" 200 27171
[05/Nov/2025 14:44:57] "GET /api/countries/ HTTP/1.1" 200 27171
INFO Cache HIT for postcode 2_HK (hits: 9)
INFO [POSTCODER] SUCCESS (cached) 2: 150 addresses in 76ms
[05/Nov/2025 14:45:05] "GET /api/utils/address-lookup/?postcode=2&country=HK HTTP/1.1" 200 46232
INFO Cache HIT for postcode 2_HK (hits: 10)
INFO [POSTCODER] SUCCESS (cached) 2: 150 addresses in 205ms
[05/Nov/2025 14:45:06] "GET /api/utils/address-lookup/?postcode=2&country=HK HTTP/1.1" 200 46233
INFO Cache HIT for postcode Y_HK (hits: 3)
INFO [POSTCODER] SUCCESS (cached) Y: 11 addresses in 70ms
[05/Nov/2025 14:45:08] "GET /api/utils/address-lookup/?postcode=Y&country=HK HTTP/1.1" 200 3768
INFO Cache HIT for postcode I_HK (hits: 3)
INFO [POSTCODER] SUCCESS (cached) I: 10 addresses in 77ms
[05/Nov/2025 14:45:08] "GET /api/utils/address-lookup/?postcode=i&country=HK HTTP/1.1" 200 3522
INFO Cache HIT for postcode N_HK (hits: 5)
INFO [POSTCODER] SUCCESS (cached) N: 14 addresses in 81ms
[05/Nov/2025 14:45:09] "GET /api/utils/address-lookup/?postcode=n&country=HK HTTP/1.1" 200 5050
DJANGO_ENV None
DJANGO_ENV development
DJANGO_SETTINGS_MODULE django_Admin3.settings.development
DJANGO_ENV FILE C:\Code\Admin3\backend\django_Admin3\.env.development
Loading environment from: C:\Code\Admin3\backend\django_Admin3\.env.development
