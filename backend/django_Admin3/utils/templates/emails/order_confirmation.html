{% extends "emails/base_email.html" %}

{% block title %}Order Confirmation - Admin3{% endblock %}

{% block header_title %}Order Confirmed!{% endblock %}
{% block header_subtitle %}Thank you for your purchase{% endblock %}

{% block content %}
<h2>Hello {{ customer_name }}!</h2>

<p>Thank you for your order! We're excited to confirm that your order has been successfully placed and is being processed.</p>

<div style="background-color: #e8f5e8; padding: 20px; border-radius: 6px; margin: 20px 0; border-left: 4px solid #28a745;">
    <h3 style="color: #155724; margin: 0 0 10px 0;">Order Summary</h3>
    <p style="margin: 5px 0; color: #155724;"><strong>Order Number:</strong> #{{ order_number }}</p>
    <p style="margin: 5px 0; color: #155724;"><strong>Order Date:</strong> {{ order.created_at|date:"F d, Y" }}</p>
    <p style="margin: 5px 0; color: #155724;"><strong>Total Amount:</strong> £{{ order_total|floatformat:2 }}</p>
</div>

<h3>Order Details</h3>

{% if order_items %}
<table class="order-table">
    <thead>
        <tr>
            <th>Product</th>
            <th>Subject</th>
            <th>Session</th>
            <th style="text-align: center;">Qty</th>
            <th style="text-align: right;">Price</th>
            <th style="text-align: right;">Total</th>
        </tr>
    </thead>
    <tbody>
        {% for item in order_items %}
        <tr>
            <td><strong>{{ item.product_name }}</strong></td>
            <td>{{ item.subject_code|default:"N/A" }}</td>
            <td>{{ item.session_code|default:"N/A" }}</td>
            <td style="text-align: center;">{{ item.quantity }}</td>
            <td style="text-align: right;">£{{ item.actual_price|floatformat:2 }}</td>
            <td style="text-align: right;">£{{ item.line_total|floatformat:2 }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<div class="order-total">
    <div class="total-row">
        <span>Subtotal:</span>
        <span>£{{ order.subtotal|floatformat:2 }}</span>
    </div>
    {% if order.vat_amount %}
    <div class="total-row">
        <span>VAT ({{ order.vat_rate|floatformat:1 }}%):</span>
        <span>£{{ order.vat_amount|floatformat:2 }}</span>
    </div>
    {% endif %}
    {% if order.discount_amount %}
    <div class="total-row">
        <span>Discount:</span>
        <span>-£{{ order.discount_amount|floatformat:2 }}</span>
    </div>
    {% endif %}
    <div class="total-row final">
        <span>Total:</span>
        <span>£{{ order_total|floatformat:2 }}</span>
    </div>
</div>
{% endif %}

<h3>What's Next?</h3>
<p>Your order is now being processed by our team. Here's what you can expect:</p>

<div style="background-color: #f8f9fa; padding: 20px; border-radius: 6px; margin: 20px 0;">
    <ol style="margin: 0; padding-left: 20px;">
        <li style="margin-bottom: 10px;"><strong>Processing:</strong> We'll prepare your order and materials within 1-2 business days.</li>
        <li style="margin-bottom: 10px;"><strong>Access:</strong> Digital materials will be available in your account portal.</li>
        <li style="margin-bottom: 10px;"><strong>Shipping:</strong> Physical materials (if any) will be dispatched via our preferred courier.</li>
        <li style="margin-bottom: 10px;"><strong>Updates:</strong> You'll receive email notifications at each step of the process.</li>
    </ol>
</div>

<div style="text-align: center; margin: 30px 0;">
    <a href="{{ base_url }}/orders/{{ order_number }}" class="btn">View Order Details</a>
</div>

<h3>Need Help?</h3>
<p>If you have any questions about your order or need assistance, please don't hesitate to contact our support team:</p>

<div style="background-color: #f0f8ff; padding: 20px; border-radius: 6px; margin: 20px 0; border-left: 4px solid #007bff;">
    <p style="margin: 5px 0;"><strong>Email:</strong> <a href="mailto:support@admin3.com">support@admin3.com</a></p>
    <p style="margin: 5px 0;"><strong>Phone:</strong> +44 (0) 20 1234 5678</p>
    <p style="margin: 5px 0;"><strong>Hours:</strong> Monday - Friday, 9:00 AM - 6:00 PM GMT</p>
</div>

<p>Thank you for choosing Admin3 for your professional education needs. We're committed to helping you achieve your learning goals!</p>

<p style="margin-top: 30px;">
    Best regards,<br>
    <strong>The Admin3 Team</strong>
</p>
{% endblock %} 