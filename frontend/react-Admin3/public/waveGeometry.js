(() => { function t(t, e, s) { let i = s / 2, o = Math.sin(i), n = e.x * o, r = e.y * o, l = e.z * o, f = Math.cos(i), a = f * t.x + r * t.z - l * t.y, u = f * t.y + l * t.x - n * t.z, y = f * t.z + n * t.y - r * t.x, h = -n * t.x - r * t.y - l * t.z; return { x: a * f + -(h * n) + -(u * l) - -(y * r), y: u * f + -(h * r) + -(y * n) - -(a * l), z: y * f + -(h * l) + -(a * r) - -(u * n) } } if ("u" > typeof self && "function" == typeof self.importScripts) { let e = self; e.onmessage = s => { let i = function (e) { let { width: s, height: i, subdivisionsX: o, subdivisionsY: n } = e, { positions: r, uvs: l, indices: f } = function (t, e, s, i) { let o = t / 2, n = e / 2, r = s + 1, l = i + 1, f = t / s, a = e / i, u = r * l, y = new Float32Array(3 * u), h = new Float32Array(2 * u), c = 0, x = 0; for (let t = 0; t < l; t += 1) { let e = t * a - n; for (let n = 0; n < r; n += 1) { let r = n * f - o; y[c] = r, y[c + 1] = -e, y[c + 2] = 0, c += 3, h[x] = n / s, h[x + 1] = 1 - t / i, x += 2 } } let z = new Uint32Array(s * i * 6), M = 0; for (let t = 0; t < i; t += 1)for (let e = 0; e < s; e += 1) { let s = e + r * t, i = e + r * (t + 1), o = e + 1 + r * (t + 1), n = e + 1 + r * t; z[M] = s, z[M + 1] = i, z[M + 2] = n, z[M + 3] = i, z[M + 4] = o, z[M + 5] = n, M += 6 } return { positions: y, uvs: h, indices: z } }(s, i, o, n), a = { x: 1, y: 0, z: 0 }, u = { x: 0, y: 1, z: 0 }, y = r.length / 3; for (let e = 0; e < y; e += 1) { var h, c, x; let i = 3 * e, o = 2 * e, n = r[i], f = r[i + 1], y = r[i + 2], z = 4 - 2 * (4 * (h = l[o + 1]) * (1 - h)) ** 9.5; n < -16 ? y += z : n < 16 ? (y = Math.cos(0 + (n - -16) * (Math.PI - 0) / 32) * z, n = Math.cos((c = n, (x = -Math.PI / 2) + (c - -16) * (Math.PI / 2 - x) / 32)) * z - 16) : (y -= z, n = -n); let M = { x: n += s / 4, y: f, z: y }; M = t(M, a, -Math.PI / 2), M = t(M, u, -Math.PI / 2), r[i] = M.x, r[i + 1] = M.y, r[i + 2] = M.z } let z = new Float32Array(3 * y); for (let t = 0; t < y; t += 1)z[3 * t] = 0, z[3 * t + 1] = 0, z[3 * t + 2] = 1; return { positions: r, uvs: l, normals: z, indices: f } }(s.data); e.postMessage(i, [i.positions.buffer, i.uvs.buffer, i.normals.buffer, i.indices.buffer]) } } })();