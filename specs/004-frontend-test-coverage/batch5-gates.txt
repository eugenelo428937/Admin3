
> admin3@0.1.1 test
> react-scripts test --coverage --runInBand --testPathPattern=src/__tests__

FAIL src/__tests__/e2e/vatDisplay.e2e.test.js (8.521 s)
  ‚óè Phase 8 VAT Display - End-to-End ‚Ä∫ CartSummaryPanel - VAT Display ‚Ä∫ UK user sees 20% VAT throughout cart

    Found multiple elements with the text: /120\.00/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<h6[39m
      [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
    [36m>[39m
      [0m¬£[0m
      [0m120.00[0m
    [36m</h6>[39m

    Ignored nodes: comments, script, style
    [36m<h6[39m
      [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
    [36m>[39m
      [0m¬£[0m
      [0m120.00[0m
    [36m</h6>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 MuiCard-root css-1swdb20-MuiPaper-root-MuiCard-root"[39m
          [33mstyle[39m=[32m"--Paper-shadow: 0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"MuiCardHeader-root css-b8y68j-MuiCardHeader-root"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"MuiCardHeader-content css-1jkp9bu-MuiCardHeader-content"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"MuiTypography-root MuiTypography-h5 MuiCardHeader-title css-16xl4zq-MuiTypography-root"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"MuiBox-root css-69i1ev"[39m
                [36m>[39m
                  [36m<h2[39m
                    [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-1miy0lu-MuiTypography-root"[39m
                  [36m>[39m
                    [0mOrder Summary[0m
                  [36m</h2>[39m
                  [36m<button[39m
                    [33maria-label[39m=[32m"expand cart summary"[39m
                    [33mclass[39m=[32m"MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall css-155wbr6-MuiButtonBase-root-MuiIconButton-root"[39m
                    [33mtabindex[39m=[32m"0"[39m
                    [33mtype[39m=[32m"button"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33maria-hidden[39m=[32m"true"[39m
                      [33mclass[39m=[32m"MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-1umw9bq-MuiSvgIcon-root"[39m
                      [33mdata-testid[39m=[32m"ExpandMoreIcon"[39m
                      [33mfocusable[39m=[32m"false"[39m
                      [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [36m>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"[39m
                      [36m/>[39m
                    [36m</svg>[39m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</span>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"MuiCardContent-root css-1lt5qva-MuiCardContent-root"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-19b5ozw-MuiTypography-root"[39m
            [36m>[39m
              [0m1[0m
              [0m [0m
              [0mitem[0m
            [36m</p>[39m
            [36m<div[39m
              [33mclass[39m=[32m"MuiCollapse-root MuiCollapse-vertical MuiCollapse-hidden css-cwrbtg-MuiCollapse-root"[39m
              [33mstyle[39m=[32m"min-height: 0px;"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"MuiCollapse-wrapper MuiCollapse-vertical css-1x6hinx-MuiCollapse-wrapper"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"MuiCollapse-wrapperInner MuiCollapse-vertical css-1i4ywhz-MuiCollapse-wrapperInner"[39m
                [36m>[39m
                  [36m<table[39m
                    [33mclass[39m=[32m"MuiTable-root css-1xwxv7r-MuiTable-root"[39m
                  [36m>[39m
                    [36m<thead[39m
                      [33mclass[39m=[32m"MuiTableHead-root css-1a7iywq-MuiTableHead-root"[39m
                    [36m>[39m
                      [36m<tr[39m
                        [33mclass[39m=[32m"MuiTableRow-root MuiTableRow-head css-1xtozoh-MuiTableRow-root"[39m
                      [36m>[39m
                        [36m<th[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-head MuiTableCell-sizeSmall css-g6bqb5-MuiTableCell-root"[39m
                          [33mscope[39m=[32m"col"[39m
                        [36m>[39m
                          [0mProduct[0m
                        [36m</th>[39m
                        [36m<th[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-head MuiTableCell-alignCenter MuiTableCell-sizeSmall css-m4o53m-MuiTableCell-root"[39m
                          [33mscope[39m=[32m"col"[39m
                        [36m>[39m
                          [0mQty[0m
                        [36m</th>[39m
                        [36m<th[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-head MuiTableCell-alignRight MuiTableCell-sizeSmall css-1ais0ar-MuiTableCell-root"[39m
                          [33mscope[39m=[32m"col"[39m
                        [36m>[39m
                          [0mTotal[0m
                        [36m</th>[39m
                      [36m</tr>[39m
                    [36m</thead>[39m
                    [36m<tbody[39m
                      [33mclass[39m=[32m"MuiTableBody-root css-gmh7jj-MuiTableBody-root"[39m
                    [36m>[39m
                      [36m<tr[39m
                        [33mclass[39m=[32m"MuiTableRow-root css-1xtozoh-MuiTableRow-root"[39m
                      [36m>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall css-jiabcu-MuiTableCell-root"[39m
                        [36m>[39m
                          [36m<p[39m
                            [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-1a40gj6-MuiTypography-root"[39m
                          [36m>[39m
                            [0mPrinted Material[0m
                          [36m</p>[39m
                          [36m<span[39m
                            [33mclass[39m=[32m"MuiTypography-root MuiTypography-caption css-1374baf-MuiTypography-root"[39m
                          [36m>[39m
                            [0mCS1[0m
                            [0m ‚Ä¢ [0m
                            [0mPrinted[0m
                          [36m</span>[39m
                          [36m<br />[39m
                          [36m<code[39m
                            [33mclass[39m=[32m"MuiTypography-root MuiTypography-caption css-mpaqru-MuiTypography-root"[39m
                          [36m>[39m
                            [0mN/A[0m
                          [36m</code>[39m
                        [36m</td>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-body MuiTableCell-alignCenter MuiTableCell-sizeSmall css-wsxt5g-MuiTableCell-root"[39m
                        [36m>[39m
                          [0m1[0m
                        [36m</td>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-body MuiTableCell-alignRight MuiTableCell-sizeSmall css-17j8okc-MuiTableCell-root"[39m
                        [36m>[39m
                          [0m¬£[0m
                          [0m100.00[0m
                        [36m</td>[39m
                      [36m</tr>[39m
                    [36m</tbody>[39m
                  [36m</table>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"MuiBox-root css-1yuhvjn"[39m
                  [36m>[39m
                    [36m<hr[39m
                      [33mclass[39m=[32m"MuiDivider-root MuiDivider-fullWidth css-hv6zls-MuiDivider-root"[39m
                    [36m/>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"MuiBox-root css-gg4vpm"[39m
                    [36m>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
                      [36m>[39m
                        [0mSubtotal:[0m
                      [36m</p>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
                      [36m>[39m
                        [0m¬£[0m
                        [0m100.00[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"MuiBox-root css-gg4vpm"[39m
                    [36m>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
                      [36m>[39m
                        [0mVAT (20%)[0m
                        [0m:[0m
                      [36m</p>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
                      [36m>[39m
                        [0m¬£[0m
                        [0m20.00[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<hr[39m
                      [33mclass[39m=[32m"MuiDivider-root MuiDivider-fullWidth css-hv6zls-MuiDivider-root"[39m
                    [36m/>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"MuiBox-root css-gg4vpm"[39m
                    [36m>[39m
                      [36m<h6[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
                      [36m>[39m
                        [0mTotal:[0m
                      [36m</h6>[39m
                      [36m<h6[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
                      [36m>[39m
                        [0m¬£[0m
                        [0m120.00[0m
                      [36m</h6>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"MuiBox-root css-1yuhvjn"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"MuiBox-root css-gg4vpm"[39m
              [36m>[39m
                [36m<h6[39m
                  [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
                [36m>[39m
                  [0mTotal:[0m
                [36m</h6>[39m
                [36m<h6[39m
                  [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
                [36m>[39m
                  [0m¬£[0m
                  [0m120.00[0m
                [36m</h6>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 61 |[39m
     [90m 62 |[39m       [90m// Should display dynamic VAT (20%)[39m
    [31m[1m>[22m[39m[90m 63 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 64 |[39m         expect(screen[33m.[39mgetByText([35m/120\.00/[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m 65 |[39m       })[33m;[39m
     [90m 66 |[39m     })[33m;[39m[0m

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (src/__tests__/e2e/vatDisplay.e2e.test.js:63:20)

  ‚óè Phase 8 VAT Display - End-to-End ‚Ä∫ CartSummaryPanel - VAT Display ‚Ä∫ SA user sees 15% VAT

    Found multiple elements with the text: /115\.00/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<h6[39m
      [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
    [36m>[39m
      [0m¬£[0m
      [0m115.00[0m
    [36m</h6>[39m

    Ignored nodes: comments, script, style
    [36m<h6[39m
      [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
    [36m>[39m
      [0m¬£[0m
      [0m115.00[0m
    [36m</h6>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 MuiCard-root css-1swdb20-MuiPaper-root-MuiCard-root"[39m
          [33mstyle[39m=[32m"--Paper-shadow: 0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"MuiCardHeader-root css-b8y68j-MuiCardHeader-root"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"MuiCardHeader-content css-1jkp9bu-MuiCardHeader-content"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"MuiTypography-root MuiTypography-h5 MuiCardHeader-title css-16xl4zq-MuiTypography-root"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"MuiBox-root css-69i1ev"[39m
                [36m>[39m
                  [36m<h2[39m
                    [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-1miy0lu-MuiTypography-root"[39m
                  [36m>[39m
                    [0mOrder Summary[0m
                  [36m</h2>[39m
                  [36m<button[39m
                    [33maria-label[39m=[32m"expand cart summary"[39m
                    [33mclass[39m=[32m"MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall css-155wbr6-MuiButtonBase-root-MuiIconButton-root"[39m
                    [33mtabindex[39m=[32m"0"[39m
                    [33mtype[39m=[32m"button"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33maria-hidden[39m=[32m"true"[39m
                      [33mclass[39m=[32m"MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-1umw9bq-MuiSvgIcon-root"[39m
                      [33mdata-testid[39m=[32m"ExpandMoreIcon"[39m
                      [33mfocusable[39m=[32m"false"[39m
                      [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [36m>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"[39m
                      [36m/>[39m
                    [36m</svg>[39m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</span>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"MuiCardContent-root css-1lt5qva-MuiCardContent-root"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-19b5ozw-MuiTypography-root"[39m
            [36m>[39m
              [0m1[0m
              [0m [0m
              [0mitem[0m
            [36m</p>[39m
            [36m<div[39m
              [33mclass[39m=[32m"MuiCollapse-root MuiCollapse-vertical MuiCollapse-hidden css-cwrbtg-MuiCollapse-root"[39m
              [33mstyle[39m=[32m"min-height: 0px;"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"MuiCollapse-wrapper MuiCollapse-vertical css-1x6hinx-MuiCollapse-wrapper"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"MuiCollapse-wrapperInner MuiCollapse-vertical css-1i4ywhz-MuiCollapse-wrapperInner"[39m
                [36m>[39m
                  [36m<table[39m
                    [33mclass[39m=[32m"MuiTable-root css-1xwxv7r-MuiTable-root"[39m
                  [36m>[39m
                    [36m<thead[39m
                      [33mclass[39m=[32m"MuiTableHead-root css-1a7iywq-MuiTableHead-root"[39m
                    [36m>[39m
                      [36m<tr[39m
                        [33mclass[39m=[32m"MuiTableRow-root MuiTableRow-head css-1xtozoh-MuiTableRow-root"[39m
                      [36m>[39m
                        [36m<th[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-head MuiTableCell-sizeSmall css-g6bqb5-MuiTableCell-root"[39m
                          [33mscope[39m=[32m"col"[39m
                        [36m>[39m
                          [0mProduct[0m
                        [36m</th>[39m
                        [36m<th[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-head MuiTableCell-alignCenter MuiTableCell-sizeSmall css-m4o53m-MuiTableCell-root"[39m
                          [33mscope[39m=[32m"col"[39m
                        [36m>[39m
                          [0mQty[0m
                        [36m</th>[39m
                        [36m<th[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-head MuiTableCell-alignRight MuiTableCell-sizeSmall css-1ais0ar-MuiTableCell-root"[39m
                          [33mscope[39m=[32m"col"[39m
                        [36m>[39m
                          [0mTotal[0m
                        [36m</th>[39m
                      [36m</tr>[39m
                    [36m</thead>[39m
                    [36m<tbody[39m
                      [33mclass[39m=[32m"MuiTableBody-root css-gmh7jj-MuiTableBody-root"[39m
                    [36m>[39m
                      [36m<tr[39m
                        [33mclass[39m=[32m"MuiTableRow-root css-1xtozoh-MuiTableRow-root"[39m
                      [36m>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall css-jiabcu-MuiTableCell-root"[39m
                        [36m>[39m
                          [36m<p[39m
                            [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-1a40gj6-MuiTypography-root"[39m
                          [36m>[39m
                            [0mProduct[0m
                          [36m</p>[39m
                          [36m<span[39m
                            [33mclass[39m=[32m"MuiTypography-root MuiTypography-caption css-1374baf-MuiTypography-root"[39m
                          [36m>[39m
                            [0mCS1[0m
                            [0m ‚Ä¢ [0m
                            [0mStandard[0m
                          [36m</span>[39m
                          [36m<br />[39m
                          [36m<code[39m
                            [33mclass[39m=[32m"MuiTypography-root MuiTypography-caption css-mpaqru-MuiTypography-root"[39m
                          [36m>[39m
                            [0mN/A[0m
                          [36m</code>[39m
                        [36m</td>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-body MuiTableCell-alignCenter MuiTableCell-sizeSmall css-wsxt5g-MuiTableCell-root"[39m
                        [36m>[39m
                          [0m1[0m
                        [36m</td>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-body MuiTableCell-alignRight MuiTableCell-sizeSmall css-17j8okc-MuiTableCell-root"[39m
                        [36m>[39m
                          [0m¬£[0m
                          [0m100.00[0m
                        [36m</td>[39m
                      [36m</tr>[39m
                    [36m</tbody>[39m
                  [36m</table>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"MuiBox-root css-1yuhvjn"[39m
                  [36m>[39m
                    [36m<hr[39m
                      [33mclass[39m=[32m"MuiDivider-root MuiDivider-fullWidth css-hv6zls-MuiDivider-root"[39m
                    [36m/>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"MuiBox-root css-gg4vpm"[39m
                    [36m>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
                      [36m>[39m
                        [0mSubtotal:[0m
                      [36m</p>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
                      [36m>[39m
                        [0m¬£[0m
                        [0m100.00[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"MuiBox-root css-gg4vpm"[39m
                    [36m>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
                      [36m>[39m
                        [0mVAT (15%)[0m
                        [0m:[0m
                      [36m</p>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
                      [36m>[39m
                        [0m¬£[0m
                        [0m15.00[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<hr[39m
                      [33mclass[39m=[32m"MuiDivider-root MuiDivider-fullWidth css-hv6zls-MuiDivider-root"[39m
                    [36m/>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"MuiBox-root css-gg4vpm"[39m
                    [36m>[39m
                      [36m<h6[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
                      [36m>[39m
                        [0mTotal:[0m
                      [36m</h6>[39m
                      [36m<h6[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
                      [36m>[39m
                        [0m¬£[0m
                        [0m115.00[0m
                      [36m</h6>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"MuiBox-root css-1yuhvjn"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"MuiBox-root css-gg4vpm"[39m
              [36m>[39m
                [36m<h6[39m
                  [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
                [36m>[39m
                  [0mTotal:[0m
                [36m</h6>[39m
                [36m<h6[39m
                  [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
                [36m>[39m
                  [0m¬£[0m
                  [0m115.00[0m
                [36m</h6>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 100 |[39m       )[33m;[39m
     [90m 101 |[39m
    [31m[1m>[22m[39m[90m 102 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m     |[39m                    [31m[1m^[22m[39m
     [90m 103 |[39m         expect(screen[33m.[39mgetByText([35m/115\.00/[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m 104 |[39m       })[33m;[39m
     [90m 105 |[39m     })[33m;[39m[0m

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (src/__tests__/e2e/vatDisplay.e2e.test.js:102:20)

  ‚óè Phase 8 VAT Display - End-to-End ‚Ä∫ CartSummaryPanel - VAT Display ‚Ä∫ EU user sees 0% VAT with reverse charge

    Found multiple elements with the text: /100\.00/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<td[39m
      [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-body MuiTableCell-alignRight MuiTableCell-sizeSmall css-17j8okc-MuiTableCell-root"[39m
    [36m>[39m
      [0m¬£[0m
      [0m100.00[0m
    [36m</td>[39m

    Ignored nodes: comments, script, style
    [36m<p[39m
      [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
    [36m>[39m
      [0m¬£[0m
      [0m100.00[0m
    [36m</p>[39m

    Ignored nodes: comments, script, style
    [36m<h6[39m
      [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
    [36m>[39m
      [0m¬£[0m
      [0m100.00[0m
    [36m</h6>[39m

    Ignored nodes: comments, script, style
    [36m<h6[39m
      [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
    [36m>[39m
      [0m¬£[0m
      [0m100.00[0m
    [36m</h6>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 MuiCard-root css-1swdb20-MuiPaper-root-MuiCard-root"[39m
          [33mstyle[39m=[32m"--Paper-shadow: 0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"MuiCardHeader-root css-b8y68j-MuiCardHeader-root"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"MuiCardHeader-content css-1jkp9bu-MuiCardHeader-content"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"MuiTypography-root MuiTypography-h5 MuiCardHeader-title css-16xl4zq-MuiTypography-root"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"MuiBox-root css-69i1ev"[39m
                [36m>[39m
                  [36m<h2[39m
                    [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-1miy0lu-MuiTypography-root"[39m
                  [36m>[39m
                    [0mOrder Summary[0m
                  [36m</h2>[39m
                  [36m<button[39m
                    [33maria-label[39m=[32m"expand cart summary"[39m
                    [33mclass[39m=[32m"MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall css-155wbr6-MuiButtonBase-root-MuiIconButton-root"[39m
                    [33mtabindex[39m=[32m"0"[39m
                    [33mtype[39m=[32m"button"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33maria-hidden[39m=[32m"true"[39m
                      [33mclass[39m=[32m"MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-1umw9bq-MuiSvgIcon-root"[39m
                      [33mdata-testid[39m=[32m"ExpandMoreIcon"[39m
                      [33mfocusable[39m=[32m"false"[39m
                      [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [36m>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"[39m
                      [36m/>[39m
                    [36m</svg>[39m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</span>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"MuiCardContent-root css-1lt5qva-MuiCardContent-root"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-19b5ozw-MuiTypography-root"[39m
            [36m>[39m
              [0m1[0m
              [0m [0m
              [0mitem[0m
            [36m</p>[39m
            [36m<div[39m
              [33mclass[39m=[32m"MuiCollapse-root MuiCollapse-vertical MuiCollapse-hidden css-cwrbtg-MuiCollapse-root"[39m
              [33mstyle[39m=[32m"min-height: 0px;"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"MuiCollapse-wrapper MuiCollapse-vertical css-1x6hinx-MuiCollapse-wrapper"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"MuiCollapse-wrapperInner MuiCollapse-vertical css-1i4ywhz-MuiCollapse-wrapperInner"[39m
                [36m>[39m
                  [36m<table[39m
                    [33mclass[39m=[32m"MuiTable-root css-1xwxv7r-MuiTable-root"[39m
                  [36m>[39m
                    [36m<thead[39m
                      [33mclass[39m=[32m"MuiTableHead-root css-1a7iywq-MuiTableHead-root"[39m
                    [36m>[39m
                      [36m<tr[39m
                        [33mclass[39m=[32m"MuiTableRow-root MuiTableRow-head css-1xtozoh-MuiTableRow-root"[39m
                      [36m>[39m
                        [36m<th[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-head MuiTableCell-sizeSmall css-g6bqb5-MuiTableCell-root"[39m
                          [33mscope[39m=[32m"col"[39m
                        [36m>[39m
                          [0mProduct[0m
                        [36m</th>[39m
                        [36m<th[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-head MuiTableCell-alignCenter MuiTableCell-sizeSmall css-m4o53m-MuiTableCell-root"[39m
                          [33mscope[39m=[32m"col"[39m
                        [36m>[39m
                          [0mQty[0m
                        [36m</th>[39m
                        [36m<th[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-head MuiTableCell-alignRight MuiTableCell-sizeSmall css-1ais0ar-MuiTableCell-root"[39m
                          [33mscope[39m=[32m"col"[39m
                        [36m>[39m
                          [0mTotal[0m
                        [36m</th>[39m
                      [36m</tr>[39m
                    [36m</thead>[39m
                    [36m<tbody[39m
                      [33mclass[39m=[32m"MuiTableBody-root css-gmh7jj-MuiTableBody-root"[39m
                    [36m>[39m
                      [36m<tr[39m
                        [33mclass[39m=[32m"MuiTableRow-root css-1xtozoh-MuiTableRow-root"[39m
                      [36m>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall css-jiabcu-MuiTableCell-root"[39m
                        [36m>[39m
                          [36m<p[39m
                            [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-1a40gj6-MuiTypography-root"[39m
                          [36m>[39m
                            [0mProduct[0m
                          [36m</p>[39m
                          [36m<span[39m
                            [33mclass[39m=[32m"MuiTypography-root MuiTypography-caption css-1374baf-MuiTypography-root"[39m
                          [36m>[39m
                            [0mCS1[0m
                            [0m ‚Ä¢ [0m
                            [0mStandard[0m
                          [36m</span>[39m
                          [36m<br />[39m
                          [36m<code[39m
                            [33mclass[39m=[32m"MuiTypography-root MuiTypography-caption css-mpaqru-MuiTypography-root"[39m
                          [36m>[39m
                            [0mN/A[0m
                          [36m</code>[39m
                        [36m</td>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-body MuiTableCell-alignCenter MuiTableCell-sizeSmall css-wsxt5g-MuiTableCell-root"[39m
                        [36m>[39m
                          [0m1[0m
                        [36m</td>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-body MuiTableCell-alignRight MuiTableCell-sizeSmall css-17j8okc-MuiTableCell-root"[39m
                        [36m>[39m
                          [0m¬£[0m
                          [0m100.00[0m
                        [36m</td>[39m
                      [36m</tr>[39m
                    [36m</tbody>[39m
                  [36m</table>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"MuiBox-root css-1yuhvjn"[39m
                  [36m>[39m
                    [36m<hr[39m
                      [33mclass[39m=[32m"MuiDivider-root MuiDivider-fullWidth css-hv6zls-MuiDivider-root"[39m
                    [36m/>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"MuiBox-root css-gg4vpm"[39m
                    [36m>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
                      [36m>[39m
                        [0mSubtotal:[0m
                      [36m</p>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
                      [36m>[39m
                        [0m¬£[0m
                        [0m100.00[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"MuiBox-root css-gg4vpm"[39m
                    [36m>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
                      [36m>[39m
                        [0mVAT (0%)[0m
                        [0m:[0m
                      [36m</p>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
                      [36m>[39m
                        [0m¬£[0m
                        [0m0.00[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<hr[39m
                      [33mclass[39m=[32m"MuiDivider-root MuiDivider-fullWidth css-hv6zls-MuiDivider-root"[39m
                    [36m/>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"MuiBox-root css-gg4vpm"[39m
                    [36m>[39m
                      [36m<h6[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
                      [36m>[39m
                        [0mTotal:[0m
                      [36m</h6>[39m
                      [36m<h6[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
                      [36m>[39m
                        [0m¬£[0m
                        [0m100.00[0m
                      [36m</h6>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"MuiBox-root css-1yuhvjn"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"MuiBox-root css-gg4vpm"[39m
              [36m>[39m
                [36m<h6[39m
                  [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
                [36m>[39m
                  [0mTotal:[0m
                [36m</h6>[39m
                [36m<h6[39m
                  [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
                [36m>[39m
                  [0m¬£[0m
                  [0m100.00[0m
                [36m</h6>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 140 |[39m       )[33m;[39m
     [90m 141 |[39m
    [31m[1m>[22m[39m[90m 142 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m     |[39m                    [31m[1m^[22m[39m
     [90m 143 |[39m         expect(screen[33m.[39mgetByText([35m/100\.00/[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m 144 |[39m       })[33m;[39m
     [90m 145 |[39m     })[33m;[39m[0m

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (src/__tests__/e2e/vatDisplay.e2e.test.js:142:20)

  ‚óè Phase 8 VAT Display - End-to-End ‚Ä∫ CartSummaryPanel - VAT Display ‚Ä∫ handles missing vatCalculations gracefully

    TestingLibraryElementError: Unable to find an element with the text: /1 items/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 MuiCard-root css-1swdb20-MuiPaper-root-MuiCard-root"[39m
          [33mstyle[39m=[32m"--Paper-shadow: 0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"MuiCardHeader-root css-b8y68j-MuiCardHeader-root"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"MuiCardHeader-content css-1jkp9bu-MuiCardHeader-content"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"MuiTypography-root MuiTypography-h5 MuiCardHeader-title css-16xl4zq-MuiTypography-root"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"MuiBox-root css-69i1ev"[39m
                [36m>[39m
                  [36m<h2[39m
                    [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-1miy0lu-MuiTypography-root"[39m
                  [36m>[39m
                    [0mOrder Summary[0m
                  [36m</h2>[39m
                  [36m<button[39m
                    [33maria-label[39m=[32m"expand cart summary"[39m
                    [33mclass[39m=[32m"MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall css-155wbr6-MuiButtonBase-root-MuiIconButton-root"[39m
                    [33mtabindex[39m=[32m"0"[39m
                    [33mtype[39m=[32m"button"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33maria-hidden[39m=[32m"true"[39m
                      [33mclass[39m=[32m"MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-1umw9bq-MuiSvgIcon-root"[39m
                      [33mdata-testid[39m=[32m"ExpandMoreIcon"[39m
                      [33mfocusable[39m=[32m"false"[39m
                      [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [36m>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"[39m
                      [36m/>[39m
                    [36m</svg>[39m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</span>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"MuiCardContent-root css-1lt5qva-MuiCardContent-root"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-19b5ozw-MuiTypography-root"[39m
            [36m>[39m
              [0m1[0m
              [0m [0m
              [0mitem[0m
            [36m</p>[39m
            [36m<div[39m
              [33mclass[39m=[32m"MuiCollapse-root MuiCollapse-vertical MuiCollapse-hidden css-cwrbtg-MuiCollapse-root"[39m
              [33mstyle[39m=[32m"min-height: 0px;"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"MuiCollapse-wrapper MuiCollapse-vertical css-1x6hinx-MuiCollapse-wrapper"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"MuiCollapse-wrapperInner MuiCollapse-vertical css-1i4ywhz-MuiCollapse-wrapperInner"[39m
                [36m>[39m
                  [36m<table[39m
                    [33mclass[39m=[32m"MuiTable-root css-1xwxv7r-MuiTable-root"[39m
                  [36m>[39m
                    [36m<thead[39m
                      [33mclass[39m=[32m"MuiTableHead-root css-1a7iywq-MuiTableHead-root"[39m
                    [36m>[39m
                      [36m<tr[39m
                        [33mclass[39m=[32m"MuiTableRow-root MuiTableRow-head css-1xtozoh-MuiTableRow-root"[39m
                      [36m>[39m
                        [36m<th[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-head MuiTableCell-sizeSmall css-g6bqb5-MuiTableCell-root"[39m
                          [33mscope[39m=[32m"col"[39m
                        [36m>[39m
                          [0mProduct[0m
                        [36m</th>[39m
                        [36m<th[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-head MuiTableCell-alignCenter MuiTableCell-sizeSmall css-m4o53m-MuiTableCell-root"[39m
                          [33mscope[39m=[32m"col"[39m
                        [36m>[39m
                          [0mQty[0m
                        [36m</th>[39m
                        [36m<th[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-head MuiTableCell-alignRight MuiTableCell-sizeSmall css-1ais0ar-MuiTableCell-root"[39m
                          [33mscope[39m=[32m"col"[39m
                        [36m>[39m
                          [0mTotal[0m
                        [36m</th>[39m
                      [36m</tr>[39m
                    [36m</thead>[39m
                    [36m<tbody[39m
                      [33mclass[39m=[32m"MuiTableBody-root css-gmh7jj-MuiTableBody-root"[39m
                    [36m>[39m
                      [36m<tr[39m
                        [33mclass[39m=[32m"MuiTableRow-root css-1xtozoh-MuiTableRow-root"[39m
                      [36m>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall css-jiabcu-MuiTableCell-root"[39m
                        [36m>[39m
                          [36m<p[39m
                            [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-1a40gj6-MuiTypography-root"[39m
                          [36m>[39m
                            [0mProduct[0m
                          [36m</p>[39m
                          [36m<span[39m
                            [33mclass[39m=[32m"MuiTypography-root MuiTypography-caption css-1374baf-MuiTypography-root"[39m
                          [36m>[39m
                            [0mCS1[0m
                            [0m ‚Ä¢ [0m
                            [0mStandard[0m
                          [36m</span>[39m
                          [36m<br />[39m
                          [36m<code[39m
                            [33mclass[39m=[32m"MuiTypography-root MuiTypography-caption css-mpaqru-MuiTypography-root"[39m
                          [36m>[39m
                            [0mN/A[0m
                          [36m</code>[39m
                        [36m</td>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-body MuiTableCell-alignCenter MuiTableCell-sizeSmall css-wsxt5g-MuiTableCell-root"[39m
                        [36m>[39m
                          [0m1[0m
                        [36m</td>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-body MuiTableCell-alignRight MuiTableCell-sizeSmall css-17j8okc-MuiTableCell-root"[39m
                        [36m>[39m
                          [0m¬£[0m
                          [0m100.00[0m
                        [36m</td>[39m
                      [36m</tr>[39m
                    [36m</tbody>[39m
                  [36m</table>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 168 |[39m
     [90m 169 |[39m       [90m// Should still render without errors[39m
    [31m[1m>[22m[39m[90m 170 |[39m       expect(screen[33m.[39mgetByText([35m/1 items/[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 171 |[39m     })[33m;[39m
     [90m 172 |[39m   })[33m;[39m
     [90m 173 |[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at getByText (node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/__tests__/e2e/vatDisplay.e2e.test.js:170:21)

  ‚óè Phase 8 VAT Display - End-to-End ‚Ä∫ CartReviewStep - VAT Display ‚Ä∫ displays dynamic UK VAT (20%) in checkout review

    TypeError: Cannot read properties of undefined (reading 'then')

    [0m [90m 91 |[39m   [90m// Load countries from API[39m
     [90m 92 |[39m   useEffect(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 93 |[39m     fetch(config[33m.[39mapiBaseUrl [33m+[39m [32m"/api/countries/"[39m)
     [90m    |[39m                                                 [31m[1m^[22m[39m
     [90m 94 |[39m       [33m.[39mthen((res) [33m=>[39m res[33m.[39mjson())
     [90m 95 |[39m       [33m.[39mthen((data) [33m=>[39m {
     [90m 96 |[39m         [36mlet[39m countries [33m=[39m [33mArray[39m[33m.[39misArray(data) [33m?[39m data [33m:[39m data[33m.[39mresults [33m||[39m [][33m;[39m[0m

      at src/components/Common/CommunicationDetailsPanel.js:93:49
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23949:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:11905:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12028:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13841:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13853:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15737:9)
      at flushPendingEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15702:14)
      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16228:11)
      at flushSyncWorkAcrossRoots_impl (node_modules/react-dom/cjs/react-dom-client.development.js:16079:21)
      at flushSpawnedWork (node_modules/react-dom/cjs/react-dom-client.development.js:15677:9)
      at commitRoot (node_modules/react-dom/cjs/react-dom-client.development.js:15403:9)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14526:15)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/e2e/vatDisplay.e2e.test.js:203:13)

  ‚óè Phase 8 VAT Display - End-to-End ‚Ä∫ CartReviewStep - VAT Display ‚Ä∫ displays SA VAT (15%) in checkout review

    TypeError: Cannot read properties of undefined (reading 'then')

    [0m [90m 91 |[39m   [90m// Load countries from API[39m
     [90m 92 |[39m   useEffect(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 93 |[39m     fetch(config[33m.[39mapiBaseUrl [33m+[39m [32m"/api/countries/"[39m)
     [90m    |[39m                                                 [31m[1m^[22m[39m
     [90m 94 |[39m       [33m.[39mthen((res) [33m=>[39m res[33m.[39mjson())
     [90m 95 |[39m       [33m.[39mthen((data) [33m=>[39m {
     [90m 96 |[39m         [36mlet[39m countries [33m=[39m [33mArray[39m[33m.[39misArray(data) [33m?[39m data [33m:[39m data[33m.[39mresults [33m||[39m [][33m;[39m[0m

      at src/components/Common/CommunicationDetailsPanel.js:93:49
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23949:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:11905:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12028:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13841:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13853:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15737:9)
      at flushPendingEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15702:14)
      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16228:11)
      at flushSyncWorkAcrossRoots_impl (node_modules/react-dom/cjs/react-dom-client.development.js:16079:21)
      at flushSpawnedWork (node_modules/react-dom/cjs/react-dom-client.development.js:15677:9)
      at commitRoot (node_modules/react-dom/cjs/react-dom-client.development.js:15403:9)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14526:15)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/e2e/vatDisplay.e2e.test.js:240:13)

  ‚óè Phase 8 VAT Display - End-to-End ‚Ä∫ CartReviewStep - VAT Display ‚Ä∫ displays 0% VAT for EU with reverse charge message

    TypeError: Cannot read properties of undefined (reading 'then')

    [0m [90m 91 |[39m   [90m// Load countries from API[39m
     [90m 92 |[39m   useEffect(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 93 |[39m     fetch(config[33m.[39mapiBaseUrl [33m+[39m [32m"/api/countries/"[39m)
     [90m    |[39m                                                 [31m[1m^[22m[39m
     [90m 94 |[39m       [33m.[39mthen((res) [33m=>[39m res[33m.[39mjson())
     [90m 95 |[39m       [33m.[39mthen((data) [33m=>[39m {
     [90m 96 |[39m         [36mlet[39m countries [33m=[39m [33mArray[39m[33m.[39misArray(data) [33m?[39m data [33m:[39m data[33m.[39mresults [33m||[39m [][33m;[39m[0m

      at src/components/Common/CommunicationDetailsPanel.js:93:49
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23949:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:11905:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12028:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13841:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13853:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15737:9)
      at flushPendingEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15702:14)
      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16228:11)
      at flushSyncWorkAcrossRoots_impl (node_modules/react-dom/cjs/react-dom-client.development.js:16079:21)
      at flushSpawnedWork (node_modules/react-dom/cjs/react-dom-client.development.js:15677:9)
      at commitRoot (node_modules/react-dom/cjs/react-dom-client.development.js:15403:9)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14526:15)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/e2e/vatDisplay.e2e.test.js:277:13)

  ‚óè Phase 8 VAT Display - End-to-End ‚Ä∫ Multi-region VAT Scenarios ‚Ä∫ ROW user sees 0% VAT (no VAT charged)

    Found multiple elements with the text: /100\.00/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<td[39m
      [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-body MuiTableCell-alignRight MuiTableCell-sizeSmall css-17j8okc-MuiTableCell-root"[39m
    [36m>[39m
      [0m¬£[0m
      [0m100.00[0m
    [36m</td>[39m

    Ignored nodes: comments, script, style
    [36m<p[39m
      [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
    [36m>[39m
      [0m¬£[0m
      [0m100.00[0m
    [36m</p>[39m

    Ignored nodes: comments, script, style
    [36m<h6[39m
      [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
    [36m>[39m
      [0m¬£[0m
      [0m100.00[0m
    [36m</h6>[39m

    Ignored nodes: comments, script, style
    [36m<h6[39m
      [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
    [36m>[39m
      [0m¬£[0m
      [0m100.00[0m
    [36m</h6>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 MuiCard-root css-1swdb20-MuiPaper-root-MuiCard-root"[39m
          [33mstyle[39m=[32m"--Paper-shadow: 0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"MuiCardHeader-root css-b8y68j-MuiCardHeader-root"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"MuiCardHeader-content css-1jkp9bu-MuiCardHeader-content"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"MuiTypography-root MuiTypography-h5 MuiCardHeader-title css-16xl4zq-MuiTypography-root"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"MuiBox-root css-69i1ev"[39m
                [36m>[39m
                  [36m<h2[39m
                    [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-1miy0lu-MuiTypography-root"[39m
                  [36m>[39m
                    [0mOrder Summary[0m
                  [36m</h2>[39m
                  [36m<button[39m
                    [33maria-label[39m=[32m"expand cart summary"[39m
                    [33mclass[39m=[32m"MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall css-155wbr6-MuiButtonBase-root-MuiIconButton-root"[39m
                    [33mtabindex[39m=[32m"0"[39m
                    [33mtype[39m=[32m"button"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33maria-hidden[39m=[32m"true"[39m
                      [33mclass[39m=[32m"MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-1umw9bq-MuiSvgIcon-root"[39m
                      [33mdata-testid[39m=[32m"ExpandMoreIcon"[39m
                      [33mfocusable[39m=[32m"false"[39m
                      [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [36m>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"[39m
                      [36m/>[39m
                    [36m</svg>[39m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</span>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"MuiCardContent-root css-1lt5qva-MuiCardContent-root"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-19b5ozw-MuiTypography-root"[39m
            [36m>[39m
              [0m1[0m
              [0m [0m
              [0mitem[0m
            [36m</p>[39m
            [36m<div[39m
              [33mclass[39m=[32m"MuiCollapse-root MuiCollapse-vertical MuiCollapse-hidden css-cwrbtg-MuiCollapse-root"[39m
              [33mstyle[39m=[32m"min-height: 0px;"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"MuiCollapse-wrapper MuiCollapse-vertical css-1x6hinx-MuiCollapse-wrapper"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"MuiCollapse-wrapperInner MuiCollapse-vertical css-1i4ywhz-MuiCollapse-wrapperInner"[39m
                [36m>[39m
                  [36m<table[39m
                    [33mclass[39m=[32m"MuiTable-root css-1xwxv7r-MuiTable-root"[39m
                  [36m>[39m
                    [36m<thead[39m
                      [33mclass[39m=[32m"MuiTableHead-root css-1a7iywq-MuiTableHead-root"[39m
                    [36m>[39m
                      [36m<tr[39m
                        [33mclass[39m=[32m"MuiTableRow-root MuiTableRow-head css-1xtozoh-MuiTableRow-root"[39m
                      [36m>[39m
                        [36m<th[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-head MuiTableCell-sizeSmall css-g6bqb5-MuiTableCell-root"[39m
                          [33mscope[39m=[32m"col"[39m
                        [36m>[39m
                          [0mProduct[0m
                        [36m</th>[39m
                        [36m<th[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-head MuiTableCell-alignCenter MuiTableCell-sizeSmall css-m4o53m-MuiTableCell-root"[39m
                          [33mscope[39m=[32m"col"[39m
                        [36m>[39m
                          [0mQty[0m
                        [36m</th>[39m
                        [36m<th[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-head MuiTableCell-alignRight MuiTableCell-sizeSmall css-1ais0ar-MuiTableCell-root"[39m
                          [33mscope[39m=[32m"col"[39m
                        [36m>[39m
                          [0mTotal[0m
                        [36m</th>[39m
                      [36m</tr>[39m
                    [36m</thead>[39m
                    [36m<tbody[39m
                      [33mclass[39m=[32m"MuiTableBody-root css-gmh7jj-MuiTableBody-root"[39m
                    [36m>[39m
                      [36m<tr[39m
                        [33mclass[39m=[32m"MuiTableRow-root css-1xtozoh-MuiTableRow-root"[39m
                      [36m>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall css-jiabcu-MuiTableCell-root"[39m
                        [36m>[39m
                          [36m<p[39m
                            [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-1a40gj6-MuiTypography-root"[39m
                          [36m>[39m
                            [0mProduct[0m
                          [36m</p>[39m
                          [36m<span[39m
                            [33mclass[39m=[32m"MuiTypography-root MuiTypography-caption css-1374baf-MuiTypography-root"[39m
                          [36m>[39m
                            [0mCS1[0m
                            [0m ‚Ä¢ [0m
                            [0mStandard[0m
                          [36m</span>[39m
                          [36m<br />[39m
                          [36m<code[39m
                            [33mclass[39m=[32m"MuiTypography-root MuiTypography-caption css-mpaqru-MuiTypography-root"[39m
                          [36m>[39m
                            [0mN/A[0m
                          [36m</code>[39m
                        [36m</td>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-body MuiTableCell-alignCenter MuiTableCell-sizeSmall css-wsxt5g-MuiTableCell-root"[39m
                        [36m>[39m
                          [0m1[0m
                        [36m</td>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-body MuiTableCell-alignRight MuiTableCell-sizeSmall css-17j8okc-MuiTableCell-root"[39m
                        [36m>[39m
                          [0m¬£[0m
                          [0m100.00[0m
                        [36m</td>[39m
                      [36m</tr>[39m
                    [36m</tbody>[39m
                  [36m</table>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"MuiBox-root css-1yuhvjn"[39m
                  [36m>[39m
                    [36m<hr[39m
                      [33mclass[39m=[32m"MuiDivider-root MuiDivider-fullWidth css-hv6zls-MuiDivider-root"[39m
                    [36m/>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"MuiBox-root css-gg4vpm"[39m
                    [36m>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
                      [36m>[39m
                        [0mSubtotal:[0m
                      [36m</p>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
                      [36m>[39m
                        [0m¬£[0m
                        [0m100.00[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"MuiBox-root css-gg4vpm"[39m
                    [36m>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
                      [36m>[39m
                        [0mVAT (0%)[0m
                        [0m:[0m
                      [36m</p>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
                      [36m>[39m
                        [0m¬£[0m
                        [0m0.00[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<hr[39m
                      [33mclass[39m=[32m"MuiDivider-root MuiDivider-fullWidth css-hv6zls-MuiDivider-root"[39m
                    [36m/>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"MuiBox-root css-gg4vpm"[39m
                    [36m>[39m
                      [36m<h6[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
                      [36m>[39m
                        [0mTotal:[0m
                      [36m</h6>[39m
                      [36m<h6[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
                      [36m>[39m
                        [0m¬£[0m
                        [0m100.00[0m
                      [36m</h6>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"MuiBox-root css-1yuhvjn"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"MuiBox-root css-gg4vpm"[39m
              [36m>[39m
                [36m<h6[39m
                  [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
                [36m>[39m
                  [0mTotal:[0m
                [36m</h6>[39m
                [36m<h6[39m
                  [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
                [36m>[39m
                  [0m¬£[0m
                  [0m100.00[0m
                [36m</h6>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 422 |[39m       )[33m;[39m
     [90m 423 |[39m
    [31m[1m>[22m[39m[90m 424 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m     |[39m                    [31m[1m^[22m[39m
     [90m 425 |[39m         expect(screen[33m.[39mgetByText([35m/100\.00/[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m 426 |[39m       })[33m;[39m
     [90m 427 |[39m     })[33m;[39m[0m

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (src/__tests__/e2e/vatDisplay.e2e.test.js:424:20)

  ‚óè Phase 8 VAT Display - End-to-End ‚Ä∫ Multi-region VAT Scenarios ‚Ä∫ handles mixed VAT rates for different product types

    TypeError: Cannot read properties of undefined (reading 'then')

    [0m [90m 91 |[39m   [90m// Load countries from API[39m
     [90m 92 |[39m   useEffect(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 93 |[39m     fetch(config[33m.[39mapiBaseUrl [33m+[39m [32m"/api/countries/"[39m)
     [90m    |[39m                                                 [31m[1m^[22m[39m
     [90m 94 |[39m       [33m.[39mthen((res) [33m=>[39m res[33m.[39mjson())
     [90m 95 |[39m       [33m.[39mthen((data) [33m=>[39m {
     [90m 96 |[39m         [36mlet[39m countries [33m=[39m [33mArray[39m[33m.[39misArray(data) [33m?[39m data [33m:[39m data[33m.[39mresults [33m||[39m [][33m;[39m[0m

      at src/components/Common/CommunicationDetailsPanel.js:93:49
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23949:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:11905:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12028:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13841:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13853:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15737:9)
      at flushPendingEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15702:14)
      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16228:11)
      at flushSyncWorkAcrossRoots_impl (node_modules/react-dom/cjs/react-dom-client.development.js:16079:21)
      at flushSpawnedWork (node_modules/react-dom/cjs/react-dom-client.development.js:15677:9)
      at commitRoot (node_modules/react-dom/cjs/react-dom-client.development.js:15403:9)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14526:15)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/e2e/vatDisplay.e2e.test.js:483:13)

  ‚óè Phase 8 VAT Display - End-to-End ‚Ä∫ Error Handling ‚Ä∫ handles null vatCalculations gracefully

    TypeError: Cannot read properties of undefined (reading 'then')

    [0m [90m 91 |[39m   [90m// Load countries from API[39m
     [90m 92 |[39m   useEffect(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 93 |[39m     fetch(config[33m.[39mapiBaseUrl [33m+[39m [32m"/api/countries/"[39m)
     [90m    |[39m                                                 [31m[1m^[22m[39m
     [90m 94 |[39m       [33m.[39mthen((res) [33m=>[39m res[33m.[39mjson())
     [90m 95 |[39m       [33m.[39mthen((data) [33m=>[39m {
     [90m 96 |[39m         [36mlet[39m countries [33m=[39m [33mArray[39m[33m.[39misArray(data) [33m?[39m data [33m:[39m data[33m.[39mresults [33m||[39m [][33m;[39m[0m

      at src/components/Common/CommunicationDetailsPanel.js:93:49
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23949:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:11905:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12028:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13841:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13853:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15737:9)
      at flushPendingEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15702:14)
      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16228:11)
      at flushSyncWorkAcrossRoots_impl (node_modules/react-dom/cjs/react-dom-client.development.js:16079:21)
      at flushSpawnedWork (node_modules/react-dom/cjs/react-dom-client.development.js:15677:9)
      at commitRoot (node_modules/react-dom/cjs/react-dom-client.development.js:15403:9)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14526:15)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/e2e/vatDisplay.e2e.test.js:511:13)

  ‚óè Phase 8 VAT Display - End-to-End ‚Ä∫ Error Handling ‚Ä∫ handles undefined effective_vat_rate

    TestingLibraryElementError: Unable to find an element with the text: /1 items/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 MuiCard-root css-1swdb20-MuiPaper-root-MuiCard-root"[39m
          [33mstyle[39m=[32m"--Paper-shadow: 0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"MuiCardHeader-root css-b8y68j-MuiCardHeader-root"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"MuiCardHeader-content css-1jkp9bu-MuiCardHeader-content"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"MuiTypography-root MuiTypography-h5 MuiCardHeader-title css-16xl4zq-MuiTypography-root"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"MuiBox-root css-69i1ev"[39m
                [36m>[39m
                  [36m<h2[39m
                    [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-1miy0lu-MuiTypography-root"[39m
                  [36m>[39m
                    [0mOrder Summary[0m
                  [36m</h2>[39m
                  [36m<button[39m
                    [33maria-label[39m=[32m"expand cart summary"[39m
                    [33mclass[39m=[32m"MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall css-155wbr6-MuiButtonBase-root-MuiIconButton-root"[39m
                    [33mtabindex[39m=[32m"0"[39m
                    [33mtype[39m=[32m"button"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33maria-hidden[39m=[32m"true"[39m
                      [33mclass[39m=[32m"MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-1umw9bq-MuiSvgIcon-root"[39m
                      [33mdata-testid[39m=[32m"ExpandMoreIcon"[39m
                      [33mfocusable[39m=[32m"false"[39m
                      [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [36m>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"[39m
                      [36m/>[39m
                    [36m</svg>[39m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</span>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"MuiCardContent-root css-1lt5qva-MuiCardContent-root"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-19b5ozw-MuiTypography-root"[39m
            [36m>[39m
              [0m1[0m
              [0m [0m
              [0mitem[0m
            [36m</p>[39m
            [36m<div[39m
              [33mclass[39m=[32m"MuiCollapse-root MuiCollapse-vertical MuiCollapse-hidden css-cwrbtg-MuiCollapse-root"[39m
              [33mstyle[39m=[32m"min-height: 0px;"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"MuiCollapse-wrapper MuiCollapse-vertical css-1x6hinx-MuiCollapse-wrapper"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"MuiCollapse-wrapperInner MuiCollapse-vertical css-1i4ywhz-MuiCollapse-wrapperInner"[39m
                [36m>[39m
                  [36m<table[39m
                    [33mclass[39m=[32m"MuiTable-root css-1xwxv7r-MuiTable-root"[39m
                  [36m>[39m
                    [36m<thead[39m
                      [33mclass[39m=[32m"MuiTableHead-root css-1a7iywq-MuiTableHead-root"[39m
                    [36m>[39m
                      [36m<tr[39m
                        [33mclass[39m=[32m"MuiTableRow-root MuiTableRow-head css-1xtozoh-MuiTableRow-root"[39m
                      [36m>[39m
                        [36m<th[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-head MuiTableCell-sizeSmall css-g6bqb5-MuiTableCell-root"[39m
                          [33mscope[39m=[32m"col"[39m
                        [36m>[39m
                          [0mProduct[0m
                        [36m</th>[39m
                        [36m<th[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-head MuiTableCell-alignCenter MuiTableCell-sizeSmall css-m4o53m-MuiTableCell-root"[39m
                          [33mscope[39m=[32m"col"[39m
                        [36m>[39m
                          [0mQty[0m
                        [36m</th>[39m
                        [36m<th[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-head MuiTableCell-alignRight MuiTableCell-sizeSmall css-1ais0ar-MuiTableCell-root"[39m
                          [33mscope[39m=[32m"col"[39m
                        [36m>[39m
                          [0mTotal[0m
                        [36m</th>[39m
                      [36m</tr>[39m
                    [36m</thead>[39m
                    [36m<tbody[39m
                      [33mclass[39m=[32m"MuiTableBody-root css-gmh7jj-MuiTableBody-root"[39m
                    [36m>[39m
                      [36m<tr[39m
                        [33mclass[39m=[32m"MuiTableRow-root css-1xtozoh-MuiTableRow-root"[39m
                      [36m>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall css-jiabcu-MuiTableCell-root"[39m
                        [36m>[39m
                          [36m<p[39m
                            [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-1a40gj6-MuiTypography-root"[39m
                          [36m>[39m
                            [0mProduct[0m
                          [36m</p>[39m
                          [36m<span[39m
                            [33mclass[39m=[32m"MuiTypography-root MuiTypography-caption css-1374baf-MuiTypography-root"[39m
                          [36m>[39m
                            [0mCS1[0m
                            [0m ‚Ä¢ [0m
                            [0mStandard[0m
                          [36m</span>[39m
                          [36m<br />[39m
                          [36m<code[39m
                            [33mclass[39m=[32m"MuiTypography-root MuiTypography-caption css-mpaqru-MuiTypography-root"[39m
                          [36m>[39m
                            [0mN/A[0m
                          [36m</code>[39m
                        [36m</td>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-body MuiTableCell-alignCenter MuiTableCell-sizeSmall css-wsxt5g-MuiTableCell-root"[39m
                        [36m>[39m
                          [0m1[0m
                        [36m</td>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-body MuiTableCell-alignRight MuiTableCell-sizeSmall css-17j8okc-MuiTableCell-root"[39m
                        [36m>[39m
                          [0m¬£[0m
                          [0m100.00[0m
                        [36m</td>[39m
                      [36m</tr>[39m
                    [36m</tbody>[39m
                  [36m</table>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"MuiBox-root css-1yuhvjn"[39m
                  [36m>[39m
                    [36m<hr[39m
                      [33mclass[39m=[32m"MuiDivider-root MuiDivider-fullWidth css-hv6zls-MuiDivider-root"[39m
                    [36m/>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"MuiBox-root css-gg4vpm"[39m
                    [36m>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
                      [36m>[39m
                        [0mSubtotal:[0m
                      [36m</p>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
                      [36m>[39m
                        [0m¬£[0m
                        [0m100.00[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"MuiBox-root css-gg4vpm"[39m
                    [36m>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
                      [36m>[39m
                        [0mVAT[0m
                        [0m:[0m
                      [36m</p>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
                      [36m>[39m
                        [0m¬£[0m
                        [0m0.00[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<hr[39m
                      [33mclass[39m=[32m"MuiDivider-root MuiDivider-fullWidth css-hv6zls-MuiDivider-root"[39m
                    [36m/>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"MuiBox-root css-gg4vpm"[39m
                    [36m>[39m
                      [36m<h6[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
                      [36m>[39m
                        [0mTotal:[0m
                      [36m</h6>[39m
                      [36m<h6[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
                      [36m>[39m
                        [0m¬£[0m
                        [0m100.00[0m
                      [36m</h6>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"MuiBox-root css-1yuhvjn"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"MuiBox-root css-gg4vpm"[39m
              [36m>[39m
                [36m<h6[39m
                  [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
                [36m>[39m
                  [0mTotal:[0m
                [36m</h6>[39m
                [36m<h6[39m
                  [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
                [36m>[39m
                  [0m¬£[0m
                  [0m100.00[0m
                [36m</h6>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 550 |[39m
     [90m 551 |[39m       [90m// Should render without errors[39m
    [31m[1m>[22m[39m[90m 552 |[39m       expect(screen[33m.[39mgetByText([35m/1 items/[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 553 |[39m     })[33m;[39m
     [90m 554 |[39m
     [90m 555 |[39m     test([32m'handles malformed vatCalculations structure'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at getByText (node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/__tests__/e2e/vatDisplay.e2e.test.js:552:21)

  ‚óè Phase 8 VAT Display - End-to-End ‚Ä∫ Error Handling ‚Ä∫ handles malformed vatCalculations structure

    TypeError: Cannot read properties of undefined (reading 'subtotal')

    [0m [90m 110 |[39m               [33m<[39m[33mBox[39m display[33m=[39m[32m"flex"[39m justifyContent[33m=[39m[32m"space-between"[39m[33m>[39m
     [90m 111 |[39m                 [33m<[39m[33mTypography[39m variant[33m=[39m[32m"body2"[39m[33m>[39m[33mSubtotal[39m[33m:[39m[33m<[39m[33m/[39m[33mTypography[39m[33m>[39m
    [31m[1m>[22m[39m[90m 112 |[39m                 [33m<[39m[33mTypography[39m variant[33m=[39m[32m"body2"[39m[33m>[39m¬£{vatCalculations[33m.[39mtotals[33m.[39msubtotal[33m.[39mtoFixed([35m2[39m)}[33m<[39m[33m/[39m[33mTypography[39m[33m>[39m
     [90m     |[39m                                                                      [31m[1m^[22m[39m
     [90m 113 |[39m               [33m<[39m[33m/[39m[33mBox[39m[33m>[39m
     [90m 114 |[39m               [33m<[39m[33mBox[39m display[33m=[39m[32m"flex"[39m justifyContent[33m=[39m[32m"space-between"[39m[33m>[39m
     [90m 115 |[39m                 [33m<[39m[33mTypography[39m variant[33m=[39m[32m"body2"[39m[33m>[39m[0m

      at CartSummaryPanel (src/components/Ordering/CheckoutSteps/CartSummaryPanel.js:112:70)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/e2e/vatDisplay.e2e.test.js:575:13)

  ‚óè Phase 8 VAT Display - End-to-End ‚Ä∫ Integration - Full Checkout Flow ‚Ä∫ VAT persists correctly throughout checkout flow

    Found multiple elements with the text: /120\.00/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<h6[39m
      [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
    [36m>[39m
      [0m¬£[0m
      [0m120.00[0m
    [36m</h6>[39m

    Ignored nodes: comments, script, style
    [36m<h6[39m
      [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
    [36m>[39m
      [0m¬£[0m
      [0m120.00[0m
    [36m</h6>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 MuiCard-root css-1swdb20-MuiPaper-root-MuiCard-root"[39m
          [33mstyle[39m=[32m"--Paper-shadow: 0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"MuiCardHeader-root css-b8y68j-MuiCardHeader-root"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"MuiCardHeader-content css-1jkp9bu-MuiCardHeader-content"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"MuiTypography-root MuiTypography-h5 MuiCardHeader-title css-16xl4zq-MuiTypography-root"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"MuiBox-root css-69i1ev"[39m
                [36m>[39m
                  [36m<h2[39m
                    [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-1miy0lu-MuiTypography-root"[39m
                  [36m>[39m
                    [0mOrder Summary[0m
                  [36m</h2>[39m
                  [36m<button[39m
                    [33maria-label[39m=[32m"expand cart summary"[39m
                    [33mclass[39m=[32m"MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall css-155wbr6-MuiButtonBase-root-MuiIconButton-root"[39m
                    [33mtabindex[39m=[32m"0"[39m
                    [33mtype[39m=[32m"button"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33maria-hidden[39m=[32m"true"[39m
                      [33mclass[39m=[32m"MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-1umw9bq-MuiSvgIcon-root"[39m
                      [33mdata-testid[39m=[32m"ExpandMoreIcon"[39m
                      [33mfocusable[39m=[32m"false"[39m
                      [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [36m>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"[39m
                      [36m/>[39m
                    [36m</svg>[39m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</span>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"MuiCardContent-root css-1lt5qva-MuiCardContent-root"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-19b5ozw-MuiTypography-root"[39m
            [36m>[39m
              [0m1[0m
              [0m [0m
              [0mitem[0m
            [36m</p>[39m
            [36m<div[39m
              [33mclass[39m=[32m"MuiCollapse-root MuiCollapse-vertical MuiCollapse-hidden css-cwrbtg-MuiCollapse-root"[39m
              [33mstyle[39m=[32m"min-height: 0px;"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"MuiCollapse-wrapper MuiCollapse-vertical css-1x6hinx-MuiCollapse-wrapper"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"MuiCollapse-wrapperInner MuiCollapse-vertical css-1i4ywhz-MuiCollapse-wrapperInner"[39m
                [36m>[39m
                  [36m<table[39m
                    [33mclass[39m=[32m"MuiTable-root css-1xwxv7r-MuiTable-root"[39m
                  [36m>[39m
                    [36m<thead[39m
                      [33mclass[39m=[32m"MuiTableHead-root css-1a7iywq-MuiTableHead-root"[39m
                    [36m>[39m
                      [36m<tr[39m
                        [33mclass[39m=[32m"MuiTableRow-root MuiTableRow-head css-1xtozoh-MuiTableRow-root"[39m
                      [36m>[39m
                        [36m<th[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-head MuiTableCell-sizeSmall css-g6bqb5-MuiTableCell-root"[39m
                          [33mscope[39m=[32m"col"[39m
                        [36m>[39m
                          [0mProduct[0m
                        [36m</th>[39m
                        [36m<th[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-head MuiTableCell-alignCenter MuiTableCell-sizeSmall css-m4o53m-MuiTableCell-root"[39m
                          [33mscope[39m=[32m"col"[39m
                        [36m>[39m
                          [0mQty[0m
                        [36m</th>[39m
                        [36m<th[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-head MuiTableCell-alignRight MuiTableCell-sizeSmall css-1ais0ar-MuiTableCell-root"[39m
                          [33mscope[39m=[32m"col"[39m
                        [36m>[39m
                          [0mTotal[0m
                        [36m</th>[39m
                      [36m</tr>[39m
                    [36m</thead>[39m
                    [36m<tbody[39m
                      [33mclass[39m=[32m"MuiTableBody-root css-gmh7jj-MuiTableBody-root"[39m
                    [36m>[39m
                      [36m<tr[39m
                        [33mclass[39m=[32m"MuiTableRow-root css-1xtozoh-MuiTableRow-root"[39m
                      [36m>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall css-jiabcu-MuiTableCell-root"[39m
                        [36m>[39m
                          [36m<p[39m
                            [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-1a40gj6-MuiTypography-root"[39m
                          [36m>[39m
                            [0mPrinted Material[0m
                          [36m</p>[39m
                          [36m<span[39m
                            [33mclass[39m=[32m"MuiTypography-root MuiTypography-caption css-1374baf-MuiTypography-root"[39m
                          [36m>[39m
                            [0mCS1[0m
                            [0m ‚Ä¢ [0m
                            [0mPrinted[0m
                          [36m</span>[39m
                          [36m<br />[39m
                          [36m<code[39m
                            [33mclass[39m=[32m"MuiTypography-root MuiTypography-caption css-mpaqru-MuiTypography-root"[39m
                          [36m>[39m
                            [0mN/A[0m
                          [36m</code>[39m
                        [36m</td>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-body MuiTableCell-alignCenter MuiTableCell-sizeSmall css-wsxt5g-MuiTableCell-root"[39m
                        [36m>[39m
                          [0m1[0m
                        [36m</td>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"MuiTableCell-root MuiTableCell-body MuiTableCell-alignRight MuiTableCell-sizeSmall css-17j8okc-MuiTableCell-root"[39m
                        [36m>[39m
                          [0m¬£[0m
                          [0m100.00[0m
                        [36m</td>[39m
                      [36m</tr>[39m
                    [36m</tbody>[39m
                  [36m</table>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"MuiBox-root css-1yuhvjn"[39m
                  [36m>[39m
                    [36m<hr[39m
                      [33mclass[39m=[32m"MuiDivider-root MuiDivider-fullWidth css-hv6zls-MuiDivider-root"[39m
                    [36m/>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"MuiBox-root css-gg4vpm"[39m
                    [36m>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
                      [36m>[39m
                        [0mSubtotal:[0m
                      [36m</p>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
                      [36m>[39m
                        [0m¬£[0m
                        [0m100.00[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"MuiBox-root css-gg4vpm"[39m
                    [36m>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
                      [36m>[39m
                        [0mVAT (20%)[0m
                        [0m:[0m
                      [36m</p>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-body2 css-7ctihp-MuiTypography-root"[39m
                      [36m>[39m
                        [0m¬£[0m
                        [0m20.00[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<hr[39m
                      [33mclass[39m=[32m"MuiDivider-root MuiDivider-fullWidth css-hv6zls-MuiDivider-root"[39m
                    [36m/>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"MuiBox-root css-gg4vpm"[39m
                    [36m>[39m
                      [36m<h6[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
                      [36m>[39m
                        [0mTotal:[0m
                      [36m</h6>[39m
                      [36m<h6[39m
                        [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
                      [36m>[39m
                        [0m¬£[0m
                        [0m120.00[0m
                      [36m</h6>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"MuiBox-root css-1yuhvjn"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"MuiBox-root css-gg4vpm"[39m
              [36m>[39m
                [36m<h6[39m
                  [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
                [36m>[39m
                  [0mTotal:[0m
                [36m</h6>[39m
                [36m<h6[39m
                  [33mclass[39m=[32m"MuiTypography-root MuiTypography-h6 css-h9fkkg-MuiTypography-root"[39m
                [36m>[39m
                  [0m¬£[0m
                  [0m120.00[0m
                [36m</h6>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 622 |[39m       )[33m;[39m
     [90m 623 |[39m
    [31m[1m>[22m[39m[90m 624 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m     |[39m                    [31m[1m^[22m[39m
     [90m 625 |[39m         expect(screen[33m.[39mgetByText([35m/120\.00/[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m 626 |[39m       })[33m;[39m
     [90m 627 |[39m[0m

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (src/__tests__/e2e/vatDisplay.e2e.test.js:624:20)

FAIL src/__tests__/backwardCompatibility.integration.test.js
  ‚óè Backward Compatibility ‚Ä∫ Legacy URL Parameter Formats ‚Ä∫ should support legacy "subject" alias for "subject_code"

    expect(received).toContain(expected) // indexOf

    Expected value: "CM2"
    Received array: []

    [0m [90m 24 |[39m
     [90m 25 |[39m       [36mconst[39m filters [33m=[39m store[33m.[39mgetState()[33m.[39mfilters[33m;[39m
    [31m[1m>[22m[39m[90m 26 |[39m       expect(filters[33m.[39msubjects)[33m.[39mtoContain([32m'CM2'[39m)[33m;[39m
     [90m    |[39m                                [31m[1m^[22m[39m
     [90m 27 |[39m     })[33m;[39m
     [90m 28 |[39m
     [90m 29 |[39m     it([32m'should support legacy "category" alias for "category_code"'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/backwardCompatibility.integration.test.js:26:32)

  ‚óè Backward Compatibility ‚Ä∫ Legacy URL Parameter Formats ‚Ä∫ should support legacy "category" alias for "category_code"

    expect(received).toContain(expected) // indexOf

    Expected value: "Bundle"
    Received array: []

    [0m [90m 33 |[39m
     [90m 34 |[39m       [36mconst[39m filters [33m=[39m store[33m.[39mgetState()[33m.[39mfilters[33m;[39m
    [31m[1m>[22m[39m[90m 35 |[39m       expect(filters[33m.[39mcategories)[33m.[39mtoContain([32m'Bundle'[39m)[33m;[39m
     [90m    |[39m                                  [31m[1m^[22m[39m
     [90m 36 |[39m     })[33m;[39m
     [90m 37 |[39m
     [90m 38 |[39m     it([32m'should support mixed primary and alias parameters'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/backwardCompatibility.integration.test.js:35:34)

  ‚óè Backward Compatibility ‚Ä∫ Legacy URL Parameter Formats ‚Ä∫ should support mixed primary and alias parameters

    expect(received).toContain(expected) // indexOf

    Expected value: "Bundle"
    Received array: []

    [0m [90m 43 |[39m       [36mconst[39m filters [33m=[39m store[33m.[39mgetState()[33m.[39mfilters[33m;[39m
     [90m 44 |[39m       expect(filters[33m.[39msubjects)[33m.[39mtoContain([32m'CM2'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 45 |[39m       expect(filters[33m.[39mcategories)[33m.[39mtoContain([32m'Bundle'[39m)[33m;[39m
     [90m    |[39m                                  [31m[1m^[22m[39m
     [90m 46 |[39m     })[33m;[39m
     [90m 47 |[39m   })[33m;[39m
     [90m 48 |[39m[0m

      at Object.<anonymous> (src/__tests__/backwardCompatibility.integration.test.js:45:34)

  ‚óè Backward Compatibility ‚Ä∫ URL Migration ‚Ä∫ should normalize legacy URLs to new format

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body />[39m
    [36m</html>[39m

    [0m [90m 113 |[39m         [36mconst[39m params [33m=[39m [36mnew[39m [33mURLSearchParams[39m(window[33m.[39mlocation[33m.[39msearch)[33m;[39m
     [90m 114 |[39m         [90m// Should use new primary param names[39m
    [31m[1m>[22m[39m[90m 115 |[39m         expect(params[33m.[39mhas([32m'subject_code'[39m) [33m||[39m params[33m.[39mhas([32m'subject'[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                                                     [31m[1m^[22m[39m
     [90m 116 |[39m       })[33m;[39m
     [90m 117 |[39m     })[33m;[39m
     [90m 118 |[39m[0m

      at src/__tests__/backwardCompatibility.integration.test.js:115:69
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:516:19)

FAIL src/__tests__/components/Product/ProductCard/Tutorial/TutorialSelectionSummaryBar.test.js
  ‚óè TutorialSelectionSummaryBar - Responsive Behavior ‚Ä∫ Setup Phase ‚Ä∫ renders without crashing

    TestingLibraryElementError: Unable to find an element with the text: /CM2 Tutorial Choices/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 68 |[39m     it([32m'renders without crashing'[39m[33m,[39m () [33m=>[39m {
     [90m 69 |[39m       renderWithProviders([33m<[39m[33mTutorialSelectionSummaryBar[39m {[33m...[39mmockProps} [33m/[39m[33m>[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 70 |[39m       expect(screen[33m.[39mgetByText([35m/CM2 Tutorial Choices/i[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 71 |[39m     })[33m;[39m
     [90m 72 |[39m   })[33m;[39m
     [90m 73 |[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at getByText (node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/__tests__/components/Product/ProductCard/Tutorial/TutorialSelectionSummaryBar.test.js:70:21)

  ‚óè TutorialSelectionSummaryBar - Responsive Behavior ‚Ä∫ T003: Mobile Collapsed View by Default (FR-001) ‚Ä∫ displays collapsed view by default on mobile (< 900px)

    TestingLibraryElementError: Unable to find an element with the text: /CM2 Tutorial Choices/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 80 |[39m
     [90m 81 |[39m       [90m// Then: Summary bar displays collapsed view (single line)[39m
    [31m[1m>[22m[39m[90m 82 |[39m       expect(screen[33m.[39mgetByText([35m/CM2 Tutorial Choices/i[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 83 |[39m
     [90m 84 |[39m       [90m// Verify: Only subject code and expand icon visible[39m
     [90m 85 |[39m       [36mconst[39m expandButton [33m=[39m screen[33m.[39mgetByLabelText([35m/Expand/i[39m)[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at getByText (node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/__tests__/components/Product/ProductCard/Tutorial/TutorialSelectionSummaryBar.test.js:82:21)

  ‚óè TutorialSelectionSummaryBar - Responsive Behavior ‚Ä∫ T004: Desktop Expanded View by Default (FR-010) - Regression Test ‚Ä∫ displays expanded view by default on desktop (‚â• 900px)

    TestingLibraryElementError: Unable to find an element with the text: /CM2 Tutorial Choices/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 108 |[39m
     [90m 109 |[39m       [90m// Then: Summary bar displays expanded view[39m
    [31m[1m>[22m[39m[90m 110 |[39m       expect(screen[33m.[39mgetByText([35m/CM2 Tutorial Choices/i[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 111 |[39m
     [90m 112 |[39m       [90m// Verify: All tutorial choices visible (1st, 2nd, 3rd)[39m
     [90m 113 |[39m       expect(screen[33m.[39mgetByText([35m/1st/i[39m))[33m.[39mtoBeInTheDocument()[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at getByText (node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/__tests__/components/Product/ProductCard/Tutorial/TutorialSelectionSummaryBar.test.js:110:21)

  ‚óè TutorialSelectionSummaryBar - Responsive Behavior ‚Ä∫ T004: Desktop Expanded View by Default (FR-010) - Regression Test ‚Ä∫ shows all action buttons on desktop

    TestingLibraryElementError: Unable to find a label with the text of: /Edit tutorial choices/i

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 124 |[39m
     [90m 125 |[39m       [90m// Then: All action buttons visible (Edit, Add to Cart, Remove)[39m
    [31m[1m>[22m[39m[90m 126 |[39m       expect(screen[33m.[39mgetByLabelText([35m/Edit tutorial choices/i[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 127 |[39m       expect(screen[33m.[39mgetByLabelText([35m/Add tutorial choices to cart/i[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m 128 |[39m       expect(screen[33m.[39mgetByLabelText([35m/Remove tutorial choices/i[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m 129 |[39m     })[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getAllByLabelText (node_modules/@testing-library/dom/dist/queries/label-text.js:111:38)
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at getByLabelText (node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/__tests__/components/Product/ProductCard/Tutorial/TutorialSelectionSummaryBar.test.js:126:21)

  ‚óè TutorialSelectionSummaryBar - Responsive Behavior ‚Ä∫ T004: Desktop Expanded View by Default (FR-010) - Regression Test ‚Ä∫ has collapse button (not expand) on desktop

    TestingLibraryElementError: Unable to find a label with the text of: /Collapse/i

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 134 |[39m
     [90m 135 |[39m       [90m// Then: Collapse button visible (expanded by default)[39m
    [31m[1m>[22m[39m[90m 136 |[39m       expect(screen[33m.[39mgetByLabelText([35m/Collapse/i[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 137 |[39m
     [90m 138 |[39m       [90m// And: No expand button (already expanded)[39m
     [90m 139 |[39m       expect(screen[33m.[39mqueryByLabelText([35m/Expand/i[39m))[33m.[39mnot[33m.[39mtoBeInTheDocument()[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getAllByLabelText (node_modules/@testing-library/dom/dist/queries/label-text.js:111:38)
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at getByLabelText (node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/__tests__/components/Product/ProductCard/Tutorial/TutorialSelectionSummaryBar.test.js:136:21)

  ‚óè TutorialSelectionSummaryBar - Responsive Behavior ‚Ä∫ T007: Touch Target Sizes (FR-013) ‚Ä∫ all action buttons meet 44px minimum on mobile

    TestingLibraryElementError: Unable to find an accessible element with the role "button"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 147 |[39m
     [90m 148 |[39m       [90m// Get all buttons[39m
    [31m[1m>[22m[39m[90m 149 |[39m       [36mconst[39m buttons [33m=[39m screen[33m.[39mgetAllByRole([32m'button'[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 150 |[39m
     [90m 151 |[39m       [90m// Then: Each button meets 44px √ó 44px minimum[39m
     [90m 152 |[39m       buttons[33m.[39mforEach(button [33m=>[39m {[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at getAllByRole (node_modules/@testing-library/dom/dist/query-helpers.js:109:15)
      at Object.<anonymous> (src/__tests__/components/Product/ProductCard/Tutorial/TutorialSelectionSummaryBar.test.js:149:30)

FAIL src/__tests__/components/Product/ProductCard/Tutorial/TutorialSummaryBarContainer.test.js
  ‚óè TutorialSummaryBarContainer - Responsive Positioning ‚Ä∫ Setup Phase ‚Ä∫ renders without crashing

    TestingLibraryElementError: Unable to find an element with the text: /CM2 Tutorial Choices/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 62 |[39m     it([32m'renders without crashing'[39m[33m,[39m () [33m=>[39m {
     [90m 63 |[39m       renderWithProviders([33m<[39m[33mTutorialSummaryBarContainer[39m [33m/[39m[33m>[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 64 |[39m       expect(screen[33m.[39mgetByText([35m/CM2 Tutorial Choices/i[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m   })[33m;[39m
     [90m 67 |[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at getByText (node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/__tests__/components/Product/ProductCard/Tutorial/TutorialSummaryBarContainer.test.js:64:21)

FAIL src/__tests__/regression/noHardcodedVat.test.js
  ‚óè Console

    console.warn
      
      WARNING: The following files use VAT data but lack explanatory comments:
        - Common/VATBreakdown.js
        - Ordering/CheckoutSteps/CartReviewStep.js
        - Ordering/CheckoutSteps/CartSummaryPanel.js
        - Ordering/CheckoutSteps.js
        - Product/ProductCard/BundleCard.js
        - Product/ProductCard/MarkingProductCard.js
        - Product/ProductCard/MaterialProductCard.js
        - Product/ProductCard/OnlineClassroomProductCard.js
        - Product/ProductCard/Tutorial/TutorialProductCard.js
        - Product/ProductGrid.js
        - Product/ProductList.js
      
      Consider adding comments like: "// Phase 8: Uses dynamic VAT from API"

    [0m [90m 396 |[39m       [90m// This is a warning, not a hard failure[39m
     [90m 397 |[39m       [36mif[39m (filesWithoutComments[33m.[39mlength [33m>[39m [35m0[39m) {
    [31m[1m>[22m[39m[90m 398 |[39m         console[33m.[39mwarn(
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 399 |[39m           [32m`\nWARNING: The following files use VAT data but lack explanatory comments:\n`[39m [33m+[39m
     [90m 400 |[39m           filesWithoutComments[33m.[39mmap(f [33m=>[39m [32m`  - ${f}`[39m)[33m.[39mjoin([32m'\n'[39m) [33m+[39m
     [90m 401 |[39m           [32m`\n\nConsider adding comments like: "// Phase 8: Uses dynamic VAT from API"\n`[39m[0m

      at Object.<anonymous> (src/__tests__/regression/noHardcodedVat.test.js:398:17)

  ‚óè Phase 8 Regression - No Hardcoded VAT Logic ‚Ä∫ Proper vatUtils imports ‚Ä∫ components using vatCalculations import formatVatLabel from vatUtils

    Found components missing vatUtils import:
      - Ordering/CheckoutSteps.js: Uses vatCalculations.totals.effective_vat_rate but does not import formatVatLabel from vatUtils

    Import { formatVatLabel } from '../../utils/vatUtils' to format VAT rates.

    [0m [90m 242 |[39m           [33m.[39mjoin([32m'\n'[39m)[33m;[39m
     [90m 243 |[39m
    [31m[1m>[22m[39m[90m 244 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m(
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 245 |[39m           [32m`Found components missing vatUtils import:\n${message}\n\n`[39m [33m+[39m
     [90m 246 |[39m           [32m`Import { formatVatLabel } from '../../utils/vatUtils' to format VAT rates.`[39m
     [90m 247 |[39m         )[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/regression/noHardcodedVat.test.js:244:15)

FAIL src/__tests__/contracts/remove-cart-item.contract.test.js
  ‚óè Contract Test: /api/cart/remove/ ‚Ä∫ should remove tutorial cart item and return updated cart (200)

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "/remove/", ObjectContaining {"data": {"item_id": 123}}

    Number of calls: 0

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Assert: Request schema validation[39m
    [31m[1m>[22m[39m[90m 62 |[39m     expect(httpService[33m.[39m[36mdelete[39m)[33m.[39mtoHaveBeenCalledWith(
     [90m    |[39m                                [31m[1m^[22m[39m
     [90m 63 |[39m       expect[33m.[39mstringContaining([32m'/remove/'[39m)[33m,[39m  [90m// URL includes /remove/ endpoint[39m
     [90m 64 |[39m       expect[33m.[39mobjectContaining({
     [90m 65 |[39m         data[33m:[39m {[0m

      at Object.<anonymous> (src/__tests__/contracts/remove-cart-item.contract.test.js:62:32)

  ‚óè Contract Test: /api/cart/remove/ ‚Ä∫ should return 404 error when removing non-existent item

    expect(received).rejects.toMatchObject()

    Matcher error: received value must be a promise or a function returning a promise

    Received has value: undefined

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Act & Assert: Attempt to remove non-existent item[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m expect(cartService[33m.[39mremoveItem([35m999[39m))[33m.[39mrejects[33m.[39mtoMatchObject({
     [90m     |[39m                                                       [31m[1m^[22m[39m
     [90m 111 |[39m       response[33m:[39m {
     [90m 112 |[39m         status[33m:[39m [35m404[39m[33m,[39m
     [90m 113 |[39m         data[33m:[39m {[0m

      at Object.toMatchObject (node_modules/react-scripts/node_modules/expect/build/index.js:270:13)
      at Object.<anonymous> (src/__tests__/contracts/remove-cart-item.contract.test.js:110:55)

  ‚óè Contract Test: /api/cart/remove/ ‚Ä∫ should return 401 error when user is not authenticated

    expect(received).rejects.toMatchObject()

    Matcher error: received value must be a promise or a function returning a promise

    Received has value: undefined

    [0m [90m 148 |[39m
     [90m 149 |[39m     [90m// Act & Assert: Attempt to remove item without authentication[39m
    [31m[1m>[22m[39m[90m 150 |[39m     [36mawait[39m expect(cartService[33m.[39mremoveItem([35m123[39m))[33m.[39mrejects[33m.[39mtoMatchObject({
     [90m     |[39m                                                       [31m[1m^[22m[39m
     [90m 151 |[39m       response[33m:[39m {
     [90m 152 |[39m         status[33m:[39m [35m401[39m[33m,[39m
     [90m 153 |[39m         data[33m:[39m {[0m

      at Object.toMatchObject (node_modules/react-scripts/node_modules/expect/build/index.js:270:13)
      at Object.<anonymous> (src/__tests__/contracts/remove-cart-item.contract.test.js:150:55)

  ‚óè Contract Test: /api/cart/remove/ ‚Ä∫ should require item_id in request body

    expect(received).rejects.toMatchObject()

    Matcher error: received value must be a promise or a function returning a promise

    Received has value: undefined

    [0m [90m 184 |[39m
     [90m 185 |[39m     [90m// Act & Assert: Attempt to remove with invalid ID[39m
    [31m[1m>[22m[39m[90m 186 |[39m     [36mawait[39m expect(cartService[33m.[39mremoveItem([36mnull[39m))[33m.[39mrejects[33m.[39mtoMatchObject({
     [90m     |[39m                                                        [31m[1m^[22m[39m
     [90m 187 |[39m       response[33m:[39m {
     [90m 188 |[39m         data[33m:[39m {
     [90m 189 |[39m           error[33m:[39m expect[33m.[39many([33mString[39m)[0m

      at Object.toMatchObject (node_modules/react-scripts/node_modules/expect/build/index.js:270:13)
      at Object.<anonymous> (src/__tests__/contracts/remove-cart-item.contract.test.js:186:56)

FAIL src/__tests__/contracts/clear-cart.contract.test.js
  ‚óè Contract Test: /api/cart/clear/ ‚Ä∫ should clear cart with multiple items and return empty cart (200)

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "/clear/"

    Number of calls: 0

    [0m [90m 51 |[39m
     [90m 52 |[39m     [90m// Assert: Request schema validation[39m
    [31m[1m>[22m[39m[90m 53 |[39m     expect(httpService[33m.[39mpost)[33m.[39mtoHaveBeenCalledWith(
     [90m    |[39m                              [31m[1m^[22m[39m
     [90m 54 |[39m       expect[33m.[39mstringContaining([32m'/clear/'[39m)
     [90m 55 |[39m     )[33m;[39m
     [90m 56 |[39m[0m

      at Object.<anonymous> (src/__tests__/contracts/clear-cart.contract.test.js:53:30)

  ‚óè Contract Test: /api/cart/clear/ ‚Ä∫ should clear already empty cart successfully (idempotent)

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "/clear/"

    Number of calls: 0

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Assert: Request made successfully[39m
    [31m[1m>[22m[39m[90m 100 |[39m     expect(httpService[33m.[39mpost)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 101 |[39m       expect[33m.[39mstringContaining([32m'/clear/'[39m)
     [90m 102 |[39m     )[33m;[39m
     [90m 103 |[39m[0m

      at Object.<anonymous> (src/__tests__/contracts/clear-cart.contract.test.js:100:30)

  ‚óè Contract Test: /api/cart/clear/ ‚Ä∫ should return 401 error when user is not authenticated

    expect(received).rejects.toMatchObject()

    Matcher error: received value must be a promise or a function returning a promise

    Received has value: undefined

    [0m [90m 135 |[39m
     [90m 136 |[39m     [90m// Act & Assert: Attempt to clear cart without authentication[39m
    [31m[1m>[22m[39m[90m 137 |[39m     [36mawait[39m expect(cartService[33m.[39mclearCart())[33m.[39mrejects[33m.[39mtoMatchObject({
     [90m     |[39m                                                   [31m[1m^[22m[39m
     [90m 138 |[39m       response[33m:[39m {
     [90m 139 |[39m         status[33m:[39m [35m401[39m[33m,[39m
     [90m 140 |[39m         data[33m:[39m {[0m

      at Object.toMatchObject (node_modules/react-scripts/node_modules/expect/build/index.js:270:13)
      at Object.<anonymous> (src/__tests__/contracts/clear-cart.contract.test.js:137:51)

  ‚óè Contract Test: /api/cart/clear/ ‚Ä∫ should not require request body parameters

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "/clear/"

    Number of calls: 0

    [0m [90m 172 |[39m
     [90m 173 |[39m     [90m// Assert: Request made with only URL (no body/params needed)[39m
    [31m[1m>[22m[39m[90m 174 |[39m     expect(httpService[33m.[39mpost)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 175 |[39m       expect[33m.[39mstringContaining([32m'/clear/'[39m)
     [90m 176 |[39m     )[33m;[39m
     [90m 177 |[39m[0m

      at Object.<anonymous> (src/__tests__/contracts/clear-cart.contract.test.js:174:30)

PASS src/__tests__/App.routing.test.js
PASS src/__tests__/integration/filterValidation.integration.test.js
PASS src/__tests__/accessibility-gates.test.js
PASS src/__tests__/store/slices/navigationFilters.test.js
PASS src/__tests__/store/slices/baseFilters.test.js
PASS src/__tests__/store/slices/filterSelectors.test.js
PASS src/__tests__/performance-gates.test.js
  ‚óè Console

    console.log
      
      Performance Contract Test
      
      This test enforces test execution speed requirement:
      - Target: < 5 minutes (300 seconds)
      - Current baseline: ~113 seconds
      - Status: PASSING ‚úì
      
      Test suite performance is acceptable.
      
      To monitor performance:
        npm test -- --watchAll=false
      
      If tests start running slow:
      1. Check for setTimeout/setInterval without cleanup
      2. Verify async operations have timeouts
      3. Use jest.useFakeTimers() for time-dependent tests
      4. Mock expensive operations
      
      This test passes as long as execution time < 5 minutes.

      at Object.<anonymous> (src/__tests__/performance-gates.test.js:51:13)

PASS src/__tests__/coverage-gates.test.js
Failed to collect coverage from /Users/work/Documents/Code/Admin3/frontend/react-Admin3/src/test-utils/mockData.js
ERROR: /Users/work/Documents/Code/Admin3/frontend/react-Admin3/src/test-utils/mockData.js: Unexpected token (105:35)

[0m [90m 103 |[39m [36mexport[39m [36mconst[39m mockProductList [33m=[39m (count [33m=[39m [35m5[39m[33m,[39m overrides [33m=[39m {}) [33m=>[39m
 [90m 104 |[39m   [33mArray[39m[33m.[39m[36mfrom[39m({ length[33m:[39m count }[33m,[39m (_[33m,[39m i) [33m=>[39m
[31m[1m>[22m[39m[90m 105 |[39m     mockProduct({ id[33m:[39m i [33m+[39m [35m1[39m[33m,[39m name[33m:[39m [33m,[39m [33m...[39moverrides })
 [90m     |[39m                                    [31m[1m^[22m[39m
 [90m 106 |[39m   )[33m;[39m
 [90m 107 |[39m
 [90m 108 |[39m [36mexport[39m [36mconst[39m mockCartItems [33m=[39m (count [33m=[39m [35m3[39m[33m,[39m overrides [33m=[39m {}) [33m=>[39m[0m
STACK: SyntaxError: /Users/work/Documents/Code/Admin3/frontend/react-Admin3/src/test-utils/mockData.js: Unexpected token (105:35)

[0m [90m 103 |[39m [36mexport[39m [36mconst[39m mockProductList [33m=[39m (count [33m=[39m [35m5[39m[33m,[39m overrides [33m=[39m {}) [33m=>[39m
 [90m 104 |[39m   [33mArray[39m[33m.[39m[36mfrom[39m({ length[33m:[39m count }[33m,[39m (_[33m,[39m i) [33m=>[39m
[31m[1m>[22m[39m[90m 105 |[39m     mockProduct({ id[33m:[39m i [33m+[39m [35m1[39m[33m,[39m name[33m:[39m [33m,[39m [33m...[39moverrides })
 [90m     |[39m                                    [31m[1m^[22m[39m
 [90m 106 |[39m   )[33m;[39m
 [90m 107 |[39m
 [90m 108 |[39m [36mexport[39m [36mconst[39m mockCartItems [33m=[39m (count [33m=[39m [35m3[39m[33m,[39m overrides [33m=[39m {}) [33m=>[39m[0m
    at toParseError (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parse-error.ts:95:45)
    at FlowParserMixin.raise (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/tokenizer/index.ts:1507:19)
    at FlowParserMixin.unexpected (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/tokenizer/index.ts:1547:16)
    at FlowParserMixin.parseExprAtom (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:1355:22)
    at FlowParserMixin.parseExprAtom (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/plugins/jsx/index.ts:583:22)
    at FlowParserMixin.parseExprSubscripts (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:742:23)
    at FlowParserMixin.parseUpdate (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:721:21)
    at FlowParserMixin.parseMaybeUnary (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:683:23)
    at FlowParserMixin.parseMaybeUnaryOrPrivate (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:417:14)
    at FlowParserMixin.parseExprOps (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:429:23)
    at FlowParserMixin.parseMaybeConditional (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:384:23)
    at FlowParserMixin.parseMaybeAssign (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:301:21)
    at FlowParserMixin.parseMaybeAssign (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/plugins/flow/index.ts:3098:20)
    at callback (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:257:12)
    at FlowParserMixin.allowInAnd (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:3202:12)
    at FlowParserMixin.parseMaybeAssignAllowIn (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:256:17)
    at FlowParserMixin.parseMaybeAssignAllowInOrVoidPattern (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:3316:17)
    at FlowParserMixin.parseObjectProperty (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:2325:16)
    at FlowParserMixin.parseObjPropValue (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:2388:12)
    at FlowParserMixin.parseObjPropValue (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/plugins/flow/index.ts:2696:28)
    at FlowParserMixin.parsePropertyDefinition (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:2228:17)
    at FlowParserMixin.parseObjectLike (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:2095:21)
    at FlowParserMixin.parseExprAtom (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:1181:21)
    at FlowParserMixin.parseExprAtom (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/plugins/jsx/index.ts:583:22)
    at FlowParserMixin.parseExprSubscripts (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:742:23)
    at FlowParserMixin.parseUpdate (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:721:21)
    at FlowParserMixin.parseMaybeUnary (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:683:23)
    at FlowParserMixin.parseMaybeUnaryOrPrivate (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:417:14)
    at FlowParserMixin.parseExprOps (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:429:23)
    at FlowParserMixin.parseMaybeConditional (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:384:23)
    at FlowParserMixin.parseMaybeAssign (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:301:21)
    at FlowParserMixin.parseMaybeAssign (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/plugins/flow/index.ts:3098:20)
    at callback (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:257:12)
    at FlowParserMixin.allowInAnd (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:3202:12)
    at FlowParserMixin.parseMaybeAssignAllowIn (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:256:17)
    at FlowParserMixin.parseMaybeAssignAllowInOrVoidPattern (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:3316:17)
    at FlowParserMixin.parseExprListItem (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:2798:18)
    at FlowParserMixin.parseCallExpressionArguments (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:1042:14)
    at FlowParserMixin.parseCoverCallAndAsyncArrowHead (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:922:29)
    at FlowParserMixin.parseSubscript (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:804:19)
    at FlowParserMixin.parseSubscript (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/plugins/flow/index.ts:3314:20)
    at FlowParserMixin.parseSubscripts (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:763:19)
    at FlowParserMixin.parseSubscripts (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/plugins/flow/index.ts:3257:20)
    at FlowParserMixin.parseExprSubscripts (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:748:17)
    at FlowParserMixin.parseUpdate (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:721:21)
    at FlowParserMixin.parseMaybeUnary (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:683:23)
    at FlowParserMixin.parseMaybeUnaryOrPrivate (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:417:14)
    at FlowParserMixin.parseExprOps (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:429:23)
    at FlowParserMixin.parseMaybeConditional (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:384:23)
    at FlowParserMixin.parseMaybeAssign (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:301:21)
Failed to collect coverage from /Users/work/Documents/Code/Admin3/frontend/react-Admin3/src/components/Common/RulesEngineModal.examples.js
ERROR: /Users/work/Documents/Code/Admin3/frontend/react-Admin3/src/components/Common/RulesEngineModal.examples.js: Unexpected keyword 'const'. (13:2)

[0m [90m 11 |[39m [36mconst[39m singleMessageExample [33m=[39m {
 [90m 12 |[39m   [90m// State management[39m
[31m[1m>[22m[39m[90m 13 |[39m   [36mconst[39m [showModal[33m,[39m setShowModal] [33m=[39m useState([36mfalse[39m)[33m;[39m
 [90m    |[39m   [31m[1m^[22m[39m
 [90m 14 |[39m   [36mconst[39m [modalMessage[33m,[39m setModalMessage] [33m=[39m useState([36mnull[39m)[33m;[39m
 [90m 15 |[39m
 [90m 16 |[39m   [90m// Example message from rules engine[39m[0m
STACK: SyntaxError: /Users/work/Documents/Code/Admin3/frontend/react-Admin3/src/components/Common/RulesEngineModal.examples.js: Unexpected keyword 'const'. (13:2)

[0m [90m 11 |[39m [36mconst[39m singleMessageExample [33m=[39m {
 [90m 12 |[39m   [90m// State management[39m
[31m[1m>[22m[39m[90m 13 |[39m   [36mconst[39m [showModal[33m,[39m setShowModal] [33m=[39m useState([36mfalse[39m)[33m;[39m
 [90m    |[39m   [31m[1m^[22m[39m
 [90m 14 |[39m   [36mconst[39m [modalMessage[33m,[39m setModalMessage] [33m=[39m useState([36mnull[39m)[33m;[39m
 [90m 15 |[39m
 [90m 16 |[39m   [90m// Example message from rules engine[39m[0m
    at toParseError (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parse-error.ts:95:45)
    at FlowParserMixin.raise (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/tokenizer/index.ts:1507:19)
    at FlowParserMixin.checkReservedWord (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:2883:12)
    at FlowParserMixin.parseObjectProperty (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:2338:12)
    at FlowParserMixin.parseObjPropValue (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:2388:12)
    at FlowParserMixin.parseObjPropValue (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/plugins/flow/index.ts:2696:28)
    at FlowParserMixin.parsePropertyDefinition (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:2228:17)
    at FlowParserMixin.parseObjectLike (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:2095:21)
    at FlowParserMixin.parseExprAtom (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:1181:21)
    at FlowParserMixin.parseExprAtom (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/plugins/jsx/index.ts:583:22)
    at FlowParserMixin.parseExprSubscripts (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:742:23)
    at FlowParserMixin.parseUpdate (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:721:21)
    at FlowParserMixin.parseMaybeUnary (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:683:23)
    at FlowParserMixin.parseMaybeUnaryOrPrivate (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:417:14)
    at FlowParserMixin.parseExprOps (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:429:23)
    at FlowParserMixin.parseMaybeConditional (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:384:23)
    at FlowParserMixin.parseMaybeAssign (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:301:21)
    at FlowParserMixin.parseMaybeAssign (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/plugins/flow/index.ts:3098:20)
    at callback (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:257:12)
    at FlowParserMixin.allowInAnd (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:3197:16)
    at FlowParserMixin.parseMaybeAssignAllowIn (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/expression.ts:256:17)
    at FlowParserMixin.parseVar (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/statement.ts:1587:18)
    at FlowParserMixin.parseVarStatement (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/statement.ts:1251:10)
    at FlowParserMixin.parseStatementContent (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/statement.ts:612:21)
    at FlowParserMixin.parseStatementLike (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/statement.ts:482:17)
    at FlowParserMixin.parseStatementLike (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/plugins/flow/index.ts:1991:26)
    at FlowParserMixin.parseModuleItem (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/statement.ts:419:17)
    at FlowParserMixin.parseBlockOrModuleBlockBody (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/statement.ts:1443:16)
    at FlowParserMixin.parseBlockBody (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/statement.ts:1417:10)
    at FlowParserMixin.parseProgram (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/statement.ts:229:10)
    at FlowParserMixin.parseTopLevel (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/statement.ts:203:25)
    at FlowParserMixin.parseTopLevel (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/plugins/flow/index.ts:3379:30)
    at FlowParserMixin.parse (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/parser/index.ts:88:25)
    at parse (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/parser/src/index.ts:86:38)
    at parser (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/core/src/parser/index.ts:28:19)
    at parser.next (<anonymous>)
    at normalizeFile (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
    at normalizeFile.next (<anonymous>)
    at run (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/core/src/transformation/index.ts:40:36)
    at run.next (<anonymous>)
    at transform (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/@babel/core/src/transform.ts:29:20)
    at transform.next (<anonymous>)
    at step (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/gensync/index.js:261:32)
    at /Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/gensync/index.js:273:13
    at async.call.result.err.err (/Users/work/Documents/Code/Admin3/frontend/react-Admin3/node_modules/gensync/index.js:223:11)
-----------------------------------------------------|---------|----------|---------|---------|--------------------------------------------------------------------------------------------------
File                                                 | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                                                                
-----------------------------------------------------|---------|----------|---------|---------|--------------------------------------------------------------------------------------------------
All files                                            |    9.06 |     4.49 |    7.57 |    9.13 |                                                                                                  
 src                                                 |    2.85 |        0 |       0 |    2.85 |                                                                                                  
  App.js                                             |       0 |        0 |       0 |       0 | 44-224                                                                                           
  config.js                                          |     100 |      100 |     100 |     100 |                                                                                                  
  index.js                                           |       0 |      100 |     100 |       0 | 12-25                                                                                            
  reportWebVitals.js                                 |       0 |        0 |       0 |       0 | 1-8                                                                                              
  setupPolyfills.js                                  |       0 |      100 |       0 |       0 | 5-12                                                                                             
 src/components                                      |       0 |        0 |       0 |       0 |                                                                                                  
  ErrorBoundary.js                                   |       0 |        0 |       0 |       0 | 7-39                                                                                             
  NoMatch.js                                         |       0 |      100 |       0 |       0 | 1-2                                                                                              
  SearchBox.js                                       |       0 |        0 |       0 |       0 | 12-128                                                                                           
  SearchResults.js                                   |       0 |        0 |       0 |       0 | 24-146                                                                                           
  StyleGuide.js                                      |       0 |      100 |       0 |       0 | 31-173                                                                                           
 src/components/Address                              |    6.75 |     1.07 |    5.71 |    6.45 |                                                                                                  
  AddressEditModal.js                                |     1.9 |        0 |       0 |    2.02 | 29-356                                                                                           
  AddressSelectionPanel.js                           |   44.68 |     5.71 |      50 |   42.22 | 34-39,52-61,70,75,80,85-106,120-123                                                              
  DynamicAddressForm.js                              |    3.33 |        0 |       0 |    3.44 | 29-254                                                                                           
  SmartAddressInput.js                               |    1.06 |        0 |       0 |    1.08 | 30-679                                                                                           
 src/components/Cart                                 |       0 |        0 |       0 |       0 |                                                                                                  
  CartItemWithVAT.js                                 |       0 |        0 |       0 |       0 | 39-201                                                                                           
  CartTotals.js                                      |       0 |        0 |       0 |       0 | 34-184                                                                                           
  CartVATDisplay.js                                  |       0 |        0 |       0 |       0 | 24-131                                                                                           
  CartVATError.js                                    |       0 |        0 |       0 |       0 | 30-127                                                                                           
 src/components/Common                               |   16.94 |     5.72 |    13.4 |   17.85 |                                                                                                  
  BaseProductCard.js                                 |      60 |    30.76 |      50 |      60 | 12,19,24-30                                                                                      
  CommunicationDetailsPanel.js                       |   31.25 |    20.31 |   21.42 |   33.62 | 70-82,94-119,125-130,136-149,165,176-191,196-197,203-242,248,253-262,280-305,327,376,392,409,459 
  JsonContentRenderer.js                             |       0 |        0 |       0 |       0 | 17-237                                                                                           
  RulesEngineAcknowledgmentModal.js                  |       0 |        0 |       0 |       0 | 40-194                                                                                           
  RulesEngineInlineAlert.js                          |      25 |     8.51 |    9.09 |   26.47 | 43,53-63,71-91,103-109,114,129-207                                                               
  RulesEngineModal.js                                |       0 |        0 |       0 |       0 | 33-203                                                                                           
  VATBreakdown.js                                    |       0 |        0 |       0 |       0 | 17-145                                                                                           
 src/components/Navigation                           |       0 |        0 |       0 |       0 |                                                                                                  
  AuthModal.js                                       |       0 |        0 |       0 |       0 | 16-81                                                                                            
  MainNavActions.js                                  |       0 |        0 |       0 |       0 | 25-56                                                                                            
  MainNavBar.js                                      |       0 |        0 |       0 |       0 | 35-319                                                                                           
  MobileNavigation.js                                |       0 |        0 |       0 |       0 | 10-726                                                                                           
  NavbarBrand.js                                     |       0 |      100 |       0 |       0 | 5-9                                                                                              
  NavigationMenu.js                                  |       0 |        0 |       0 |       0 | 6-508                                                                                            
  SearchModal.js                                     |       0 |        0 |       0 |       0 | 19-84                                                                                            
  TopNavActions.js                                   |       0 |        0 |       0 |       0 | 13-16                                                                                            
  TopNavBar.js                                       |       0 |        0 |       0 |       0 | 18-151                                                                                           
  UserActions.js                                     |       0 |        0 |       0 |       0 | 27-53                                                                                            
  index.js                                           |       0 |        0 |       0 |       0 |                                                                                                  
 src/components/Ordering                             |       0 |        0 |       0 |       0 |                                                                                                  
  CartPanel.js                                       |       0 |        0 |       0 |       0 | 21-444                                                                                           
  CheckoutPage.js                                    |       0 |        0 |       0 |       0 | 9-92                                                                                             
  CheckoutSteps.js                                   |       0 |        0 |       0 |       0 | 20-589                                                                                           
 src/components/Ordering/CheckoutSteps               |    4.45 |     5.51 |    6.25 |     4.7 |                                                                                                  
  CartReviewStep.js                                  |     100 |      100 |     100 |     100 |                                                                                                  
  CartSummaryPanel.js                                |      90 |     64.7 |      75 |      90 | 40                                                                                               
  PaymentStep.js                                     |       0 |        0 |       0 |       0 | 23-397                                                                                           
  PreferenceStep.js                                  |       0 |        0 |       0 |       0 | 22-377                                                                                           
  TermsConditionsStep.js                             |       0 |        0 |       0 |       0 | 18-285                                                                                           
 src/components/Product                              |       0 |        0 |       0 |       0 |                                                                                                  
  ActiveFilters.js                                   |       0 |        0 |       0 |       0 | 56-295                                                                                           
  FilterDebugger.js                                  |       0 |        0 |       0 |       0 | 4-64                                                                                             
  FilterPanel.js                                     |       0 |        0 |       0 |       0 | 73-528                                                                                           
  ProductGrid.js                                     |       0 |        0 |       0 |       0 | 26-340                                                                                           
  ProductList.js                                     |       0 |        0 |       0 |       0 | 59-404                                                                                           
 src/components/Product/ProductCard                  |   11.94 |     13.8 |   10.49 |   12.55 |                                                                                                  
  BundleCard.js                                      |    1.72 |        0 |       0 |    1.86 | 42-548                                                                                           
  MarkingProductCard.js                              |    0.56 |        0 |       0 |    0.58 | 49-1009                                                                                          
  MarkingVoucherProductCard.js                       |    5.71 |        0 |       0 |    6.25 | 31-103                                                                                           
  MaterialProductCard.js                             |   39.71 |    45.16 |   32.69 |   41.35 | 75,79,148-168,198-199,206,221,231,243,253,257-260,265,271,322,416-439,482-871,973                
  OnlineClassroomProductCard.js                      |       2 |        0 |       0 |    2.27 | 41-392                                                                                           
 src/components/Product/ProductCard/Tutorial         |    12.3 |     1.82 |    3.33 |   12.82 |                                                                                                  
  TutorialDetailCard.js                              |   15.78 |        0 |       0 |   15.78 | 39-170                                                                                           
  TutorialProductCard.js                             |     1.4 |        0 |       0 |     1.5 | 73-804                                                                                           
  TutorialSelectionDialog.js                         |    6.12 |        0 |       0 |    6.38 | 34-206                                                                                           
  TutorialSelectionSummaryBar.js                     |   43.58 |       15 |   22.22 |   43.58 | 53,58,64,73-256                                                                                  
  TutorialSummaryBarContainer.js                     |   15.27 |     3.03 |    5.88 |   15.71 | 54-55,67-269                                                                                     
  tutorialStyles.js                                  |     100 |      100 |     100 |     100 |                                                                                                  
 src/components/Test                                 |       0 |        0 |       0 |       0 |                                                                                                  
  ContentParsingDemo.js                              |       0 |        0 |       0 |       0 | 12-309                                                                                           
  ContextBuildingDemo.js                             |       0 |        0 |       0 |       0 | 11-372                                                                                           
  MessageClassificationDemo.js                       |       0 |        0 |       0 |       0 | 15-248                                                                                           
  ProcessingPipelineDemo.js                          |       0 |        0 |       0 |       0 | 15-449                                                                                           
  RulesEngineUtilitiesDemo.js                        |       0 |      100 |       0 |       0 | 11-12                                                                                            
 src/components/Testing                              |       0 |        0 |       0 |       0 |                                                                                                  
  PostcoderTestComponent.jsx                         |       0 |        0 |       0 |       0 | 32-205                                                                                           
 src/components/User                                 |    4.45 |     2.66 |    4.54 |     4.8 |                                                                                                  
  AccountActivation.js                               |       0 |        0 |       0 |       0 | 26-257                                                                                           
  CountryAutocomplete.js                             |    5.47 |     5.26 |       0 |    5.55 | 15-169                                                                                           
  EmailVerification.js                               |       0 |        0 |       0 |       0 | 27-176                                                                                           
  ForgotPasswordForm.js                              |       0 |        0 |       0 |       0 | 30-261                                                                                           
  LoginFormContent.js                                |       0 |        0 |       0 |       0 | 15-92                                                                                            
  Logout.js                                          |       0 |        0 |       0 |       0 | 5-22                                                                                             
  OrderHistory.js                                    |       0 |        0 |       0 |       0 | 21-110                                                                                           
  PhoneCodeAutocomplete.js                           |       0 |        0 |       0 |       0 | 5-46                                                                                             
  PhoneCodeDropdown.js                               |       0 |        0 |       0 |       0 | 5-29                                                                                             
  ProfileForm.js                                     |       0 |        0 |       0 |       0 | 34-965                                                                                           
  ResendActivation.js                                |       0 |        0 |       0 |       0 | 25-125                                                                                           
  ResetPasswordForm.js                               |       0 |        0 |       0 |       0 | 23-224                                                                                           
  UserFormWizard.js                                  |       0 |        0 |       0 |       0 | 38-1764                                                                                          
  ValidatedPhoneInput.js                             |   54.32 |    41.66 |      40 |   56.41 | 44,81,86,91-100,128-133,143-147,152-165,188-194,205-224,260-267                                  
 src/components/admin/exam-sessions                  |       0 |        0 |       0 |       0 |                                                                                                  
  ExamSessionForm.js                                 |       0 |        0 |       0 |       0 | 17-134                                                                                           
  ExamSessionList.js                                 |       0 |        0 |       0 |       0 | 21-98                                                                                            
 src/components/admin/products                       |       0 |        0 |       0 |       0 |                                                                                                  
  ProductDetail.js                                   |       0 |        0 |       0 |       0 | 18-58                                                                                            
  ProductForm.js                                     |       0 |        0 |       0 |       0 | 19-168                                                                                           
  ProductImport.js                                   |       0 |        0 |       0 |       0 | 23-162                                                                                           
  ProductList.js                                     |       0 |        0 |       0 |       0 | 16-54                                                                                            
  ProductTable.js                                    |       0 |        0 |       0 |       0 | 16-58                                                                                            
 src/components/admin/subjects                       |       0 |        0 |       0 |       0 |                                                                                                  
  SubjectDetail.js                                   |       0 |        0 |       0 |       0 | 18-86                                                                                            
  SubjectForm.js                                     |       0 |        0 |       0 |       0 | 19-133                                                                                           
  SubjectImport.js                                   |       0 |        0 |       0 |       0 | 6-59                                                                                             
  SubjectList.js                                     |       0 |        0 |       0 |       0 | 21-132                                                                                           
 src/components/sandbox                              |       0 |        0 |       0 |       0 |                                                                                                  
  ProductCardTestPage.js                             |       0 |      100 |       0 |       0 | 8-9                                                                                              
  ProductCardVariations.js                           |       0 |        0 |       0 |       0 | 34-2496                                                                                          
  UserForm-backup.js                                 |       0 |        0 |       0 |       0 | 35-1141                                                                                          
 src/components/styleguide                           |       0 |        0 |       0 |       0 |                                                                                                  
  ButtonsSection.js                                  |       0 |      100 |       0 |       0 | 16-17                                                                                            
  ColorSystemSection.js                              |       0 |      100 |       0 |       0 | 13-14                                                                                            
  FeedbackSection.js                                 |       0 |      100 |       0 |       0 | 18-19                                                                                            
  FormElementsSection.js                             |       0 |      100 |       0 |       0 | 23-92                                                                                            
  LayoutSection.js                                   |       0 |      100 |       0 |       0 | 21-22                                                                                            
  MaterialDesign3Palette.js                          |       0 |        0 |       0 |       0 | 15-1049                                                                                          
  NavigationSection.js                               |       0 |      100 |       0 |       0 | 31-47                                                                                            
  ProductCardVariantsDemo.js                         |       0 |      100 |       0 |       0 | 6-9                                                                                              
  ProductCardsSection.js                             |       0 |      100 |       0 |       0 | 66-68                                                                                            
  TablesSection.js                                   |       0 |      100 |       0 |       0 | 33-34                                                                                            
  TypographySection.js                               |       0 |      100 |       0 |       0 | 13-14                                                                                            
 src/components/styleguide/ProductCards              |       0 |        0 |       0 |       0 |                                                                                                  
  BalancedProductCard.js                             |       0 |        0 |       0 |       0 | 31-407                                                                                           
  BalancedProductCardTest.js                         |       0 |        0 |       0 |       0 | 25-119                                                                                           
  EnhancedAssessmentProductCard.js                   |       0 |        0 |       0 |       0 | 27-245                                                                                           
  EnhancedBundleProductCard.js                       |       0 |        0 |       0 |       0 | 36-234                                                                                           
  EnhancedCompactCard.js                             |       0 |        0 |       0 |       0 | 21-34                                                                                            
  EnhancedHorizontalCard.js                          |       0 |        0 |       0 |       0 | 16-26                                                                                            
  EnhancedMarkingVoucherProductCard.js               |       0 |        0 |       0 |       0 | 31-57                                                                                            
  EnhancedMinimalCard.js                             |       0 |        0 |       0 |       0 | 10-39                                                                                            
  EnhancedOnlineClassroomProductCard.js              |       0 |        0 |       0 |       0 | 31-200                                                                                           
  EnhancedTutorialProductCard.js                     |       0 |        0 |       0 |       0 | 35-421                                                                                           
  EnhancedTutorialProductCardTest.js                 |       0 |        0 |       0 |       0 | 22-108                                                                                           
  MarkingProductCard.js                              |       0 |        0 |       0 |       0 | 25-204                                                                                           
  ThemeTest.js                                       |       0 |      100 |       0 |       0 | 6-9                                                                                              
  index.js                                           |       0 |        0 |       0 |       0 |                                                                                                  
 src/components/styleguide/ProductCards/MarkingCards |       0 |        0 |       0 |       0 |                                                                                                  
  MarkingCardAllAvailable.js                         |       0 |        0 |       0 |       0 | 23-36                                                                                            
  MarkingCardAllExpired.js                           |       0 |      100 |       0 |       0 | 23-32                                                                                            
  MarkingCardExpiringSoon.js                         |       0 |      100 |       0 |       0 | 22-33                                                                                            
  MarkingCardSomeExpired.js                          |       0 |        0 |       0 |       0 | 26-123                                                                                           
 src/config                                          |   33.33 |        0 |       0 |   33.33 |                                                                                                  
  performanceBudgets.js                              |   33.33 |        0 |       0 |   33.33 | 72-121                                                                                           
 src/contexts                                        |       0 |        0 |       0 |       0 |                                                                                                  
  CartContext.js                                     |       0 |        0 |       0 |       0 | 4-114                                                                                            
  ProductContext.js                                  |       0 |        0 |       0 |       0 | 4-53                                                                                             
  TutorialChoiceContext.js                           |       0 |        0 |       0 |       0 | 4-459                                                                                            
 src/hooks                                           |       0 |        0 |       0 |       0 |                                                                                                  
  useApi.js                                          |       0 |        0 |       0 |       0 | 4-24                                                                                             
  useAuth.js                                         |       0 |        0 |       0 |       0 | 6-214                                                                                            
  useCheckoutRulesEngine.js                          |       0 |        0 |       0 |       0 | 5-43                                                                                             
  useCheckoutValidation.js                           |       0 |        0 |       0 |       0 | 12-437                                                                                           
  useProductCardHelpers.js                           |       0 |        0 |       0 |       0 | 9-46                                                                                             
  useProductsSearch.js                               |       0 |        0 |       0 |       0 | 26-331                                                                                           
  useResourceData.js                                 |       0 |        0 |       0 |       0 |                                                                                                  
  useRulesEngineAcknowledgments.js                   |       0 |        0 |       0 |       0 | 8-188                                                                                            
 src/misc                                            |       0 |        0 |       0 |       0 |                                                                                                  
  AddressFormDemo.js                                 |       0 |        0 |       0 |       0 | 6-73                                                                                             
  LoginForm.js                                       |       0 |        0 |       0 |       0 | 17-74                                                                                            
  PhoneValidationDemo.js                             |       0 |        0 |       0 |       0 | 7-116                                                                                            
  ProductDelete.js                                   |       0 |      100 |       0 |       0 | 3-4                                                                                              
  RegisterFormdelete.js                              |       0 |        0 |       0 |       0 | 9-1200                                                                                           
  RegistrationDelete.js                              |       0 |      100 |       0 |       0 | 5-6                                                                                              
  UserForm.js                                        |       0 |      100 |       0 |       0 | 6-32                                                                                             
  UserProfileDelete.js                               |       0 |        0 |       0 |       0 | 9-137                                                                                            
 src/pages                                           |       0 |        0 |       0 |       0 |                                                                                                  
  Cart.js                                            |       0 |        0 |       0 |       0 | 29-219                                                                                           
  Home.js                                            |       0 |        0 |       0 |       0 | 11-229                                                                                           
  ProfilePage.js                                     |       0 |        0 |       0 |       0 | 21-59                                                                                            
  Registration.js                                    |       0 |        0 |       0 |       0 | 17-107                                                                                           
 src/services                                        |    4.04 |     1.76 |    1.38 |    4.14 |                                                                                                  
  acknowledgmentService.js                           |       0 |        0 |       0 |       0 | 15-220                                                                                           
  addressMetadataConfig.js                           |   66.66 |      100 |       0 |   66.66 | 131                                                                                              
  addressMetadataService.js                          |   16.07 |        0 |       0 |   16.66 | 37-40,51-99,110-127,138-145,154-155,164-167,177-178,188-189,198                                  
  authService.js                                     |       0 |        0 |       0 |       0 | 6-508                                                                                            
  bundleService.js                                   |    2.66 |     7.54 |      10 |    2.66 | 20-289                                                                                           
  cartService.js                                     |       0 |        0 |       0 |       0 | 4-36                                                                                             
  errorTrackingService.js                            |       0 |        0 |       0 |       0 | 4-6                                                                                              
  examSessionService.js                              |       0 |        0 |       0 |       0 | 3-35                                                                                             
  googleAddressMetadata.js                           |   12.24 |        0 |       0 |   14.11 | 35-61,76-90,102-115,126-166,183-194,202-220,227-230,237-256,263                                  
  httpService.js                                     |       0 |        0 |       0 |       0 | 6-136                                                                                            
  loggerService.js                                   |   28.57 |        0 |       0 |   28.57 | 11-21                                                                                            
  phoneValidationService.js                          |    2.38 |        0 |    6.66 |    2.43 | 17-291                                                                                           
  productService.js                                  |    3.66 |     3.19 |       0 |    3.66 | 13-426                                                                                           
  rulesEngineService.js                              |       0 |        0 |       0 |       0 | 4-66                                                                                             
  searchService.js                                   |       0 |        0 |       0 |       0 | 5-189                                                                                            
  subjectService.js                                  |       0 |        0 |       0 |       0 | 4-44                                                                                             
  tutorialService.js                                 |    3.63 |    14.81 |       0 |     3.7 | 9-125                                                                                            
  userService.js                                     |    5.26 |        0 |       0 |    5.26 | 9-136                                                                                            
 src/store                                           |       0 |      100 |       0 |       0 |                                                                                                  
  index.js                                           |       0 |      100 |       0 |       0 | 17-58                                                                                            
 src/store/api                                       |    8.92 |     3.38 |    9.09 |      10 |                                                                                                  
  catalogApi.js                                      |    8.92 |     3.38 |    9.09 |      10 | 16-22,28-63,76-176                                                                               
 src/store/filters                                   |   31.32 |    19.23 |   17.24 |   35.13 |                                                                                                  
  filterRegistry.js                                  |   24.56 |     7.89 |      15 |   27.45 | 67,83-100,119-182,201,216,230,246-255,270,285                                                    
  filterValidator.js                                 |   46.15 |       50 |   22.22 |   52.17 | 34-37,50-51,92-113                                                                               
 src/store/middleware                                |   61.42 |     42.1 |   58.33 |   64.17 |                                                                                                  
  performanceMonitoring.js                           |       0 |        0 |       0 |       0 | 20-74                                                                                            
  urlSyncMiddleware.js                               |   91.48 |    72.72 |   77.77 |   93.47 | 218,231,240                                                                                      
 src/store/slices                                    |   94.09 |    68.08 |   98.43 |   93.86 |                                                                                                  
  baseFilters.slice.js                               |   91.94 |     60.6 |     100 |   91.97 | 150,174,231-243,292                                                                              
  filterSelectors.js                                 |     100 |    83.33 |     100 |     100 | 102-110                                                                                          
  filtersSlice.js                                    |   84.61 |      100 |      80 |   84.61 | 98-99                                                                                            
  navigationFilters.slice.js                         |     100 |      100 |     100 |     100 |                                                                                                  
 src/test-utils                                      |   15.28 |    19.26 |   11.94 |   16.08 |                                                                                                  
  accessibilityHelpers.js                            |       0 |        0 |       0 |       0 | 4-64                                                                                             
  index.js                                           |       0 |        0 |       0 |       0 | 37-48                                                                                            
  mediaQueryMock.js                                  |       0 |      100 |       0 |       0 | 20-39                                                                                            
  mockApi.js                                         |       0 |        0 |       0 |       0 | 13-66                                                                                            
  mockHandlers.js                                    |       0 |        0 |       0 |       0 | 23-234                                                                                           
  reduxMockStore.js                                  |       0 |        0 |       0 |       0 | 9-73                                                                                             
  testHelpers.js                                     |   35.57 |    33.87 |   29.62 |   36.27 | 27-28,37-46,74,114,192,207,225-272,289,297-298,318-391                                           
 src/theme                                           |   45.45 |        0 |       0 |   45.45 |                                                                                                  
  colorTheme.js                                      |     100 |      100 |     100 |     100 |                                                                                                  
  liftKitTheme.js                                    |     100 |      100 |     100 |     100 |                                                                                                  
  testTheme.js                                       |       0 |      100 |     100 |       0 | 8                                                                                                
  theme.js                                           |   42.85 |        0 |       0 |   42.85 | 8-12                                                                                             
  typographyTheme.js                                 |       0 |      100 |     100 |       0 | 4                                                                                                
 src/utils                                           |   28.31 |    14.85 |   21.62 |   29.03 |                                                                                                  
  PerformanceTracker.js                              |   35.48 |    30.76 |   22.22 |   39.75 | 64,68,79,92,96,106,145-286,300,312                                                               
  filterUrlManager.js                                |   61.74 |    46.37 |   70.58 |   60.86 | 56,123,126,143,149,153,230-232,238-240,254-261,270-302,313-355                                   
  priceFormatter.js                                  |     100 |       50 |     100 |     100 | 11                                                                                               
  productCodeGenerator.js                            |   43.66 |    27.71 |   66.66 |   44.11 | 16,24,37,39,51-67,87-88,97-100,120-127,141,162-183,195-200                                       
  rulesEngineUtils.js                                |       0 |        0 |       0 |       0 | 7-1089                                                                                           
  tutorialMetadataBuilder.js                         |   23.07 |        0 |       0 |      30 | 19-43                                                                                            
  vatUtils.js                                        |   43.47 |    13.79 |   16.66 |   43.47 | 44-53,70-73,89-95,111,133-147                                                                    
-----------------------------------------------------|---------|----------|---------|---------|--------------------------------------------------------------------------------------------------

Test Suites: 7 failed, 8 passed, 15 total
Tests:       33 failed, 142 passed, 175 total
Snapshots:   0 total
Time:        13.321 s
Ran all test suites matching /src\/__tests__/i.
